[{"id":"c70964ba34544694","type":"subflow","name":"button","info":"","category":"node maker","in":[{"x":40,"y":40,"wires":[{"id":"5fd3369e032c68b0"}]}],"out":[{"x":380,"y":80,"wires":[{"id":"41f4b3c1077a06f2","port":0}]}],"env":[{"name":"field_columns","type":"str","value":"col-100","ui":{"label":{"en-US":"Layout"},"type":"select","opts":{"opts":[{"l":{"en-US":"full-row"},"v":"col-100"},{"l":{"en-US":"3/4 row"},"v":"col col-75"},{"l":{"en-US":"2/3 row"},"v":"col col-66"},{"l":{"en-US":"1/2 row"},"v":"col col-50"},{"l":{"en-US":"1/3 row"},"v":"col col-33"},{"l":{"en-US":"1/4 row"},"v":"col col-25"}]}}},{"name":"field_name","type":"str","value":"","ui":{"label":{"en-US":"Button Name"},"type":"input","opts":{"types":["str"]}}},{"name":"field_label","type":"str","value":"","ui":{"label":{"en-US":"Caption"},"type":"input","opts":{"types":["str"]}}},{"name":"field_icon","type":"str","value":"","ui":{"label":{"en-US":"Icon"},"type":"input","opts":{"types":["str"]}}},{"name":"button_size","type":"str","value":"red-ui-button","ui":{"label":{"en-US":"Size"},"type":"select","opts":{"opts":[{"l":{"en-US":"Regular"},"v":"red-ui-button btn-regular"},{"l":{"en-US":"Small"},"v":"red-ui-button red-ui-button-small"}]}}}],"meta":{},"color":"#DDAA99","icon":"font-awesome/fa-square-o"},{"id":"5fd3369e032c68b0","type":"function","z":"c70964ba34544694","name":"button_props","func":"msg.field_name = env.get('field_name');\nmsg.field_label = env.get('field_label');\nlet icon = env.get('field_icon');\nif (icon != '') {\n    msg.field_icon = '<i class=\"fa fa-' + icon + '\"></i> ';\n} else {\n    msg.field_icon = '';\n}\nmsg.field_label_elm = msg.field_icon + msg.field_label;\nmsg.button_size = env.get('button_size');\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":180,"y":40,"wires":[["09a5b20f490d7474"]]},{"id":"09a5b20f490d7474","type":"template","z":"c70964ba34544694","name":"edit_dialog","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<div class=\"{{field_columns}}\">\n    <button id=\"btn_{{field_name}}\" type=\"button\" class=\"{{{button_size}}}\">{{{field_label_elm}}}</button>\n</div>","output":"str","x":170,"y":100,"wires":[["41f4b3c1077a06f2"]]},{"id":"41f4b3c1077a06f2","type":"function","z":"c70964ba34544694","name":"edit_dialog","func":"msg.edit_dialog.push(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":170,"y":160,"wires":[[]]},{"id":"7d1e49e9a2f7337a","type":"subflow","name":"tab","info":"The tab node allows you to group your input fields and other controls in your node’s property panel under tabs. An example of tabs can be seen in the native function node. Simply wire a tab node between the start and finish nodes and before the UI nodes you wish to have appear under a tab. The tab node uses the following properties to determine its appearance: \n\n* Tab Name - A JavaScript compatible variable name (no spaces hyphens or punctuation).\n* Label - The actual text that will be used when displaying the label.\n* Icon - A font awesome icon that will appear to the left of the label. You can specify the icon name sans any ‘fa’ prefix; i.e. bathtub","category":"node maker","in":[{"x":40,"y":40,"wires":[{"id":"97041e5e58e0392a"}]}],"out":[{"x":300,"y":40,"wires":[{"id":"97041e5e58e0392a","port":0}]}],"env":[{"name":"tab_name","type":"str","value":"","ui":{"label":{"en-US":"Tab Name"},"type":"input","opts":{"types":["str"]}}},{"name":"tab_label","type":"str","value":"","ui":{"label":{"en-US":"Label"},"type":"input","opts":{"types":["str"]}}},{"name":"tab_icon","type":"str","value":"","ui":{"label":{"en-US":"Icon"},"type":"input","opts":{"types":["str"]}}}],"meta":{},"color":"#DDAA99","icon":"font-awesome/fa-bookmark"},{"id":"97041e5e58e0392a","type":"function","z":"7d1e49e9a2f7337a","name":"edit_dialog","func":"let tab = JSON.stringify({\n    type: 'tab_definition',\n    label: env.get('tab_label'),\n    icon: env.get('tab_icon'),\n    name: env.get('tab_name')\n});\nmsg.edit_dialog.push(tab);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":170,"y":40,"wires":[[]]},{"id":"9771d13dd19bf60f","type":"subflow","name":"use templts.","info":"If you use any of the code templates, be sure to place this node before it.","category":"node maker","in":[{"x":40,"y":40,"wires":[{"id":"ebd81684ada1c31c"}]}],"out":[{"x":420,"y":100,"wires":[{"id":"6bb34952a24fe530","port":0}]}],"env":[],"meta":{},"color":"#F3B567","icon":"font-awesome/fa-file-code-o"},{"id":"ebd81684ada1c31c","type":"template","z":"9771d13dd19bf60f","name":"re-size fix","field":"payload","fieldType":"msg","format":"javascript","syntax":"mustache","template":"            // Allow dynamic re-size after init. appearance \n            setTimeout(function () {\n                $('#node-props').css('width', '100%');\n            }, 30);","output":"str","x":180,"y":40,"wires":[["6bb34952a24fe530"]]},{"id":"6bb34952a24fe530","type":"function","z":"9771d13dd19bf60f","name":"compose_code","func":"msg._oneditprepare.push(msg.payload);\n\nString.prototype.delRightMost = function (sFind) {\n    for (var i = this.length; i >= 0; i = i - 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(0, f);\n            break;\n        }\n    }\n    return this;\n};\nString.prototype.getRightMost = function (sFind) {\n    for (var i = this.length; i >= 0; i = i - 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(f + sFind.length, f + sFind.length + this.length);\n        }\n    }\n    return this;\n};\nString.prototype.delLeftMost = function (sFind) {\n    for (var i = 0; i < this.length; i = i + 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(f + sFind.length, f + sFind.length + this.length);\n            break;\n        }\n    }\n    return this;\n};\nString.prototype.getLeftMost = function (sFind) {\n    for (var i = 0; i < this.length; i = i + 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(0, f);\n            break;\n        }\n    }\n    return this;\n};\nvar indent = \" \".repeat(4);\nvar tabIndent = \"\";\nvar edit_dialog = \" \".repeat(8) + '<div class=\"form-row\">' + \"\\n\";\nvar cTotal = 0;\nvar nItems = 0;\nvar initTab = false;\nvar firstTabName = '';\nvar bInRGroup = false;    \nmsg.edit_dialog.forEach(function(item, index) {\n    if (item.indexOf('\"type\":\"tab_definition\"') == -1 && item.indexOf('form-row rgroup') == -1) {\n        item = item.replace(/^/gm, tabIndent);\n        item = item.replace(/^/gm, tabIndent);\n        if (bInRGroup) {\n            item = item.replace(/^/gm, \" \".repeat(4));\n        }\n    }\n    if (item.indexOf('<div class=\"form-row rgroup\"') > -1) {\n        edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">').trimEnd() + \"\\n\";\n        item += \" \".repeat(4) + '<div class=\"form-row\">' + \"\\n\";\n        item = item.replace(/^/gm, \" \".repeat(8) + tabIndent).trimEnd() + \"\\n\";\n        bInRGroup = true;\n        edit_dialog += item;\n        return;\n    }\n    if (item.indexOf('<!--form-row rgroup-->') > -1) {\n        edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">').trimEnd() + \"\\n\";\n        edit_dialog += \" \".repeat(8) + tabIndent + \"</div><!--form-row rgroup-...-template-->\\n\";\n        if (index < msg.edit_dialog.length - 1) {\n            edit_dialog += indent + indent + tabIndent + '<div class=\"form-row\">' + \"\\n\";\n        }\n        bInRGroup = false;\n        return;\n    }\n    if (item.indexOf('\"type\":\"tab_definition\"') > -1) {\n        let tab = JSON.parse(item);\n        if (initTab == false) {\n            \n            // Inject the tab row\n            let r = edit_dialog.getRightMost('<div class=\"form-row\">');\n            edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">');\n            edit_dialog += '<div class=\"form-row func-tabs-row\">' + r;\n            edit_dialog += indent + indent + indent + '<ul style=\"min-width: 600px; margin-bottom: 20px;\" id=\"func-tabs\"></ul>' + \"\\n\";\n            edit_dialog += indent + indent + \"</div><!--func-tabs-row-->\\n\";\n            edit_dialog += indent + indent + '<div id=\"func-tabs-content\" style=\"min-height: calc(100% - 95px);\">' + \"\\n\";\n\n            // Start first tab\n            edit_dialog += indent + indent + indent + '<div id=\"func-tab-' + tab.name + '\" style=\"display:none\">' + \"\\n\";\n            edit_dialog += indent + indent + indent + indent + '<div class=\"form-row\">' + \"\\n\";\n            tabIndent = \" \".repeat(8);\n\n            // Init tab system\n            let code = \"// Prepare tab system\\n\";\n            code += \"var tabs = RED.tabs.create({\\n\";\n            code += \"    id: 'func-tabs',\\n\";\n            code += \"    onchange: function(tab) {\\n\";\n            code += \"        $('#func-tabs-content').children().hide();\\n\";\n            code += \"        $('#' + tab.id).show();\\n\";\n            code += \"    }\\n\";\n            code += \"});\\n\\n\";\n\n            // Add first tab code\n            code += \"// Add first tab, \" + tab.name + \"\\n\";\n            code += \"tabs.addTab({\\n\";\n            code += \"    id: 'func-tab-\" + tab.name + \"',\\n\";\n            code += \"    iconClass: 'fa fa-\" + tab.icon + \"',\\n\";\n            code += \"    label: '\" + tab.label + \"'\\n\";\n            code += \"});\\n\\n\";\n            firstTabName = tab.name;\n            code = code.replace(/^/gm, \" \".repeat(12));\n            msg._oneditprepare.push(code);\n            initTab = true;\n        }else{\n\n            // Add subsequent tabs \n            let r = edit_dialog.getRightMost('    <div class=\"form-row\"');\n            edit_dialog = edit_dialog.delRightMost('    <div class=\"form-row\"');\n            edit_dialog += \"</div><!--func-tab-tab#-->\\n\"; // close out last tab\n            edit_dialog += \" \".repeat(12) + '<div id=\"func-tab-' + tab.name + '\" style=\"display:none\">' + \"\\n\";\n            edit_dialog += \" \".repeat(16) + '<div class=\"form-row\"' + r;\n\n            // Add additional tab code\n            let code = \"// Add tab, \" + tab.name + \"\\n\";            \n            code += \"tabs.addTab({\\n\";\n            code += \"    id: 'func-tab-\" + tab.name + \"',\\n\";\n            code += \"    iconClass: 'fa fa-\" + tab.icon + \"',\\n\";\n            code += \"    label: '\" + tab.label + \"'\\n\";\n            code += \"});\\n\\n\";\n            code = code.replace(/^/gm, \" \".repeat(12));\n            msg._oneditprepare.push(code);\n        }        \n    }else{\n        if (tabIndent == '') {\n            item = item.replace(/^/gm, indent + indent + indent);\n        }else{\n            item = item.replace(/^/gm, indent);\n        }\n        let c = item.delLeftMost('col-').getLeftMost('\"').getLeftMost(' ');\n        cTotal += Number(c);\n        if (cTotal >= 83) {\n            let m = 5 * nItems;\n            if (m > 0) {\n                item = item.replace(\n                    'class=\"col ',\n                    'style=\"margin-right:-' + m.toString() + 'px;\" class=\"col '\n                );\n            }\n            if (nItems == 3) {\n                let r = edit_dialog.getRightMost('<div class=\"form-row\">');\n                edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">');\n                edit_dialog += '<div class=\"form-row\" style=\"margin-right:10px;\">' + r;\n            }\n            edit_dialog += item + \"\\n\";\n            if (index < msg.edit_dialog.length - 1) {\n                if (bInRGroup) {\n                    edit_dialog += \" \".repeat(4);\n                }\n                edit_dialog += indent + indent + tabIndent + \"</div><!--form-row-->\\n\";\n                edit_dialog += indent + indent + tabIndent + '<div class=\"form-row\">' + \"\\n\";\n                cTotal = 0;\n                nItems = 0;\n            }\n        } else {\n            edit_dialog += item + \"\\n\";\n            nItems++;\n        }\n    }\n});\nif (initTab) { \n    edit_dialog += \" \".repeat(16) + \"</div><!--form-row-->\\n\";\n    edit_dialog += \" \".repeat(12) + \"</div><!--func-tab-tab#-->\\n\";\n    edit_dialog += \" \".repeat(8) + \"</div><!--func-tabs-content-->\";\n\n    // Activate the first tab if present\n    let code = \" \".repeat(12) + 'tabs.activateTab(\"func-tab-' + firstTabName + '\");' + \"\\n\";\n    msg._oneditprepare.push(code);\n}else{\n    edit_dialog += \" \".repeat(8) + \"</div><!--form-row-->\";\n}\nmsg.edit_dialog = edit_dialog;\n\nlet defaults = '';\nmsg.defaults.forEach(function(item, index) {\n    defaults += \"            \" + item;\n    if (index < msg.defaults.length -1) {\n        defaults += \",\\n\";\n    }else{\n        defaults += \"\\n\";\n    }\n});\nmsg.defaults = defaults;\nmsg.oneditprepare = \"\\n\" + msg._oneditprepare.join(\"\\n\");\nmsg.oneditresize = \"\\n\" + msg._oneditresize.join(\"\\n\");\nmsg.oneditsave = \"\\n\" + msg._oneditsave.join(\"\\n\");\nmsg.oneditcancel = \"\\n\" + msg._oneditcancel.join(\"\\n\");\nmsg.defaults = msg.defaults.slice(0, -1);\nvar othercode = \"\";\nfor (var key in msg._othercode) {\n    var value = msg._othercode[key];\n    othercode += value;\n}\nmsg.othercode = \"\\n\" + othercode;\nmsg.runtimecode = \"\\n\" + msg.runtimecode.replace(/^/gm, \"    \".repeat(4));\nmsg.useTemplates = true;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":200,"y":100,"wires":[[]]},{"id":"7062e6f741533eb2","type":"subflow","name":"field ","info":"The field node represents an instance of the Node-RED [Inputs field](https://nodered.org/docs/creating-nodes/edit-dialog#inputs). A plain input text box can be achieved with the no “Typed” checkbox or type definition specified. The following properties for defining a field are as follows:\n\n* Layout - The number of columns the label will consume out of a division of four or three equal areas. To align controls on the panel on the same row, ensure the used column space totals to consume an entire row.\n* Field Name - A JavaScript compatible variable name (no spaces hyphens or punctuation).\n* Label - The actual text that will be used when displaying the label.\n* Icon - A font awesome icon that will appear to the left of the label. You can specify the icon name sans any ‘fa’ prefix; i.e. bathtub\n* Default - the optional default contents of the field.\n* Placeholder - displays a grey value in the input field as a suggested or example value.\n* Required - whether the input field is required and must be filled out. True will invoke a basic validation check to ensure the value is supplied. A missing value will cause the node’s appearance to show an “needs configuration” triangle and subsequent message when the user attempts to deploy the flow. Additionally, a red border will appear around any required fields not filled out.\n* Typed - This section allows the field input to have one or more types to be prefixed to the field area and influences the fields display behavior. See the [Node-RED Inputs field for examples](https://nodered.org/docs/creating-nodes/edit-dialog#inputs).\n* Type Definitions - Allows for defining a custom type using JSON. When the above Typed checkbox “Include additional type definition array” is checked, this property becomes relevant. For example, you can create a custom input option such as “the complete msg object” as used in the [debug node](https://nodered.org/docs/user-guide/nodes#debug).\n* Default Type - This string value determines the default type to be selected for the input field when your node’s property panel is first opened. \n","category":"node maker","in":[{"x":40,"y":40,"wires":[{"id":"73a3b0f6af6b0aeb"}]}],"out":[{"x":560,"y":260,"wires":[{"id":"67eed6e284e28123","port":0},{"id":"eda19645927d3dda","port":0}]}],"env":[{"name":"field_columns","type":"str","value":"col-100","ui":{"label":{"en-US":"Layout"},"type":"select","opts":{"opts":[{"l":{"en-US":"full-row"},"v":"col-100"},{"l":{"en-US":"3/4 row"},"v":"col col-75 sml-lbl"},{"l":{"en-US":"2/3 row"},"v":"col col-66 sml-lbl"},{"l":{"en-US":"1/2 row"},"v":"col col-50 sml-lbl"},{"l":{"en-US":"1/3 row"},"v":"col col-33 sml-lbl"},{"l":{"en-US":"1/4 row"},"v":"col col-25 sml-lbl"}]}}},{"name":"field_name","type":"str","value":"","ui":{"label":{"en-US":"Field Name"},"type":"input","opts":{"types":["str"]}}},{"name":"field_label","type":"str","value":"","ui":{"label":{"en-US":"Label"},"type":"input","opts":{"types":["str"]}}},{"name":"field_icon","type":"str","value":"","ui":{"label":{"en-US":"Icon"},"type":"input","opts":{"types":["str"]}}},{"name":"field_default","type":"str","value":"","ui":{"label":{"en-US":"Default"},"type":"input","opts":{"types":["str","num","bool","json","bin"]}}},{"name":"field_placeholder","type":"str","value":"","ui":{"label":{"en-US":"Placeholder"},"type":"input","opts":{"types":["str"]}}},{"name":"field_required","type":"bool","value":"false","ui":{"label":{"en-US":"Required"}}},{"name":"typed","type":"str","value":"","ui":{"label":{"en-US":"Typed:"},"type":"none"}},{"name":"field_type_string","type":"bool","value":"false","ui":{"label":{"en-US":"str"},"type":"checkbox"}},{"name":"field_type_number","type":"bool","value":"false","ui":{"label":{"en-US":"num"},"type":"checkbox"}},{"name":"field_type_boolean","type":"bool","value":"false","ui":{"label":{"en-US":"bool"},"type":"checkbox"}},{"name":"field_type_msg","type":"bool","value":"false","ui":{"label":{"en-US":"msg"},"type":"checkbox"}},{"name":"field_type_flow","type":"bool","value":"false","ui":{"label":{"en-US":"flow"},"type":"checkbox"}},{"name":"field_type_global","type":"bool","value":"false","ui":{"label":{"en-US":"global"},"type":"checkbox"}},{"name":"field_type_json","type":"bool","value":"false","ui":{"label":{"en-US":"json"},"type":"checkbox"}},{"name":"field_type_additional","type":"bool","value":"false","ui":{"label":{"en-US":"Include additional type definition array (below)"},"type":"checkbox"}},{"name":"field_additional_types","type":"json","value":"[{\"value\":\"full\",\"label\":\"complete msg object\",\"hasValue\":false}]","ui":{"label":{"en-US":"Type Definitions"},"type":"input","opts":{"types":["json"]}}},{"name":"field_default_type","type":"str","value":"","ui":{"label":{"en-US":"Default Type"},"type":"input","opts":{"types":["str"]}}}],"meta":{},"color":"#DDAA99","icon":"font-awesome/fa-i-cursor"},{"id":"2f6d8f31aa468d9f","type":"template","z":"7062e6f741533eb2","name":"edit_dialog","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<div class=\"{{field_columns}}\">\n    {{{field_label_elm}}}\n    <input type=\"text\" id=\"node-input-{{field_name}}\" placeholder=\"{{{field_placeholder}}}\">\n    {{{field_has_hidden_type}}}\n</div><!--col-->","output":"str","x":150,"y":100,"wires":[["a0b8b4c7a26b07dd"]]},{"id":"73a3b0f6af6b0aeb","type":"function","z":"7062e6f741533eb2","name":"field_props","func":"msg.field_name = env.get('field_name');\nmsg.field_label = env.get('field_label');\nlet icon = env.get('field_icon');\nif (icon != '') {\n    msg.field_icon = '<i class=\"fa fa-' + icon + '\"></i> ';\n}else{\n    msg.field_icon = '';\n}\nif (msg.field_label == '') {\n    msg.field_label_elm = '';\n}else{\n    msg.field_label_elm = '<label for=\"node-input-' + msg.field_name + '\">';\n    msg.field_label_elm += msg.field_icon + msg.field_label + '</label>';\n}\nmsg.field_placeholder = env.get('field_placeholder');\nmsg.field_required = env.get('field_required');\nmsg.field_default = env.get('field_default');\n\nmsg.field_type_string = env.get('field_type_string');\nmsg.field_type_number = env.get('field_type_number');\nmsg.field_type_boolean = env.get('field_type_boolean');\nmsg.field_type_msg = env.get('field_type_msg');\nmsg.field_type_flow = env.get('field_type_flow');\nmsg.field_type_global = env.get('field_type_global');\nmsg.field_type_json = env.get('field_type_json');\nmsg.field_type_additional = env.get('field_type_additional');\nmsg.field_default_type = env.get('field_default_type');\nmsg.field_types = [];\nif (msg.field_type_string) {\n    msg.field_types.push('str');\n}\nif (msg.field_type_number) {\n    msg.field_types.push('num');\n}\nif (msg.field_type_boolean) {\n    msg.field_types.push('bool');\n}\nif (msg.field_type_msg) {\n    msg.field_types.push('msg');\n}\nif (msg.field_type_flow) {\n    msg.field_types.push('flow');\n}\nif (msg.field_type_global) {\n    msg.field_types.push('global');\n}\nif (msg.field_type_json) {\n    msg.field_types.push('json');\n}\nif (msg.field_type_additional) {\n    msg.field_additional_types = env.get('field_additional_types');\n    msg.field_types = msg.field_types.concat(msg.field_additional_types);\n}\nmsg.field_has_hidden_type = '';\nif (msg.field_types.length > 0) {\n    if (msg.field_default_type == '') {\n        msg.field_default_type = msg.field_types[0];\n    }\n    msg.field_has_hidden_type = '<input type=\"hidden\" id=\"node-input-' + env.get('field_name') + 'Type\"';\n    msg.field_has_hidden_type += 'value=\"' + msg.field_default_type + '\">';\n    msg.field_types_s = JSON.stringify(msg.field_types);\n}\nlet fc = env.get('field_columns');\nif (msg.field_label == '') {\n    fc += ' no-label';\n}\nmsg.field_columns = fc;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":150,"y":40,"wires":[["2f6d8f31aa468d9f"]]},{"id":"a0b8b4c7a26b07dd","type":"function","z":"7062e6f741533eb2","name":"edit_dialog","func":"msg.edit_dialog.push(msg.payload);\nlet theDefault = msg.field_default;\nif (msg.field_default_type != 'bool' && msg.field_default_type != 'num') {\n    theDefault = '\"' + theDefault + '\"';\n}\nlet required = '';\nif (msg.field_required) {\n    required = ', required:true';\n}\nmsg.defaults.push(msg.field_name + ': {value:' + theDefault + required + '}');\nif (msg.field_types.length > 0) {\n    msg.defaults.push(msg.field_name + 'Type: {value:\"' + msg.field_default_type + '\"}');\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":150,"y":160,"wires":[["250dcfedab51f0e5"]]},{"id":"3c2eac4c542cd18e","type":"template","z":"7062e6f741533eb2","name":"oneditprepare_template","field":"payload","fieldType":"msg","format":"javascript","syntax":"mustache","template":"            // Prepare field {{field_name}}\n            $(\"#node-input-{{field_name}}\").typedInput({\n                type: \"{{{field_default_type}}}\",\n                types: {{{field_types_s}}},\n                typeField: \"#node-input-{{field_name}}Type\"\n            });\n","output":"str","x":490,"y":40,"wires":[["67eed6e284e28123"]]},{"id":"250dcfedab51f0e5","type":"switch","z":"7062e6f741533eb2","name":"field_has_hidden_type","property":"field_has_hidden_type","propertyType":"msg","rules":[{"t":"nempty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":180,"y":220,"wires":[["11ee4d2cf1435263"],["eda19645927d3dda"]]},{"id":"67eed6e284e28123","type":"function","z":"7062e6f741533eb2","name":"oneditprepare","func":"if (!msg.hasOwnProperty('rgroup_name')) {\n    msg._oneditprepare.push(msg.payload);\n}else{\n    msg.rgroup_details.push({\n        field_name: msg.field_name,\n        field_default_type: msg.field_default_type,\n        field_types: msg.field_types,\n        field_default: msg.field_default\n    });\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":100,"wires":[[]]},{"id":"eda19645927d3dda","type":"function","z":"7062e6f741533eb2","name":"field_group","func":"if (msg.hasOwnProperty('rgroup_name')) {\n    msg.rgroup_details.push({\n        field_name: msg.field_name,\n        field_default_type: '',\n        field_types: '',\n        field_default: msg.field_default\n    });\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":260,"wires":[[]]},{"id":"11ee4d2cf1435263","type":"junction","z":"7062e6f741533eb2","x":340,"y":40,"wires":[["3c2eac4c542cd18e"]]},{"id":"65d5e45697fed99a","type":"subflow","name":"finish node","info":"A finish node marks the end of a node definition. The finish node will finalize writing all\nthe files needed to create your node; the package.json, html, javascript, and ecompassing\nproject folder within your node-red instance's node_module folder. It will also restart the\nnode-red instance if it was started using the command:\n\n``\nkill -9 `cat /tmp/node-red.pid`; nohup nice node-red > /dev/null 2>&1 & echo $! > /tmp/node-red.pid\n``\n\nThis makes ongoing development easy as you simply need to refresh the browser to see node changes\nafter you have invoked the flow.","category":"node maker","in":[{"x":40,"y":40,"wires":[{"id":"37f124c38d4954c7"}]}],"out":[{"x":1366,"y":388,"wires":[{"id":"c6236ad9a9ca73c1","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"0eb2dcf71e3bf43f","type":"template","z":"65d5e45697fed99a","name":"nodemakerhtml","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<style>\n    {{{customcss}}}\n</style>\n<script type=\"text/html\" data-template-name=\"{{node_name}}\">\n    {{{inc_node_name}}}\n    <div id=\"node-props\" style=\"width: {{row_width}}px;\">\n        {{{edit_dialog}}}\n    </div><!--node-props-->\n</script>\n\n<script type=\"text/html\" data-help-name=\"{{node_name}}\">\n    {{{helpdetails}}}\n</script>\n\n<script type=\"text/javascript\">\n    RED.nodes.registerType('{{node_name}}', {\n        category: '{{node_category}}',\n        {{#node_palettelabel.length}}\n        paletteLabel: '{{node_palettelabel}}',\n        {{/node_palettelabel.length}}        \n        color: '{{node_color}}',\n        defaults: {\n            name: {value:\"\"},\n            {{{defaults}}}\n        },\n        inputs: {{numinputs}},\n        outputs: {{numoutputs}},\n        icon: \"font-awesome/fa-{{{node_icon}}}\",\n        label: function() {\n            return this.name || \"{{node_name}}\";\n        },\n        labelStyle: function() {\n            return this.name ? \"node_label_italic\" : \"\";\n        },\n        oneditprepare: function() {\n            {{{oneditprepare}}}\n        },\n        oneditresize: function() {\n            {{{oneditresize}}}        \n        },\n        oneditsave: function() {\n            {{{oneditsave}}}\n        },\n        oneditcancel: function() {\n            {{{oneditcancel}}}\n        }\n    });\n    {{{othercode}}}\n</script>\n","output":"str","x":360,"y":200,"wires":[["1d0b5202023b245b"]]},{"id":"46fdba84593e4a18","type":"file","z":"65d5e45697fed99a","name":"write nodename/nodename.html","filename":"nodename_html","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":670,"y":220,"wires":[["d383b5c429b388bb"]]},{"id":"2a9f513d9174ccde","type":"exec","z":"65d5e45697fed99a","d":true,"command":"kill -9 `cat /tmp/node-red.pid`; nohup nice node-red > /dev/null 2>&1 & echo $! > /tmp/node-red.pid","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"restart node-red","x":200,"y":480,"wires":[["e674d758d3c14af8"],["e674d758d3c14af8"],["e674d758d3c14af8"]]},{"id":"e674d758d3c14af8","type":"debug","z":"65d5e45697fed99a","name":"debug 50","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":440,"y":480,"wires":[]},{"id":"43b6b50718414f9f","type":"template","z":"65d5e45697fed99a","name":"nodemakerjs","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"module.exports = function(RED) {\n    function {{node_name}}(config) {\n        RED.nodes.createNode(this,config);\n        var node = this;\n        {{{runtimecode}}}\n    }\n    RED.nodes.registerType('{{node_name}}', {{node_name}});\n}","output":"str","x":350,"y":320,"wires":[["8f4279aa76193d2d"]]},{"id":"8f4279aa76193d2d","type":"file","z":"65d5e45697fed99a","name":"write nodename/nodename.js","filename":"nodename_js","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":670,"y":340,"wires":[["c6236ad9a9ca73c1"]]},{"id":"fa07b8c430e2643d","type":"switch","z":"65d5e45697fed99a","name":"","property":"nodemakerhtml","propertyType":"msg","rules":[{"t":"empty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":170,"y":220,"wires":[["0eb2dcf71e3bf43f"],["987b04d149c1e6b2"]]},{"id":"987b04d149c1e6b2","type":"change","z":"65d5e45697fed99a","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"nodemakerhtml","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":240,"wires":[["1d0b5202023b245b"]]},{"id":"f26a2d19e71211be","type":"switch","z":"65d5e45697fed99a","name":"","property":"nodemakerjs","propertyType":"msg","rules":[{"t":"empty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":170,"y":340,"wires":[["43b6b50718414f9f"],["0c85d78ee708d905"]]},{"id":"0c85d78ee708d905","type":"change","z":"65d5e45697fed99a","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"nodemakerjs","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":360,"wires":[["8f4279aa76193d2d"]]},{"id":"3d44470abb3be3af","type":"function","z":"65d5e45697fed99a","name":"compose_code","func":"if (msg.hasOwnProperty('useTemplates')) return msg;\nmsg._oneditprepare.push(msg.payload);\n\nString.prototype.delRightMost = function (sFind) {\n    for (var i = this.length; i >= 0; i = i - 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(0, f);\n            break;\n        }\n    }\n    return this;\n};\nString.prototype.getRightMost = function (sFind) {\n    for (var i = this.length; i >= 0; i = i - 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(f + sFind.length, f + sFind.length + this.length);\n        }\n    }\n    return this;\n};\nString.prototype.delLeftMost = function (sFind) {\n    for (var i = 0; i < this.length; i = i + 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(f + sFind.length, f + sFind.length + this.length);\n            break;\n        }\n    }\n    return this;\n};\nString.prototype.getLeftMost = function (sFind) {\n    for (var i = 0; i < this.length; i = i + 1) {\n        var f = this.indexOf(sFind, i);\n        if (f != -1) {\n            return this.substring(0, f);\n            break;\n        }\n    }\n    return this;\n};\nvar indent = \" \".repeat(4);\nvar tabIndent = \"\";\nvar edit_dialog = \" \".repeat(8) + '<div class=\"form-row\">' + \"\\n\";\nvar cTotal = 0;\nvar nItems = 0;\nvar initTab = false;\nvar firstTabName = '';\nvar bInRGroup = false;    \nmsg.edit_dialog.forEach(function(item, index) {\n    if (item.indexOf('\"type\":\"tab_definition\"') == -1 && item.indexOf('form-row rgroup') == -1) {\n        item = item.replace(/^/gm, tabIndent);\n        item = item.replace(/^/gm, tabIndent);\n        if (bInRGroup) {\n            item = item.replace(/^/gm, \" \".repeat(4));\n        }\n    }\n    if (item.indexOf('<div class=\"form-row rgroup\"') > -1) {\n        edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">').trimEnd() + \"\\n\";\n        item += \" \".repeat(4) + '<div class=\"form-row\">' + \"\\n\";\n        item = item.replace(/^/gm, \" \".repeat(8) + tabIndent).trimEnd() + \"\\n\";\n        bInRGroup = true;\n        edit_dialog += item;\n        return;\n    }\n    if (item.indexOf('<!--form-row rgroup-->') > -1) {\n        edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">').trimEnd() + \"\\n\";\n        edit_dialog += \" \".repeat(8) + tabIndent + \"</div><!--form-row rgroup-...-template-->\\n\";\n        if (index < msg.edit_dialog.length - 1) {\n            edit_dialog += indent + indent + tabIndent + '<div class=\"form-row\">' + \"\\n\";\n        }\n        bInRGroup = false;\n        return;\n    }\n    if (item.indexOf('\"type\":\"tab_definition\"') > -1) {\n        let tab = JSON.parse(item);\n        if (initTab == false) {\n            \n            // Inject the tab row\n            let r = edit_dialog.getRightMost('<div class=\"form-row\">');\n            edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">');\n            edit_dialog += '<div class=\"form-row func-tabs-row\">' + r;\n            edit_dialog += indent + indent + indent + '<ul style=\"min-width: 600px; margin-bottom: 20px;\" id=\"func-tabs\"></ul>' + \"\\n\";\n            edit_dialog += indent + indent + \"</div><!--func-tabs-row-->\\n\";\n            edit_dialog += indent + indent + '<div id=\"func-tabs-content\" style=\"min-height: calc(100% - 95px);\">' + \"\\n\";\n\n            // Start first tab\n            edit_dialog += indent + indent + indent + '<div id=\"func-tab-' + tab.name + '\" style=\"display:none\">' + \"\\n\";\n            edit_dialog += indent + indent + indent + indent + '<div class=\"form-row\">' + \"\\n\";\n            tabIndent = \" \".repeat(8);\n\n            // Init tab system\n            let code = \"// Prepare tab system\\n\";\n            code += \"var tabs = RED.tabs.create({\\n\";\n            code += \"    id: 'func-tabs',\\n\";\n            code += \"    onchange: function(tab) {\\n\";\n            code += \"        $('#func-tabs-content').children().hide();\\n\";\n            code += \"        $('#' + tab.id).show();\\n\";\n            code += \"    }\\n\";\n            code += \"});\\n\\n\";\n\n            // Add first tab code\n            code += \"// Add first tab, \" + tab.name + \"\\n\";\n            code += \"tabs.addTab({\\n\";\n            code += \"    id: 'func-tab-\" + tab.name + \"',\\n\";\n            code += \"    iconClass: 'fa fa-\" + tab.icon + \"',\\n\";\n            code += \"    label: '\" + tab.label + \"'\\n\";\n            code += \"});\\n\\n\";\n            firstTabName = tab.name;\n            code = code.replace(/^/gm, \" \".repeat(12));\n            msg._oneditprepare.push(code);\n            initTab = true;\n        }else{\n\n            // Add subsequent tabs \n            let r = edit_dialog.getRightMost('    <div class=\"form-row\"');\n            edit_dialog = edit_dialog.delRightMost('    <div class=\"form-row\"');\n            edit_dialog += \"</div><!--func-tab-tab#-->\\n\"; // close out last tab\n            edit_dialog += \" \".repeat(12) + '<div id=\"func-tab-' + tab.name + '\" style=\"display:none\">' + \"\\n\";\n            edit_dialog += \" \".repeat(16) + '<div class=\"form-row\"' + r;\n\n            // Add additional tab code\n            let code = \"// Add tab, \" + tab.name + \"\\n\";            \n            code += \"tabs.addTab({\\n\";\n            code += \"    id: 'func-tab-\" + tab.name + \"',\\n\";\n            code += \"    iconClass: 'fa fa-\" + tab.icon + \"',\\n\";\n            code += \"    label: '\" + tab.label + \"'\\n\";\n            code += \"});\\n\\n\";\n            code = code.replace(/^/gm, \" \".repeat(12));\n            msg._oneditprepare.push(code);\n        }        \n    }else{\n        if (tabIndent == '') {\n            item = item.replace(/^/gm, indent + indent + indent);\n        }else{\n            item = item.replace(/^/gm, indent);\n        }\n        let c = item.delLeftMost('col-').getLeftMost('\"').getLeftMost(' ');\n        cTotal += Number(c);\n        if (cTotal >= 83) {\n            let m = 5 * nItems;\n            if (m > 0) {\n                item = item.replace(\n                    'class=\"col ',\n                    'style=\"margin-right:-' + m.toString() + 'px;\" class=\"col '\n                );\n            }\n            if (nItems == 3) {\n                let r = edit_dialog.getRightMost('<div class=\"form-row\">');\n                edit_dialog = edit_dialog.delRightMost('<div class=\"form-row\">');\n                edit_dialog += '<div class=\"form-row\" style=\"margin-right:10px;\">' + r;\n            }\n            edit_dialog += item + \"\\n\";\n            if (index < msg.edit_dialog.length - 1) {\n                if (bInRGroup) {\n                    edit_dialog += \" \".repeat(4);\n                }\n                edit_dialog += indent + indent + tabIndent + \"</div><!--form-row-->\\n\";\n                edit_dialog += indent + indent + tabIndent + '<div class=\"form-row\">' + \"\\n\";\n                cTotal = 0;\n                nItems = 0;\n            }\n        } else {\n            edit_dialog += item + \"\\n\";\n            nItems++;\n        }\n    }\n});\nif (initTab) { \n    edit_dialog += \" \".repeat(16) + \"</div><!--form-row-->\\n\";\n    edit_dialog += \" \".repeat(12) + \"</div><!--func-tab-tab#-->\\n\";\n    edit_dialog += \" \".repeat(8) + \"</div><!--func-tabs-content-->\";\n\n    // Activate the first tab if present\n    let code = \" \".repeat(12) + 'tabs.activateTab(\"func-tab-' + firstTabName + '\");' + \"\\n\";\n    msg._oneditprepare.push(code);\n}else{\n    edit_dialog += \" \".repeat(8) + \"</div><!--form-row-->\";\n}\nmsg.edit_dialog = edit_dialog;\n\nlet defaults = '';\nmsg.defaults.forEach(function(item, index) {\n    defaults += \"            \" + item;\n    if (index < msg.defaults.length -1) {\n        defaults += \",\\n\";\n    }else{\n        defaults += \"\\n\";\n    }\n});\nmsg.defaults = defaults;\nmsg.oneditprepare = \"\\n\" + msg._oneditprepare.join(\"\\n\");\nmsg.oneditresize = \"\\n\" + msg._oneditresize.join(\"\\n\");\nmsg.oneditsave = \"\\n\" + msg._oneditsave.join(\"\\n\");\nmsg.oneditcancel = \"\\n\" + msg._oneditcancel.join(\"\\n\");\nmsg.defaults = msg.defaults.slice(0, -1);\nvar othercode = \"\";\nfor (var key in msg._othercode) {\n    var value = msg._othercode[key];\n    othercode += value;\n}\nmsg.othercode = \"\\n\" + othercode;\nmsg.runtimecode = \"\\n\" + msg.runtimecode.replace(/^/gm, \"    \".repeat(4));\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":100,"wires":[["fa07b8c430e2643d"]]},{"id":"37f124c38d4954c7","type":"template","z":"65d5e45697fed99a","name":"re-size fix","field":"payload","fieldType":"msg","format":"javascript","syntax":"mustache","template":"            // Allow dynamic re-size after init. appearance \n            setTimeout(function () {\n                $('#node-props').css('width', '100%');\n            }, 30);","output":"str","x":200,"y":40,"wires":[["3d44470abb3be3af"]]},{"id":"e014f3683d9dec74","type":"exec","z":"65d5e45697fed99a","command":"service nodered restart","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"restart node-red using service","x":265,"y":602,"wires":[["672c1d8baa93fe1c"],["672c1d8baa93fe1c"],["672c1d8baa93fe1c"]]},{"id":"672c1d8baa93fe1c","type":"debug","z":"65d5e45697fed99a","name":"debug 51","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":556,"y":602,"wires":[]},{"id":"d383b5c429b388bb","type":"change","z":"65d5e45697fed99a","name":"","rules":[{"t":"set","p":"nodeHtmlContent","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":963,"y":220,"wires":[["f26a2d19e71211be"]]},{"id":"c6236ad9a9ca73c1","type":"change","z":"65d5e45697fed99a","name":"","rules":[{"t":"set","p":"nodeJsContent","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":339,"wires":[["e014f3683d9dec74","2a9f513d9174ccde"]]},{"id":"1d0b5202023b245b","type":"junction","z":"65d5e45697fed99a","x":500,"y":220,"wires":[["46fdba84593e4a18"]]},{"id":"85e13a6e48f6a1c3","type":"subflow","name":"start node","info":"The start node marks the beginning of a new node defintion. To create a node,\nconnect an inject node to the start node and connect the start node to a \nfinish node. You may wire various other nodes between the start and finish\nnodes to define your node's user interface.\n\nThe following properties can be configured in the properties panel:\n\n* Node Name - choose a JavaScript variable safe name for your node.\n* Version - A valid version string in the form of major, minor, patch i.e. 1.0.0\n* Description - a short description of your node.\n* Category - The palette group the node will appear under; existing i.e. common or you can define your own.\n* Icon - An existing fontawesome name, sans the 'font-awesome/fa-' prefix; i.e. bathtub\n* Color - The color of the node as it appears in the palette and editor. I.e. #E2D96E\n* Keywords - Used in the package.json file for reference and indexing by npm.\n* Author Name - The name of the node author. Used in package.json\n* Author Email - The email of the node author. Used in package.json\n* GitHub Handle - The handle used for the GitHub repo URL, I.e. john will appears as https://github.com/john/node-name\n* Max Row Width - The initial width of the property dialog (in pixels) when it is first opened.\n* Inputs - Whether the node accepts an input or not; 1 or 0 our the only acceptable values.\n* Outputs - The number of outputs the node will have.\n* Include node name... - Determines if a default name field will appear at the top of the property window; appears above any tab or other input fields.\n","category":"node maker","in":[{"x":40,"y":40,"wires":[{"id":"729874432b3551f1"}]}],"out":[{"x":740,"y":200,"wires":[{"id":"1d506b65823c19c3","port":0}]}],"env":[{"name":"node_name","type":"str","value":"","ui":{"label":{"en-US":"Node Name"},"type":"input","opts":{"types":["str"]}}},{"name":"node_version","type":"str","value":"0.0.1","ui":{"label":{"en-US":"Version"},"type":"input","opts":{"types":["str"]}}},{"name":"node_description","type":"str","value":"","ui":{"label":{"en-US":"Description"},"type":"input","opts":{"types":["str"]}}},{"name":"node_category","type":"str","value":"","ui":{"label":{"en-US":"Category"},"type":"input","opts":{"types":["str"]}}},{"name":"node_palettelabel","type":"str","value":"","ui":{"label":{"en-US":"Palette Label"},"type":"input","opts":{"types":["str"]}}},{"name":"node_icon","type":"str","value":"","ui":{"label":{"en-US":"Icon"},"type":"input","opts":{"types":["str"]}}},{"name":"node_color","type":"str","value":"","ui":{"label":{"en-US":"Color"},"type":"input","opts":{"types":["str"]}}},{"name":"keywords","type":"str","value":"","ui":{"label":{"en-US":"Keywords"},"type":"input","opts":{"types":["str"]}}},{"name":"author_name","type":"str","value":"","ui":{"label":{"en-US":"Author Name"},"type":"input","opts":{"types":["str"]}}},{"name":"author_email","type":"str","value":"","ui":{"label":{"en-US":"Author Email"}}},{"name":"github_handle","type":"str","value":"","ui":{"label":{"en-US":"GitHub Handle"},"type":"input","opts":{"types":["str"]}}},{"name":"row_width","type":"num","value":"460","ui":{"label":{"en-US":"Max Row Width"},"type":"input","opts":{"types":["num"]}}},{"name":"numinputs","type":"num","value":"1","ui":{"label":{"en-US":"Inputs"},"type":"spinner","opts":{"min":0,"max":1}}},{"name":"numoutputs","type":"num","value":"1","ui":{"label":{"en-US":"Outputs"},"type":"spinner"}},{"name":"inc_node_name","type":"bool","value":"true","ui":{"label":{"en-US":"Include node name field at the top"},"type":"checkbox"}}],"meta":{},"color":"#DDAA99"},{"id":"729874432b3551f1","type":"function","z":"85e13a6e48f6a1c3","name":"start_node","func":"msg.node_name = env.get('node_name');\n\n/* crash and burn if name not defined */\nif (!msg.node_name || msg.node_name==\"\") {\n    node.error((\"node name not given\"), msg);\n    return\n}\n\nmsg.node_version = env.get('node_version');\nmsg.node_description = env.get('node_description');\nmsg.node_folder = env.get('HOME') + '/.node-red/node_modules/node-red-' + msg.node_name + '/';\nlet k = env.get('keywords');\nk = '\"' + k.replaceAll(' ', '').replaceAll(',', '\",\"') + '\"';\nmsg.node_category = env.get('node_category');\nmsg.node_palettelabel = env.get('node_palettelabel');\nmsg.node_icon = env.get('node_icon');\nmsg.node_color = env.get('node_color');\nmsg.keywords = k;\nmsg.author_name = env.get('author_name');\nmsg.author_email = env.get('author_email');\nmsg.github_handle = env.get('github_handle');\nmsg.package_json = msg.node_folder + 'package.json';\nmsg.gitignore = msg.node_folder + '.gitignore';\nmsg.license = msg.node_folder + 'LICENSE';\nmsg.readme = msg.node_folder + 'README.md';\nmsg.nodename_js = msg.node_folder + msg.node_name + '/' + msg.node_name + '.js';\nmsg.nodename_html = msg.node_folder + msg.node_name + '/' + msg.node_name + '.html';\nmsg.edit_dialog = [];\nmsg._oneditprepare = [];\nmsg._oneditresize = [];\nmsg._oneditsave = [];\nmsg._oneditcancel = [];\nmsg._othercode = {};\nmsg.defaults = [];\nmsg.row_width = env.get('row_width');\nmsg.numinputs = env.get('numinputs');\nmsg.numoutputs = env.get('numoutputs');\nmsg.inc_node_name = env.get('inc_node_name');\nmsg.nodemakerhtml = '';\nmsg.nodemakerjs = '';\nmsg.runtimecode = '';\nif (msg.inc_node_name) {\n    msg.inc_node_name = '    <div class=\"form-row\">' +\"\\n\";\n    msg.inc_node_name += '        <label for=\"node-input-name\"><i class=\"icon-tag\"></i> Name</label>' + \"\\n\";\n    msg.inc_node_name += '        <input type=\"text\" id=\"node-input-name\" placeholder=\"Name\">' + \"\\n\";\n    msg.inc_node_name += \"    </div>\";\n}else{\n    msg.inc_node_name = '';\n}\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":150,"y":40,"wires":[["1a9cbb92df9f9927","4dc54964fd7d8d7b","a79e8a6b35ceac10","4eaf4f130e10c617","1d506b65823c19c3"]]},{"id":"1a9cbb92df9f9927","type":"template","z":"85e13a6e48f6a1c3","name":"package.json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n    \"name\": \"node-red-{{node_name}}\",\n    \"version\": \"{{node_version}}\",\n    \"description\": \"A node that merges msg objects until all defined properties are present / conditions met before passing the combined msg along.\",\n    \"author\": \"{{author_name}} <{{author_email}}>\",\n    \"license\": \"MIT\",\n    \"keywords\": [{{{keywords}}}],\n    \"repository\": {\n      \"type\": \"git\",\n      \"url\": \"https://github.com/{{github_handle}}/node-red-{{node_name}}.git\"\n    },\n    \"dependencies\": {\n    },\n    \"node-red\": {\n      \"nodes\": {\n        \"{{node_name}}\": \"{{node_name}}/{{node_name}}.js\"\n      }\n    }\n  }\n  ","output":"str","x":380,"y":40,"wires":[["e164bb1b88912998"]]},{"id":"e164bb1b88912998","type":"file","z":"85e13a6e48f6a1c3","name":"write package.json","filename":"package_json","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":570,"y":40,"wires":[[]]},{"id":"4dc54964fd7d8d7b","type":"template","z":"85e13a6e48f6a1c3","name":".gitignore","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":".DS_Store\nnode_modules\n","output":"str","x":360,"y":80,"wires":[["c2f33b913e572b75"]]},{"id":"c2f33b913e572b75","type":"file","z":"85e13a6e48f6a1c3","name":"write .gitignore","filename":"gitignore","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":560,"y":80,"wires":[[]]},{"id":"a79e8a6b35ceac10","type":"template","z":"85e13a6e48f6a1c3","name":"MIT License","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"MIT License\n\nCopyright (c) 2022 {{author_name}}\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n","output":"str","x":370,"y":120,"wires":[["6846859d76b0ec5e"]]},{"id":"6846859d76b0ec5e","type":"file","z":"85e13a6e48f6a1c3","name":"write LICENSE","filename":"license","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":560,"y":120,"wires":[[]]},{"id":"4eaf4f130e10c617","type":"template","z":"85e13a6e48f6a1c3","name":"README.md","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"# node-red-{{node_name}}\n{{{node_description}}}\n","output":"str","x":370,"y":160,"wires":[["7631ff7c6efd5ad8"]]},{"id":"7631ff7c6efd5ad8","type":"file","z":"85e13a6e48f6a1c3","name":"write README.md","filename":"readme","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":570,"y":160,"wires":[[]]},{"id":"1d506b65823c19c3","type":"template","z":"85e13a6e48f6a1c3","name":"customcss","field":"customcss","fieldType":"msg","format":"css","syntax":"mustache","template":".red-ui-tray-content #dialog-form {\n    white-space:nowrap;\n}\n.full-row .red-ui-typedInput-container {\n    min-width: 70%;\n}\n.col input {\n    min-width: 100%;\n}\n.sml-lbl {\n    height: 66px;\n}\n.sml-lbl label {\n    font-size: smaller;\n    margin-bottom: 0px;\n    display: block!important;\n}\n.reg-lbl label {\n    white-space: nowrap;\n    margin-top: 5px;\n    height: 0px;\n}\n.red-ui-editor .form-row label.full-lbl {\n    white-space: normal;\n    width: 100%;\n}\n.col {\n    float: left;\n    margin-right: 5px;\n    min-height: 36px;\n}\n.col .red-ui-typedInput-container {\n    width: 100%!important;\n}\n.col-50 {\n    width: 50%;\n}\n.col-33 {\n    width: 33%;\n}\n.col-66 {\n    width: 66%;\n}\n.col-25 {\n    width: 25%;\n}\n.col-75 {\n    width: 75%;\n}\n.col-100 .red-ui-typedInput-container {\n    width: 70%!important;\n}\n.col-100.no-label .red-ui-typedInput-container {\n    width: 100%!important;\n}\n.txtarea {\n    padding-bottom: 26px;\n}\n.txtarea label {\n    vertical-align: top;\n    margin-top: 3px;\n}\n.txtarea  textarea {\n    width: 70%;\n    margin-bottom: -28px!important;\n}\n.btn-regular {\n    margin-bottom: 14px!important;\n}\n.red-ui-editableList-item-content {\n    display: inline-block;\n    margin-bottom: -6px;\n    width: -moz-available;\n    width: -webkit-fill-available;\n    width: fill-available;\n}\n.red-ui-editableList-item-content .sml-lbl {\n    height: auto;\n}\n","output":"str","x":370,"y":200,"wires":[[]]},{"id":"2c6bf243745407b7","type":"tab","label":"[node-maker] how to create 2 tabs and 2 buttons","disabled":false,"info":"### Description\n\nFlow I used to create a tab interface for my sidebar nodes. Now instead of two sidebar tabs, one sidebar tab with two tabs.\n\nNote this flow makes use of the [nodedev](https://flows.nodered.org/node/@gregoriusrippenstein/node-red-contrib-nodedev) node package to create two `PkgFile` nodes for integration into a node package developed in Node-RED.\n\n","env":[]},{"id":"0b4ce2886c2cc444","type":"group","z":"2c6bf243745407b7","name":"generated nodes","style":{"label":true},"nodes":["89280d3e8f65637e","6815280b72762ac5"],"x":1491,"y":610,"w":212,"h":132},{"id":"83527d8520412259","type":"ClientCode","z":"2c6bf243745407b7","name":"Open import dialog","clientcode":"function doIt() {\n  var content = payload.flowContent;\n\n  if (payload.removeduplicates) {\n    content = content.filter((elem) => {\n      return RED.nodes.node(elem.id) == undefined\n    });\n  }\n\n  if (content.length == 0) {\n    RED.notify(\"No new content\", {\n      type: \"ok\",\n      id: \"TriggerImport\",\n      timeout: 2000\n    });\n    return;\n  }\n  RED.clipboard.import();\n\n  setTimeout(() => {\n    $('#red-ui-clipboard-dialog-import-text').val(\n      JSON.stringify(content)\n    ).trigger(\"paste\");\n\n    if (payload.autoimport) {\n      setTimeout(() => {\n        $('#red-ui-clipboard-dialog-ok').trigger('click');\n      }, 435);\n    }\n  }, 300);\n};\n\ndoIt();\n","format":"javascript","x":1592,"y":1100,"wires":[[]]},{"id":"051a4ee5cc377a93","type":"inject","z":"2c6bf243745407b7","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":309,"y":371,"wires":[["5b2471c9b8109a3d"]]},{"id":"5b2471c9b8109a3d","type":"subflow:85e13a6e48f6a1c3","z":"2c6bf243745407b7","name":"","env":[{"name":"node_name","value":"example","type":"str"},{"name":"node_description","value":"An example node","type":"str"},{"name":"node_category","value":"common","type":"str"},{"name":"node_palettelabel","value":"Example","type":"str"},{"name":"node_icon","value":"globe","type":"str"},{"name":"node_color","value":"#E2D96E","type":"str"},{"name":"keywords","value":"example","type":"str"},{"name":"author_name","value":"Armand Goldman","type":"str"},{"name":"author_email","value":"agoldman@dev.cc","type":"str"},{"name":"github_handle","value":"armandgoldman","type":"str"},{"name":"node_paletelabel","value":"Examplesdsa","type":"str"}],"x":519,"y":371,"wires":[["4778ff8fca882ebb"]]},{"id":"6d5ae1a3bdefbaf8","type":"subflow:65d5e45697fed99a","z":"2c6bf243745407b7","name":"","x":771,"y":858,"wires":[["da3854dd09afe32a"]]},{"id":"4778ff8fca882ebb","type":"subflow:7062e6f741533eb2","z":"2c6bf243745407b7","name":"","env":[{"name":"field_name","value":"test","type":"str"},{"name":"field_label","value":"Test","type":"str"},{"name":"field_icon","value":"globe","type":"str"},{"name":"field_type_string","type":"bool","value":"true"},{"name":"field_default_type","value":"str","type":"str"}],"x":720,"y":374,"wires":[["411067fadab395fa"]]},{"id":"d93735776fae9ca4","type":"template","z":"2c6bf243745407b7","name":"runtimecode","field":"runtimecode","fieldType":"msg","format":"javascript","syntax":"mustache","template":"node.on('input', function(msg) {\n    msg.payload = \"{{node_name}}\";\n    node.send(msg);\n});","output":"str","x":774,"y":810,"wires":[["6d5ae1a3bdefbaf8"]]},{"id":"65ed5cea0aee3be9","type":"subflow:9771d13dd19bf60f","z":"2c6bf243745407b7","name":"","x":788,"y":760,"wires":[["d93735776fae9ca4"]]},{"id":"da3854dd09afe32a","type":"template","z":"2c6bf243745407b7","name":"create a flow with two PkgFile nodes","field":"nodeInputTemplate","fieldType":"msg","format":"json","syntax":"mustache","template":"[\n{\n                \"type\": \"PkgFile\",\n                \"name\": \"{{ node_name }}.js\",\n                \"filename\": \"nodes/{{ node_name }}.js\",\n                \"template\": \"\",\n                \"syntax\": \"mustache\",\n                \"format\": \"javascript\",\n                \"output\": \"str\",\n                \"x\": 100,\n                \"y\": 50,\n                \"wires\": [[]]\n},\n{\n                \"type\": \"PkgFile\",\n                \"name\": \"{{ node_name }}.html\",\n                \"filename\": \"nodes/{{ node_name }}.html\",\n                \"template\": \"\",\n                \"syntax\": \"mustache\",\n                \"format\": \"html\",\n                \"output\": \"str\",\n                \"x\": 100,\n                \"y\": 100,\n                \"wires\": [[]]\n}\n]","output":"json","x":1193,"y":862,"wires":[["24eaaebbd35631c6"]]},{"id":"24eaaebbd35631c6","type":"function","z":"2c6bf243745407b7","name":"fill json template with templates generated by node-maker","func":"msg.nodeInputTemplate[0][\"id\"] = RED.util.generateId();\nmsg.nodeInputTemplate[1][\"id\"] = RED.util.generateId();\n\nmsg.nodeInputTemplate[1].template = msg.nodeHtmlContent;\nmsg.nodeInputTemplate[0].template = msg.nodeJsContent;\n\nmsg.payload = {\n    flowContent: msg.nodeInputTemplate\n}\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1368,"y":956,"wires":[["83527d8520412259"]]},{"id":"411067fadab395fa","type":"subflow:7d1e49e9a2f7337a","z":"2c6bf243745407b7","name":"","env":[{"name":"tab_name","value":"compare","type":"str"},{"name":"tab_label","value":"Compare","type":"str"},{"name":"tab_icon","value":"balance-scale","type":"str"}],"x":785,"y":424,"wires":[["5b35b3193d836c7a"]]},{"id":"5b35b3193d836c7a","type":"subflow:c70964ba34544694","z":"2c6bf243745407b7","name":"","env":[{"name":"field_name","value":"comparebut","type":"str"},{"name":"field_label","value":"Compare","type":"str"},{"name":"field_icon","value":"map-signs","type":"str"},{"name":"button_size","value":"red-ui-button btn-regular","type":"str"}],"x":876,"y":493,"wires":[["b2d38cb1974728b4"]]},{"id":"b2d38cb1974728b4","type":"subflow:7d1e49e9a2f7337a","z":"2c6bf243745407b7","name":"","env":[{"name":"tab_name","value":"push","type":"str"},{"name":"tab_label","value":"Push","type":"str"},{"name":"tab_icon","value":"share-square-o","type":"str"}],"x":945,"y":569,"wires":[["4b19418268f30a5c"]]},{"id":"4b19418268f30a5c","type":"subflow:c70964ba34544694","z":"2c6bf243745407b7","name":"","env":[{"name":"field_columns","value":"col col-50","type":"str"},{"name":"field_name","value":"pushbut","type":"str"},{"name":"field_label","value":"Push","type":"str"},{"name":"field_icon","value":"rocket","type":"str"},{"name":"button_size","value":"red-ui-button btn-regular","type":"str"}],"x":1035,"y":646,"wires":[["65ed5cea0aee3be9"]]},{"id":"89280d3e8f65637e","type":"PkgFile","z":"2c6bf243745407b7","g":"0b4ce2886c2cc444","name":"example.js","filename":"nodes/example.js","format":"javascript","syntax":"mustache","template":"module.exports = function(RED) {\n    function example(config) {\n        RED.nodes.createNode(this,config);\n        var node = this;\n        node.on('input', function(msg) {\n    msg.payload = \"example\";\n    node.send(msg);\n});\n    }\n    RED.nodes.registerType('example', example);\n}","output":"str","x":1597,"y":651,"wires":[[]]},{"id":"6815280b72762ac5","type":"PkgFile","z":"2c6bf243745407b7","g":"0b4ce2886c2cc444","name":"example.html","filename":"nodes/example.html","format":"html","syntax":"mustache","template":"<style>\n    .red-ui-tray-content #dialog-form {\n    white-space:nowrap;\n}\n.full-row .red-ui-typedInput-container {\n    min-width: 70%;\n}\n.col input {\n    min-width: 100%;\n}\n.sml-lbl {\n    height: 66px;\n}\n.sml-lbl label {\n    font-size: smaller;\n    margin-bottom: 0px;\n    display: block!important;\n}\n.reg-lbl label {\n    white-space: nowrap;\n    margin-top: 5px;\n    height: 0px;\n}\n.red-ui-editor .form-row label.full-lbl {\n    white-space: normal;\n    width: 100%;\n}\n.col {\n    float: left;\n    margin-right: 5px;\n    min-height: 36px;\n}\n.col .red-ui-typedInput-container {\n    width: 100%!important;\n}\n.col-50 {\n    width: 50%;\n}\n.col-33 {\n    width: 33%;\n}\n.col-66 {\n    width: 66%;\n}\n.col-25 {\n    width: 25%;\n}\n.col-75 {\n    width: 75%;\n}\n.col-100 .red-ui-typedInput-container {\n    width: 70%!important;\n}\n.col-100.no-label .red-ui-typedInput-container {\n    width: 100%!important;\n}\n.txtarea {\n    padding-bottom: 26px;\n}\n.txtarea label {\n    vertical-align: top;\n    margin-top: 3px;\n}\n.txtarea  textarea {\n    width: 70%;\n    margin-bottom: -28px!important;\n}\n.btn-regular {\n    margin-bottom: 14px!important;\n}\n.red-ui-editableList-item-content {\n    display: inline-block;\n    margin-bottom: -6px;\n    width: -moz-available;\n    width: -webkit-fill-available;\n    width: fill-available;\n}\n.red-ui-editableList-item-content .sml-lbl {\n    height: auto;\n}\n\n</style>\n<script type=\"text/html\" data-template-name=\"example\">\n        <div class=\"form-row\">\n        <label for=\"node-input-name\"><i class=\"icon-tag\"></i> Name</label>\n        <input type=\"text\" id=\"node-input-name\" placeholder=\"Name\">\n    </div>\n    <div id=\"node-props\" style=\"width: 460px;\">\n                <div class=\"form-row\">\n            <div class=\"col-100\">\n                <label for=\"node-input-test\"><i class=\"fa fa-globe\"></i> Test</label>\n                <input type=\"text\" id=\"node-input-test\" placeholder=\"\">\n                <input type=\"hidden\" id=\"node-input-testType\"value=\"str\">\n            </div><!--col-->\n        </div><!--form-row-->\n        <div class=\"form-row func-tabs-row\">\n            <ul style=\"min-width: 600px; margin-bottom: 20px;\" id=\"func-tabs\"></ul>\n        </div><!--func-tabs-row-->\n        <div id=\"func-tabs-content\" style=\"min-height: calc(100% - 95px);\">\n            <div id=\"func-tab-compare\" style=\"display:none\">\n                <div class=\"form-row\">\n                    <div class=\"col-100\">\n\n                        <div class=\"form-row\" style=\"margin-left: 10px; margin-top: 30px;\">\n                            <button id=\"node-input-flowhubdiff-compare-btn\"\n                                       class=\"red-ui-button\">Compare to Remote Flow</button>\n                            <a id=\"flowhubdiff-view-flow-link\" style=\"color: blue; display: none; margin-left: 40px;\" target=\"_blank\"\n                                href=\"\">View Flow <i class=\"fa fa-external-link\"></i></a>\n                        </div>\n                        \n                        <div class=\"form-row node-input-target-row node-input-target-list-row\"\n                            style=\"min-height: 100px; margin-left: 10px; margin-right: 15px;\">\n                            <div style=\"margin-right: 15px; margin-bottom: 5px; width: 35%; padding-left: 60%;\">\n                                <input type=\"text\" id=\"node-input-flowhubdiff-target-filter\" style=\"display: none;\">\n                            </div>\n                        \n                            <div id=\"node-input-flowhubdiff-target-container-div\" style=\"min-height: 100px\"></div>\n                        </div>\n                        \n                        <div class=\"form-row\" style=\"min-height: 300px; margin-left: 10px; margin-right: 15px;\">\n                            <div id=\"node-input-flowhubdiff-svgcontainer\"></div>\n                        </div>\n                        \n                        <div class=\"form-row\" style=\"min-height: 100px; margin-left: 10px; margin-right: 15px;\">\n                            <div id=\"node-input-flowhubdiff-diffcontainer\" class=\"diff-viewer\"></div>\n                        </div>\n\n                        <button id=\"btn_comparebut\" type=\"button\" class=\"red-ui-button btn-regular\"><i class=\"fa fa-map-signs\"></i> Compare</button>\n                    </div>\n                </div><!--form-row-->\n            </div><!--func-tab-tab#-->\n            <div id=\"func-tab-push\" style=\"display:none\">\n                <div class=\"form-row\">\n                    <div class=\"col-100\">\n                        <button id=\"btn_pushbut\" type=\"button\" class=\"red-ui-button btn-regular\"><i class=\"fa fa-rocket\"></i> Push</button>\n                    </div>\n                </div><!--form-row-->\n            </div><!--func-tab-tab#-->\n        </div><!--func-tabs-content-->\n    </div><!--node-props-->\n</script>\n\n<script type=\"text/html\" data-help-name=\"example\">\n    \n</script>\n\n<script type=\"text/javascript\">\n    RED.nodes.registerType('example', {\n        category: 'common',\n        paletteLabel: 'Example',\n        color: '#E2D96E',\n        defaults: {\n            name: {value:\"\"},\n                        test: {value:\"\"},\n            testType: {value:\"str\"}\n        },\n        inputs: 1,\n        outputs: 1,\n        icon: \"font-awesome/fa-globe\",\n        label: function() {\n            return this.name || \"example\";\n        },\n        labelStyle: function() {\n            return this.name ? \"node_label_italic\" : \"\";\n        },\n        oneditprepare: function() {\n            \n            // Prepare field test\n            $(\"#node-input-test\").typedInput({\n                type: \"str\",\n                types: [\"str\"],\n                typeField: \"#node-input-testType\"\n            });\n\n            // Allow dynamic re-size after init. appearance \n            setTimeout(function () {\n                $('#node-props').css('width', '100%');\n            }, 30);\n            // Prepare tab system\n            var tabs = RED.tabs.create({\n                id: 'func-tabs',\n                onchange: function(tab) {\n                    $('#func-tabs-content').children().hide();\n                    $('#' + tab.id).show();\n                }\n            });\n            \n            // Add first tab, compare\n            tabs.addTab({\n                id: 'func-tab-compare',\n                iconClass: 'fa fa-balance-scale',\n                label: 'Compare'\n            });\n            \n            \n            // Add tab, push\n            tabs.addTab({\n                id: 'func-tab-push',\n                iconClass: 'fa fa-share-square-o',\n                label: 'Push'\n            });\n            \n            \n            tabs.activateTab(\"func-tab-compare\");\n\n        },\n        oneditresize: function() {\n            \n        \n        },\n        oneditsave: function() {\n            \n\n        },\n        oneditcancel: function() {\n            \n\n        }\n    });\n    \n\n</script>\n","output":"str","x":1597,"y":701,"wires":[[]]},{"id":"93344ad33c0ea5de","type":"exec","z":"2c6bf243745407b7","command":"service nodered restart","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"restart node-red using service","x":1456,"y":197,"wires":[["ef6f154f60f848d7"],["ef6f154f60f848d7"],["ef6f154f60f848d7"]]},{"id":"ef6f154f60f848d7","type":"debug","z":"2c6bf243745407b7","name":"debug 52","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1753,"y":283,"wires":[]},{"id":"acfbebb264914999","type":"inject","z":"2c6bf243745407b7","name":"DON'T PRESS HERE - WILL RESTART YOUR NODE RED INSTANCE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1017,"y":91,"wires":[["93344ad33c0ea5de"]]}]