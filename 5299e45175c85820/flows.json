[{"id":"5299e45175c85820","type":"tab","label":"[sound] Jingle Bells","disabled":false,"info":"### Jingle Bells\n\n### Resources\n\n- https://mypianonotes.com/jingle-bells\n- https://muted.io/note-frequencies/\n- https://pages.mtu.edu/~suits/notefreqs.html\n","env":[]},{"id":"f58af9210907988f","type":"group","z":"5299e45175c85820","name":"notes","style":{"label":true},"nodes":["d0eebad3f769f635","0fd29409312c83d6","0781f9c6c765979e","fb21eee8145496b3","d7ae533a02b847bf"],"x":2028,"y":464,"w":235,"h":290},{"id":"9a363ed6c020f9b1","type":"group","z":"5299e45175c85820","name":"Merry Xmas - Press Play","style":{"fill":"#e3f3d3","label":true},"nodes":["6671dddf8779f1b9"],"x":3479,"y":44.66666793823242,"w":212,"h":82},{"id":"38e715fc6b57fc18","type":"group","z":"5299e45175c85820","name":"Jingle Bells","style":{"label":true},"nodes":["1019c17f078283d9","d7349b2cad374ac5","0f0a4be83ab872c1","6ec75666ddeb78e3","7eba9f1c26239a18","d0819d41f9b53790","d35f13412ac52d69","cfa4ecf262309330"],"x":3908.00048828125,"y":139.99998474121094,"w":639.99951171875,"h":359.3333282470703},{"id":"19a4e06f97f3aba6","type":"group","z":"5299e45175c85820","name":"Jingle Bells","style":{"label":true},"nodes":["1f4b5aba174bfb62","4722a513dd8e2377","be5f87229cd1369c","f027a94d61c3e836","54cc6a7bc39e74c8","5111bc5d0e9eef99","33d820653f9f1f28","f9d9bb5a2736d5b3","33ef28cb16312419","c47846ae731480b4","333b55d47a23144d"],"x":4791.666069030762,"y":164.66665649414062,"w":709.0004348754883,"h":444.6667251586914},{"id":"88be68b12d42ec80","type":"group","z":"5299e45175c85820","name":"Jingle All The Way","style":{"label":true},"nodes":["a3e53480160f9790","74a4b7194d660ee9","0fb4299185a6e16e","c25dab8b39f99e61","b049b1e5f36aa8f7","9afda5460e77fda4","20b6f24b5301dd52","9c8c78b7d9947dd5","fb1d638e2217bec6","8b53fa707baa0183","c4e6557a328bc519","a3879a486f5895f1","ee68679ee033e21d","3537a1abbc19d879","ac624d5afb354918"],"x":5641.666748046875,"y":151.33331298828125,"w":604.999755859375,"h":596.6666984558105},{"id":"7d8906144b43976d","type":"group","z":"5299e45175c85820","name":"Oh What Fun It Is To Ride","style":{"label":true},"nodes":["d9d72db54946e21e","74e75694f679bf6f","0b3bedcd215bbda7","b19db705bf174de9","c8c82b50b71e3bd2","bb1708a97b270fc9","05858bcf67e55f5d","d0c9f2123299338c","e9ce5966d53cf18d","6b67d059989eccc0","958e4845fe9dee73","dad72ed9abd29a99","4bb73c58621be583","dabbc61503445ee6","fbdb1f74f88edb06","ac6401877494f22d","b59d17a05b397013","05ab9b896a6a7169","c01d2bd5c79650e5"],"x":6350,"y":105.99996948242188,"w":750.33349609375,"h":772.6666984558105},{"id":"dea36c8c708a6730","type":"group","z":"5299e45175c85820","name":"play note","style":{"label":true},"nodes":["4773fb82bbdec24e","121e10d026852b77","05c93b8a0b0d60df","78a40a7daa0f1514"],"x":3500,"y":207,"w":173,"h":260},{"id":"d0eebad3f769f635","type":"change","z":"5299e45175c85820","g":"f58af9210907988f","name":"sawtooth - 450 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"sawtooth","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"1100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"450","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2147,"y":655,"wires":[[]]},{"id":"0fd29409312c83d6","type":"change","z":"5299e45175c85820","g":"f58af9210907988f","name":"square - 450 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"square","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"1100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"450","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2138,"y":608,"wires":[[]]},{"id":"0781f9c6c765979e","type":"change","z":"5299e45175c85820","g":"f58af9210907988f","name":"sine - 450 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"sine","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"1100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"450","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2125,"y":713,"wires":[[]]},{"id":"fb21eee8145496b3","type":"change","z":"5299e45175c85820","g":"f58af9210907988f","name":"triangle - 410 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"1100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"410","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2138,"y":557,"wires":[[]]},{"id":"d7ae533a02b847bf","type":"change","z":"5299e45175c85820","g":"f58af9210907988f","name":"custom - 410 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"custom","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"1100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"410","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"1","tot":"str"},{"t":"set","p":"realTable","pt":"msg","to":"[0,1,2,1,0]","tot":"json"},{"t":"set","p":"imagTable","pt":"msg","to":"[0,0,0,0,0]","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":2144,"y":505,"wires":[[]]},{"id":"57ea1121b671e90d","type":"change","z":"5299e45175c85820","name":"A4 - triangle - 440 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"440","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2867,"y":437,"wires":[["3a0a1b71fccbb4b3"]]},{"id":"1ea680a54a077b67","type":"inject","z":"5299e45175c85820","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":2612,"y":251,"wires":[["57ea1121b671e90d"]]},{"id":"3a0a1b71fccbb4b3","type":"ClientCode","z":"5299e45175c85820","name":"Oscillator","clientcode":"var context = window.audiocontext || new AudioContext();\nwindow.audiocontext = context;\n\nvar frequency = parseInt(msg.frequency, 10) || node.frequency || 440;\nvar duration = parseInt(msg.duration, 10);\nif (duration != 0 && !duration) {\n    duration = node.duration || 500;\n}\n\nif (duration > 0) {\n    var oscillator = context.createOscillator();\n\n    oscillator.addEventListener(\"ended\", () => {\n        node.send({ payload: \"stop\" })\n    })\n\n    oscillator.frequency.value = frequency;\n\n    if ( msg.shape == 'custom' ) {\n        var real = new Float32Array(msg.realTable);\n        var imag;\n        if (msg.imagTable && Array.isArray(msg.imagTable)) {\n            imag = new Float32Array(msg.imagTable);\n        } else {\n            imag = new Float32Array(real.length);\n        }\n        var pWave = context.createPeriodicWave(real, imag);\n        oscillator.setPeriodicWave(pWave);\n        //oscillator.type = 'custom'\n    } else {\n        oscillator.type = msg.shape || node.shape || 'sine';\n    }\n\n    let g = new GainNode(context);\n    let vol = msg.volume || 1\n\n    oscillator.connect(g).connect(context.destination);\n\n    let startTime = context.currentTime\n\n    g.gain.setValueAtTime(0, startTime);\n    g.gain.linearRampToValueAtTime(vol, startTime + ((duration/1000) * 0.5));\n\n    setTimeout( () => {\n        node.send({ payload: \"start\" })\n    }, 10)\n    oscillator.start(startTime);\n\n    setTimeout(function () {\n        let stopTime = context.currentTime + 1;\n        g.gain.setValueAtTime(vol, stopTime - 0.5);\n        g.gain.linearRampToValueAtTime(0, stopTime);\n        oscillator.stop(stopTime);\n        \n        setTimeout(() => { oscillator = undefined }, 1100)\n    }, duration);\n}","format":"javascript","x":3415,"y":840,"wires":[["267553eb47249460"]]},{"id":"e9ab14b9b761190c","type":"change","z":"5299e45175c85820","name":"G4 - triangle - 392 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"392","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2862,"y":604,"wires":[["3a0a1b71fccbb4b3"]]},{"id":"1668bbb5a8f2aef5","type":"inject","z":"5299e45175c85820","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":2473,"y":513,"wires":[["e9ab14b9b761190c"]]},{"id":"af8d6dcaa4d49642","type":"change","z":"5299e45175c85820","name":"G4 - triangle - 392 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"392","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.9","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2859,"y":681,"wires":[["3a0a1b71fccbb4b3"]]},{"id":"aac5819379bf2e0c","type":"inject","z":"5299e45175c85820","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":2452,"y":626,"wires":[["af8d6dcaa4d49642"]]},{"id":"d2b91d67605ea615","type":"change","z":"5299e45175c85820","name":"G4 - triangle - 392 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"392","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2860,"y":538,"wires":[["3a0a1b71fccbb4b3"]]},{"id":"806fba79829760b6","type":"inject","z":"5299e45175c85820","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":2513,"y":449,"wires":[["d2b91d67605ea615"]]},{"id":"42d2b5f554c5a3e8","type":"change","z":"5299e45175c85820","name":"F4 - triangle -  349.23 Hz - v: 0.6","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"349.23","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2868,"y":804,"wires":[["3a0a1b71fccbb4b3"]]},{"id":"64d3717f84c4ef61","type":"inject","z":"5299e45175c85820","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":2381,"y":927,"wires":[["42d2b5f554c5a3e8"]]},{"id":"df078e216d6ed570","type":"change","z":"5299e45175c85820","name":"B4 - triangle -   493.88 Hz - v: 0.3","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2915,"y":928,"wires":[["3a0a1b71fccbb4b3"]]},{"id":"d53d9fb4d75d8141","type":"inject","z":"5299e45175c85820","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":2569,"y":1063,"wires":[["df078e216d6ed570"]]},{"id":"6671dddf8779f1b9","type":"inject","z":"5299e45175c85820","g":"9a363ed6c020f9b1","name":"Play Button","props":[],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":3595,"y":85.66666793823242,"wires":[["1019c17f078283d9","6ec75666ddeb78e3"]]},{"id":"267553eb47249460","type":"debug","z":"5299e45175c85820","name":"debug 114","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3566,"y":647,"wires":[]},{"id":"1019c17f078283d9","type":"change","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"B4 - triangle -   493.88 Hz - v: 0.3","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4330.6669921875,"y":180.99998474121094,"wires":[["d0819d41f9b53790"]]},{"id":"d7349b2cad374ac5","type":"change","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"B4 - triangle -   493.88 Hz - v: 0.3","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4334.6669921875,"y":242,"wires":[["d35f13412ac52d69"]]},{"id":"0f0a4be83ab872c1","type":"change","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"B4 - triangle -   493.88 Hz - v: 0.3","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4355.6669921875,"y":297,"wires":[["cfa4ecf262309330"]]},{"id":"1f4b5aba174bfb62","type":"change","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"B4 - triangle -   493.88 Hz - v: 0.3","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":5245.66650390625,"y":205.66665649414062,"wires":[["33ef28cb16312419"]]},{"id":"4722a513dd8e2377","type":"change","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"B4 - triangle -   493.88 Hz - v: 0.3","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":5246.99951171875,"y":263,"wires":[["c47846ae731480b4"]]},{"id":"be5f87229cd1369c","type":"change","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"B4 - triangle -   493.88 Hz - v: 0.3","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":5245.33349609375,"y":310.3333740234375,"wires":[["333b55d47a23144d"]]},{"id":"a3e53480160f9790","type":"change","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"D4# - triangle -   311.13 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"311.13","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6032,"y":251.6666259765625,"wires":[["a3879a486f5895f1"]]},{"id":"74a4b7194d660ee9","type":"change","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"B4 - triangle -   493.88 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6026.00048828125,"y":192.33331298828125,"wires":[["c4e6557a328bc519"]]},{"id":"0fb4299185a6e16e","type":"change","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"G4 - triangle - 392 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"392","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6009,"y":303.6666259765625,"wires":[["ee68679ee033e21d"]]},{"id":"c25dab8b39f99e61","type":"change","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"A4 - triangle - 440 Hz","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"440","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6033,"y":356.6666259765625,"wires":[["3537a1abbc19d879"]]},{"id":"b049b1e5f36aa8f7","type":"change","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"B4 - triangle -   493.88 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6053.66650390625,"y":413.33331298828125,"wires":[["ac624d5afb354918"]]},{"id":"f027a94d61c3e836","type":"switch","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"stop","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":5424.66650390625,"y":527.6666870117188,"wires":[["74a4b7194d660ee9","9c8c78b7d9947dd5"]]},{"id":"6ec75666ddeb78e3","type":"change","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Jingle Bells","tot":"str"},{"t":"set","p":"rate","pt":"msg","to":"0.3","tot":"str"},{"t":"set","p":"pitch","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4014.00048828125,"y":458.33331298828125,"wires":[["7eba9f1c26239a18"]]},{"id":"54cc6a7bc39e74c8","type":"change","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Jingle Bells","tot":"str"},{"t":"set","p":"rate","pt":"msg","to":"0.3","tot":"str"},{"t":"set","p":"pitch","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4902.666259765625,"y":516.3333587646484,"wires":[["f9d9bb5a2736d5b3"]]},{"id":"9afda5460e77fda4","type":"ClientCode","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"Speaker","clientcode":"const synth = window.speechSynthesis;\n\nlet voices = synth.getVoices();\n\nconst utterThis = new SpeechSynthesisUtterance(msg.payload || \"hello world\");\n\nutterThis.rate = msg.rate || 0.3\nutterThis.pitch = msg.pitch || 2\nutterThis.volume = msg.volume || 1\n\nutterThis.voice = voices[0];\n\n\nutterThis.addEventListener( \"start\", () =>{\n    node.send({ payload: \"start\"})\n})\n\nutterThis.addEventListener(\"end\", () => {\n    node.send({ payload: \"end\" })\n})\n\n\nsynth.speak(utterThis);\n\n","format":"javascript","x":5835.9997634887695,"y":567.6666603088379,"wires":[[]]},{"id":"5111bc5d0e9eef99","type":"delay","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":4887.666069030762,"y":568.333381652832,"wires":[["54cc6a7bc39e74c8"]]},{"id":"20b6f24b5301dd52","type":"change","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Jingle all the way","tot":"str"},{"t":"set","p":"rate","pt":"msg","to":"0.25","tot":"str"},{"t":"set","p":"pitch","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":5830.999755859375,"y":637.9999828338623,"wires":[["9afda5460e77fda4"]]},{"id":"9c8c78b7d9947dd5","type":"delay","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":5737.666748046875,"y":707.0000114440918,"wires":[["20b6f24b5301dd52"]]},{"id":"33d820653f9f1f28","type":"inject","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"stop","payloadType":"str","x":5153.66650390625,"y":525.6666870117188,"wires":[["f027a94d61c3e836"]]},{"id":"f9d9bb5a2736d5b3","type":"ClientCode","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"Speaker","clientcode":"const synth = window.speechSynthesis;\n\nlet voices = synth.getVoices();\n\nconst utterThis = new SpeechSynthesisUtterance(msg.payload || \"hello world\");\n\nutterThis.rate = msg.rate || 0.3\nutterThis.pitch = msg.pitch || 2\nutterThis.volume = msg.volume || 1\n\nutterThis.voice = voices[0];\n\n\nutterThis.addEventListener( \"start\", () =>{\n    node.send({ payload: \"start\"})\n})\n\nutterThis.addEventListener(\"end\", () => {\n    node.send({ payload: \"end\" })\n})\n\n\nsynth.speak(utterThis);\n\n","format":"javascript","x":4911.3330078125,"y":463,"wires":[[]]},{"id":"7eba9f1c26239a18","type":"ClientCode","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"Speaker","clientcode":"const synth = window.speechSynthesis;\n\nlet voices = synth.getVoices();\n\nconst utterThis = new SpeechSynthesisUtterance(msg.payload || \"hello world\");\n\nutterThis.rate = msg.rate || 0.3\nutterThis.pitch = msg.pitch || 2\nutterThis.volume = msg.volume || 1\n\nutterThis.voice = voices[0];\n\n\nutterThis.addEventListener( \"start\", () =>{\n    node.send({ payload: \"start\"})\n})\n\nutterThis.addEventListener(\"end\", () => {\n    node.send({ payload: \"end\" })\n})\n\n\nsynth.speak(utterThis);\n\n","format":"javascript","x":4226.0001220703125,"y":454.9999532699585,"wires":[[]]},{"id":"d9d72db54946e21e","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"B4 - triangle -   493.88 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6749.33349609375,"y":522,"wires":[["05ab9b896a6a7169"]]},{"id":"74e75694f679bf6f","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"B4 - triangle -   493.88 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"493.88","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6780.33349609375,"y":597,"wires":[["c01d2bd5c79650e5"]]},{"id":"8804b5bb2039ca7e","type":"change","z":"5299e45175c85820","name":"C4# - triangle -    277.18 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"277.18","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3126,"y":1099,"wires":[[]]},{"id":"634adc997bfcdd0a","type":"change","z":"5299e45175c85820","name":"D4# - triangle -   311.13 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"311.13","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2984,"y":1001,"wires":[[]]},{"id":"0b3bedcd215bbda7","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"C4# - triangle -    277.18 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"277.18","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6715.6669921875,"y":146.99996948242188,"wires":[["4bb73c58621be583"]]},{"id":"b19db705bf174de9","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"C4# - triangle -    277.18 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"277.18","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6716,"y":222.66665649414062,"wires":[["dabbc61503445ee6"]]},{"id":"c8c82b50b71e3bd2","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"C4# - triangle -    277.18 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"277.18","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6697.6669921875,"y":273.9999694824219,"wires":[["fbdb1f74f88edb06"]]},{"id":"bb1708a97b270fc9","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"C4# - triangle -    277.18 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"277.18","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6728.66650390625,"y":381.66668701171875,"wires":[["ac6401877494f22d"]]},{"id":"05858bcf67e55f5d","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"C4# - triangle -    277.18 Hz - v: 0.1","rules":[{"t":"set","p":"shape","pt":"msg","to":"triangle","tot":"str"},{"t":"set","p":"duration","pt":"msg","to":"100","tot":"str"},{"t":"set","p":"frequency","pt":"msg","to":"277.18","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6737.66650390625,"y":445.66668701171875,"wires":[["b59d17a05b397013"]]},{"id":"d0c9f2123299338c","type":"delay","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":6854.6669921875,"y":325.33331298828125,"wires":[["bb1708a97b270fc9"]]},{"id":"fb1d638e2217bec6","type":"inject","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"stop","payloadType":"str","x":6022.6669921875,"y":706.6666870117188,"wires":[["8b53fa707baa0183"]]},{"id":"8b53fa707baa0183","type":"switch","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"stop","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":6170.66650390625,"y":568.3333129882812,"wires":[["958e4845fe9dee73","0b3bedcd215bbda7"]]},{"id":"e9ce5966d53cf18d","type":"ClientCode","z":"5299e45175c85820","g":"7d8906144b43976d","name":"Speaker","clientcode":"const synth = window.speechSynthesis;\n\nlet voices = synth.getVoices();\n\nconst utterThis = new SpeechSynthesisUtterance(msg.payload || \"hello world\");\n\nutterThis.rate = msg.rate || 0.3\nutterThis.pitch = msg.pitch || 2\nutterThis.volume = msg.volume || 1\n\nutterThis.voice = voices[0];\n\n\nutterThis.addEventListener( \"start\", () =>{\n    node.send({ payload: \"start\"})\n})\n\nutterThis.addEventListener(\"end\", () => {\n    node.send({ payload: \"end\" })\n})\n\n\nsynth.speak(utterThis);\n\n","format":"javascript","x":6472.999401092529,"y":712.3333282470703,"wires":[[]]},{"id":"6b67d059989eccc0","type":"change","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"oh what fun it is to ride","tot":"str"},{"t":"set","p":"rate","pt":"msg","to":"0.2","tot":"str"},{"t":"set","p":"pitch","pt":"msg","to":"2","tot":"str"},{"t":"set","p":"volume","pt":"msg","to":"0.2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":6513.333145141602,"y":770.3334722518921,"wires":[["e9ce5966d53cf18d"]]},{"id":"958e4845fe9dee73","type":"delay","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","pauseType":"delay","timeout":"600","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":6556.666389465332,"y":837.6666679382324,"wires":[["6b67d059989eccc0"]]},{"id":"dad72ed9abd29a99","type":"switch","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"stop","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":7024.33349609375,"y":826,"wires":[[]]},{"id":"4773fb82bbdec24e","type":"ClientCode","z":"5299e45175c85820","g":"dea36c8c708a6730","name":"Oscillator","clientcode":"var context = window.audiocontext || new AudioContext();\nwindow.audiocontext = context;\n\nvar frequency = parseInt(msg.frequency, 10) || node.frequency || 440;\nvar duration = parseInt(msg.duration, 10);\nif (duration != 0 && !duration) {\n    duration = node.duration || 500;\n}\n\nif (duration > 0) {\n    var oscillator = context.createOscillator();\n\n    oscillator.addEventListener(\"ended\", () => {\n        node.send({ payload: \"stop\" })\n    })\n\n    oscillator.frequency.value = frequency;\n\n    if ( msg.shape == 'custom' ) {\n        var real = new Float32Array(msg.realTable);\n        var imag;\n        if (msg.imagTable && Array.isArray(msg.imagTable)) {\n            imag = new Float32Array(msg.imagTable);\n        } else {\n            imag = new Float32Array(real.length);\n        }\n        var pWave = context.createPeriodicWave(real, imag);\n        oscillator.setPeriodicWave(pWave);\n        //oscillator.type = 'custom'\n    } else {\n        oscillator.type = msg.shape || node.shape || 'sine';\n    }\n\n    let g = new GainNode(context);\n    let vol = msg.volume || 1\n\n    oscillator.connect(g).connect(context.destination);\n\n    let startTime = context.currentTime\n\n    g.gain.setValueAtTime(0, startTime);\n    g.gain.linearRampToValueAtTime(vol, startTime + ((duration/1000) * 0.5));\n\n    setTimeout( () => {\n        node.send({ payload: \"start\" })\n    }, 10)\n    oscillator.start(startTime);\n\n    setTimeout(function () {\n        let stopTime = context.currentTime + 1;\n        g.gain.setValueAtTime(vol, stopTime - 0.5);\n        g.gain.linearRampToValueAtTime(0, stopTime);\n        oscillator.stop(stopTime);\n        \n        setTimeout(() => { oscillator = undefined }, 1100)\n    }, duration);\n}","format":"javascript","x":3587,"y":306,"wires":[["121e10d026852b77"]]},{"id":"121e10d026852b77","type":"switch","z":"5299e45175c85820","g":"dea36c8c708a6730","name":"on stop","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"stop","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":3586,"y":357,"wires":[["78a40a7daa0f1514"]]},{"id":"05c93b8a0b0d60df","type":"link in","z":"5299e45175c85820","g":"dea36c8c708a6730","name":"play note","links":[],"x":3581,"y":248,"wires":[["4773fb82bbdec24e"]]},{"id":"78a40a7daa0f1514","type":"link out","z":"5299e45175c85820","g":"dea36c8c708a6730","name":"link out 119","mode":"return","links":[],"x":3583,"y":426,"wires":[]},{"id":"d0819d41f9b53790","type":"link call","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":4105,"y":244,"wires":[["d7349b2cad374ac5"]]},{"id":"d35f13412ac52d69","type":"link call","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":4121,"y":296,"wires":[["0f0a4be83ab872c1"]]},{"id":"cfa4ecf262309330","type":"link call","z":"5299e45175c85820","g":"38e715fc6b57fc18","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":4462,"y":408,"wires":[["1f4b5aba174bfb62","5111bc5d0e9eef99"]]},{"id":"33ef28cb16312419","type":"link call","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":4994,"y":263,"wires":[["4722a513dd8e2377"]]},{"id":"c47846ae731480b4","type":"link call","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":4999,"y":309,"wires":[["be5f87229cd1369c"]]},{"id":"333b55d47a23144d","type":"link call","z":"5299e45175c85820","g":"19a4e06f97f3aba6","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":5009,"y":363,"wires":[["f027a94d61c3e836"]]},{"id":"c4e6557a328bc519","type":"link call","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":5781,"y":251,"wires":[["a3e53480160f9790"]]},{"id":"a3879a486f5895f1","type":"link call","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":5800,"y":303,"wires":[["0fb4299185a6e16e"]]},{"id":"ee68679ee033e21d","type":"link call","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":5795,"y":358,"wires":[["c25dab8b39f99e61"]]},{"id":"3537a1abbc19d879","type":"link call","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":5799,"y":409,"wires":[["b049b1e5f36aa8f7"]]},{"id":"ac624d5afb354918","type":"link call","z":"5299e45175c85820","g":"88be68b12d42ec80","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":5809,"y":460,"wires":[["8b53fa707baa0183"]]},{"id":"4bb73c58621be583","type":"link call","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":6465,"y":224,"wires":[["b19db705bf174de9"]]},{"id":"dabbc61503445ee6","type":"link call","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":6450,"y":274,"wires":[["c8c82b50b71e3bd2"]]},{"id":"fbdb1f74f88edb06","type":"link call","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":6452,"y":322,"wires":[["d0c9f2123299338c"]]},{"id":"ac6401877494f22d","type":"link call","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":6436,"y":439,"wires":[["05858bcf67e55f5d"]]},{"id":"b59d17a05b397013","type":"link call","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":6450,"y":502,"wires":[["d9d72db54946e21e"]]},{"id":"05ab9b896a6a7169","type":"link call","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":6477,"y":594,"wires":[["74e75694f679bf6f"]]},{"id":"c01d2bd5c79650e5","type":"link call","z":"5299e45175c85820","g":"7d8906144b43976d","name":"","links":["05c93b8a0b0d60df"],"linkType":"static","timeout":"30","x":6669,"y":670,"wires":[["dad72ed9abd29a99"]]}]