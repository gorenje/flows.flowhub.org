[{"id":"741c6acbed17d504","type":"tab","label":"[experimental] Node-RED Community catalogue","disabled":false,"info":"### Description\n\nA basic analyses of the Node-RED Community catalogue.\n\nTakes the catalogue details and tries to make nice looking graphs from it.\n\n![img](https://cdn.openmindmap.org/content/1698262081584_Screen_Shot_2023-10-25_at_21.27.57.png)\n\n![img](https://cdn.openmindmap.org/content/1698262103086_Screen_Shot_2023-10-25_at_21.28.19.png)\n\n![img](https://cdn.openmindmap.org/content/1698262124007_Screen_Shot_2023-10-25_at_21.28.40.png)\n\n","env":[]},{"id":"50d3daf2d40242cd","type":"group","z":"741c6acbed17d504","name":"download numbers - last week","style":{"label":true},"nodes":["5ab1307cde32f1fb","f84248691ed06d3d","81183f4703a06f49","8f2128989276a991","67200a1f56d67d09","64f65485e85f9ba7","3e5c72bc75ddc5b7","ab60574324c52a44","d8bf6929c3458b1d","0d5024c37044c70a","56d2378be86a91d3","df18d1223b13f05a","8250415e5f2c89cd","3e34e30ee81ea525","7795563e2648cb7a","200dd7b329a4191e","5a18cef8307f4179","e381d4b2527eb33b"],"x":2437.5,"y":104.999755859375,"w":1572.5,"h":433.666748046875},{"id":"9b48b443f84a0653","type":"group","z":"741c6acbed17d504","name":"how many downloads are defined?","style":{"label":true},"nodes":["359d48a6b99d46c9","2d9d68e96c33a00b","e5dee8ee63cc44c3","e927cfffadbcf09a"],"x":3243,"y":574.3331546783447,"w":767,"h":82},{"id":"f98a6a1875c36277","type":"group","z":"741c6acbed17d504","name":"retrieve version details","style":{"label":true},"nodes":["cb7aa51cff5e5580","0280b91f32c74573","ce3e7eaaf9f9ac2d","f4847a5dba23f723","c0740d5553947cfd","8045064c5212858b","525ff4bef34b3a66","431906ed74e84938","8b993b2ec9fecad0","042c5cb781781ffe","a0af637a6816c6e7","8f7f852a46655a05","ad21b0ba9c731507","3d4e76c8dc54e012","edde60f0b0917325","0f31a57b165af276","b4baba4cbfaebef8","6f70a024e1b52425"],"x":2462.5000076293945,"y":691.9998054504395,"w":1547.4999923706055,"h":440.8335437774658},{"id":"8ca7d5fd124078bb","type":"group","z":"741c6acbed17d504","name":"how many versions are defined?","style":{"label":true},"nodes":["1e4ca5108278c8bd","ddd4da103f23a14f","8850a08e7b35d028","cd6ca105174a79b8"],"x":3243,"y":1168.5,"w":767,"h":82},{"id":"83e19bdbfde4f783","type":"group","z":"741c6acbed17d504","name":"download numbers - last month","style":{"label":true},"nodes":["379b1e7bc1488713","f82bed0ba8594cea","01c4e8546909eacb","b505825f2572ee86","8ff36b94c1512a3c","6c76540a2ef329ac","8f0e1ff45bebbf7a","9bf3e530f3f846d4","5b43686e8d5161aa","7b85c12ba013c53d","4ccd999609548e4c","e34f354516d86101","9c05960e1ff6dc3c","447c127e68856e28","152b119440a63bc1","d59e0a07f6f84fdf","4d9b4c52dce3fdf4","0b6fced32cfb7c80"],"x":2437.5,"y":1292.083251953125,"w":1572.5,"h":433.666748046875},{"id":"d54435d4060a54b4","type":"group","z":"741c6acbed17d504","name":"how many downloads are defined?","style":{"label":true},"nodes":["4e60fdf7e8c4797f","08d6c76ad5c973a1","850ab2115c8d4cd0","7cc9dd2e4a07ac16"],"x":3243,"y":1761.4166507720947,"w":767,"h":82},{"id":"206d219714878a64","type":"http request","z":"741c6acbed17d504","name":"","method":"GET","ret":"obj","paytoqs":"ignore","url":"https://catalogue.nodered.org/catalogue.json?_={{ payload }}","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":640.6665267944336,"y":1045.6111698150635,"wires":[["f544e75095b4b089","a9e223ba3da5fd6c","d4a8db88a2d62d2b","142f96b4a47de0ec","e51fbfae8f6f88d4","e6d53528d2196e15","fb5a017272acb096","9792fe31e9eb49ec","ca3f486d4be3fb14","2f0167db58f7ce54","27e9cacefbc9e0e0","50b0c642f7829303","67659a26f732abce","25bc3304e70968ae","acb70287893b47e6"]]},{"id":"db7468f93f6d28c4","type":"inject","z":"741c6acbed17d504","name":"Generate initial data","props":[],"repeat":"","crontab":"","once":true,"onceDelay":"1","topic":"","x":352.7776336669922,"y":1045.6111698150635,"wires":[["206d219714878a64"]]},{"id":"f544e75095b4b089","type":"debug","z":"741c6acbed17d504","name":"debug 48","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":627.6665267944336,"y":1158.333378791809,"wires":[]},{"id":"dec7a25e92772aec","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"01cb0c42ba918c34","order":3,"width":12,"height":20,"label":"top keywords, used by at least 10 modules","chartType":"bar","legend":"true","xformat":"auto","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2116.333381652832,"y":467.5,"wires":[[]]},{"id":"a9e223ba3da5fd6c","type":"function","z":"741c6acbed17d504","name":"top keywords","func":"var keywords = {};\nmsg.payload.modules.forEach(function(module) {\n    (module.keywords || []).forEach(function(keyword) {\n        keyword = keyword.toLowerCase()\n        keywords[keyword] ||= 0\n        keywords[keyword] += 1\n    });\n});\n\n\ndelete keywords[\"node-red\"]\ndelete keywords[\"node-red-contrib\"]\ndelete keywords[\"node-red-contrib-contribgen\"]\n// delete keywords[\"iot\"]\ndelete keywords[\"node\"]\ndelete keywords[\"nodered\"]\n\nvar keys = Object.keys(keywords);\nvar kvs = keys.map((k) => { return [k, keywords[k]]})\nkvs = kvs.sort( (a,b) => { return a[1] < b[1] ? 1 : -1 })\n\nmsg.payload = [{\n    \"series\": kvs.filter( (v) => { return v[1] > 9 }).map((v) => { return v[0]}),\n    \"data\": kvs.filter((v) => { return v[1] > 9 }).map((v) => { return [v[1]] }),\n    \"labels\": [\"Keywords\"]\n}]\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1049.999870300293,"y":467.5,"wires":[["dec7a25e92772aec"]]},{"id":"d4a8db88a2d62d2b","type":"function","z":"741c6acbed17d504","name":"updates per day","func":"var lastestUpdates = {};\nvar limitToLastXDays = 3000;\n\n[...new Array(limitToLastXDays)].map((i, idx) => {\n    lastestUpdates[moment().startOf(\"day\").subtract(idx, \"days\").format(\"YYYY-MM-DD\")] = 0 \n});\n\nmsg.payload.modules.forEach(function(module) {\n    module.updated_at = module.updated_at.split(\"T\")[0]\n\n    lastestUpdates[module.updated_at] ||= 0\n    lastestUpdates[module.updated_at] += 1\n});\n\nvar keys = Object.keys(lastestUpdates);\nvar kvs = keys.map((k) => { return [k, lastestUpdates[k]]})\n// kvs = kvs.sort( (a,b) => { return Date.parse(a[0]) < Date.parse(b[0]) ? 1 : -1 })\n\nkvs.length = limitToLastXDays\n\nmsg.payload = [{\n    \"series\": [\"Updates\"],\n    \"data\": [kvs.map((v) => { return { x: v[0], y: v[1]} })],\n    \"labels\": [\"Days\"]\n}]\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[{"var":"moment","module":"moment"}],"x":1049.999870300293,"y":548.5,"wires":[["bdcf58f8b5f0a53f"]]},{"id":"bdcf58f8b5f0a53f","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"d096a52e52c86d2a","order":4,"width":"24","height":"21","label":"updates per day","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":"300","removeOlderPoints":"3000","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2026.333381652832,"y":548.5,"wires":[[]]},{"id":"142f96b4a47de0ec","type":"function","z":"741c6acbed17d504","name":"top version numbers","func":"var topVersionNunbers = {};\n\nmsg.payload.modules.forEach(function(module) {\n    topVersionNunbers[module.version] ||= 0\n    topVersionNunbers[module.version] += 1\n});\n\nvar keys = Object.keys(topVersionNunbers);\nvar kvs = keys.map((k) => { return [k, topVersionNunbers[k]]})\nkvs = kvs.sort( (a,b) => { return a[1] < b[1] ? 1 : -1 })\n\nkvs.length = 100\n\nmsg.payload = [{\n    \"series\": kvs.map((v) => { return v[0]}),\n    \"data\": kvs.map((v) => { return [v[1]] }),\n    \"labels\": [\"Versions\"]\n}]\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1069.999870300293,"y":648,"wires":[["da734d225bc3a03b"]]},{"id":"da734d225bc3a03b","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"01cb0c42ba918c34","order":5,"width":12,"height":20,"label":"top 100 version numbers","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2056.333381652832,"y":648,"wires":[[]]},{"id":"e51fbfae8f6f88d4","type":"function","z":"741c6acbed17d504","name":"last 100 updates","func":"var latestPackageUpdates = [];\n\nmsg.payload.modules.forEach(function(module) {\n    latestPackageUpdates.push([\n        module.id,\n        module.updated_at.split(\"T\")[0],\n        module.description,\n        module.version,\n        module.keywords\n    ])\n});\n\nkvs = latestPackageUpdates.sort( (a,b) => { return Date.parse(a[1]) <= Date.parse(b[1]) ? 1 : -1 })\n\nkvs.length = 100\n\nmsg.payload = kvs.map((v) => {\n    return {\n        \"value\": v[0],\n        \"date\": v[1],\n        \"desc\": v[2],\n        \"version\": v[3],\n        \"tags\": (v[4] || []).map(d => { return { tag: d } })\n    }\n})\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1059.999870300293,"y":765,"wires":[["d34e2aac0af1c3b4"]]},{"id":"696d4b7a9edc9456","type":"ui_template","z":"741c6acbed17d504","group":"01cb0c42ba918c34","name":"List of latest updated packages","order":13,"width":12,"height":15,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2076.333381652832,"y":765,"wires":[[]]},{"id":"d34e2aac0af1c3b4","type":"template","z":"741c6acbed17d504","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<dl>\n{{#payload}}\n  <dt><b><a target=\"_blank\" href=\"https://flows.nodered.org/search?term={{ value }}\">{{ value}}</a></b> ({{date}})</dt>\n  <dd><i>{{ version }}</i> {{#tags}}{{tag}},{{/tags}}<br>\n  <i>{{ desc }}</i>\n  </dd>\n{{/payload}}\n</dl>\n","output":"str","x":1413.999870300293,"y":765,"wires":[["696d4b7a9edc9456"]]},{"id":"476d44ecaa16b0f0","type":"ui_template","z":"741c6acbed17d504","group":"01cb0c42ba918c34","name":"TItle","order":12,"width":12,"height":1,"format":"<h2>Last 100 package Updates</h2>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1996.333381652832,"y":719,"wires":[[]]},{"id":"e6d53528d2196e15","type":"function","z":"741c6acbed17d504","name":"top major version number","func":"var topVersionNunbers = {};\n\nmsg.payload.modules.forEach(function(module) {\n    topVersionNunbers[module.version.split(\".\")[0]] ||= 0\n    topVersionNunbers[module.version.split(\".\")[0]] += 1\n});\n\nvar keys = Object.keys(topVersionNunbers);\nvar kvs = keys.map((k) => { return [k, topVersionNunbers[k]]})\nkvs = kvs.sort( (a,b) => { return a[1] < b[1] ? 1 : -1 })\n\nmsg.payload = [{\n    \"series\": kvs.map((v) => { return v[0]}),\n    \"data\": kvs.map((v) => { return [v[1]] }),\n    \"labels\": [\"Major Version\"]\n}]\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1079.999870300293,"y":846.5,"wires":[["cd46143e9a042d89"]]},{"id":"cd46143e9a042d89","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"01cb0c42ba918c34","order":6,"width":12,"height":20,"label":"top major version number (major.minor.patch)","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2126.333381652832,"y":846.5,"wires":[[]]},{"id":"fb5a017272acb096","type":"function","z":"741c6acbed17d504","name":"highest defined types","func":"var typeCounts = {};\n\nmsg.payload.modules.forEach(function(module) {\n    typeCounts[module.types.length] ||= 0\n    typeCounts[module.types.length] += 1\n});\n\nvar keys = Object.keys(typeCounts);\nvar kvs = keys.map((k) => { return [k, typeCounts[k]]})\nkvs = kvs.sort( (a,b) => { return parseInt(a[0]) > parseInt(b[0]) ? 1 : -1 })\n\nmsg.payload = [{\n    \"series\": kvs.map((v) => { return v[0]}),\n    \"data\": kvs.map((v) => { return [v[1]] }),\n    \"labels\": [\"Type counts\"]\n}]\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1069.999870300293,"y":930.5,"wires":[["fc97bcdb069767a2"]]},{"id":"fc97bcdb069767a2","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"01cb0c42ba918c34","order":7,"width":12,"height":20,"label":"number of node types defined by a package","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2116.333381652832,"y":930.5,"wires":[[]]},{"id":"9792fe31e9eb49ec","type":"function","z":"741c6acbed17d504","name":"number of types > 20","func":"var topTypeCounts = [];\n\nmsg.payload.modules.forEach(function(module) {\n    topTypeCounts.push([\n        module.id,\n        module.types.length,\n        module.version,\n        module.description,\n        module.keywords\n    ])\n});\n\nvar kvs = topTypeCounts.filter((d) => { \n    return (parseInt(d[1]) > 19 || parseInt(d[1]) == 0 )\n}).sort( (a,b) => { \n    return parseInt(a[1]) <= parseInt(b[1]) ? 1 : -1 \n})\n\nmsg.payload = kvs.map((v) => {\n    return {\n        \"value\": v[0],\n        \"count\": parseInt(v[1]),\n        \"version\": v[2],\n        \"desc\": v[3],\n        \"tags\": (v[4]||[]).map( d => { return { tag: d }})\n    }\n})\n\nreturn [\n    {\n        ...msg,\n        payload: msg.payload.filter( d => { return d.count > 0 })\n    },\n    {\n        ...msg,\n        payload: msg.payload.filter(d => { return d.count == 0 })\n    }\n]","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1069.999870300293,"y":1044,"wires":[["fc1728e12900a63e"],["75ceb26047ef4853"]]},{"id":"26071b19cfe2addb","type":"ui_template","z":"741c6acbed17d504","group":"01cb0c42ba918c34","name":"List of type counts","order":15,"width":12,"height":15,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2036.333381652832,"y":1037,"wires":[[]]},{"id":"fc1728e12900a63e","type":"template","z":"741c6acbed17d504","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<dl>\n{{#payload}}\n  <dt><b><a target=\"_blank\" href=\"https://flows.nodered.org/search?term={{ value }}\">{{ value}}</a></b> ({{count}})</dt>\n  <dd><i>{{ version }}</i> {{#tags}}{{tag}},{{/tags}}<br><i>{{ desc }}</i></dd>\n{{/payload}}\n</dl>\n","output":"str","x":1413.999870300293,"y":1037,"wires":[["26071b19cfe2addb"]]},{"id":"1cbcf2c1fb513439","type":"ui_template","z":"741c6acbed17d504","group":"01cb0c42ba918c34","name":"TItle 2","order":14,"width":12,"height":1,"format":"<h2>Packages with the most types defined (above 20)</h2>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1996.333381652832,"y":979,"wires":[[]]},{"id":"0de51abc98bd4b1f","type":"ui_template","z":"741c6acbed17d504","group":"01cb0c42ba918c34","name":"List of packages with no node types defined","order":17,"width":12,"height":15,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2116.333381652832,"y":1150.5,"wires":[[]]},{"id":"75ceb26047ef4853","type":"template","z":"741c6acbed17d504","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<dl>\n{{#payload}}\n  <dt><b><a target=\"_blank\" href=\"https://flows.nodered.org/search?term={{ value }}\">{{ value}}</a></b> ({{count}})</dt>\n  <dd><i>{{ version }}</i> {{#tags}}{{tag}},{{/tags}}<br><i>{{ desc }}</i></dd>\n{{/payload}}\n</dl>\n","output":"str","x":1413.999870300293,"y":1150.5,"wires":[["0de51abc98bd4b1f"]]},{"id":"d52f1947d0f12e32","type":"ui_template","z":"741c6acbed17d504","group":"01cb0c42ba918c34","name":"TItle 3","order":16,"width":12,"height":1,"format":"<h2>Packages with no node types defined</h2>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1996.333381652832,"y":1097,"wires":[[]]},{"id":"2ba7496fdee9fb94","type":"ui_button","z":"741c6acbed17d504","name":"","group":"0ed53e2825b8c7fb","order":2,"width":"6","height":"6","passthru":false,"label":"Refresh Data","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":248.77769470214844,"y":141.22218799591064,"wires":[["6e28a0aaf183ed8a","7a73184fb136e7db","8849e98ce9b9944f"]]},{"id":"ca3f486d4be3fb14","type":"function","z":"741c6acbed17d504","name":"top developers","func":"var topDevelopers = {};\n\nmsg.payload.modules.forEach(function(module) {\n    var devname = module.id.split(\"/\")\n    if ( devname.length > 1 ) {\n        topDevelopers[devname[0]] ||= 0\n        topDevelopers[devname[0]] += 1\n    }\n});\n\nvar keys = Object.keys(topDevelopers);\nvar kvs = keys.map((k) => { return [k, topDevelopers[k]]})\nkvs = kvs.sort( (a,b) => { return a[1] < b[1] ? 1 : -1 })\n\nkvs.length = 100;\n\nmsg.payload = [{\n    \"series\": kvs.map((v) => { return v[0]}),\n    \"data\": kvs.map((v) => { return [v[1]] }),\n    \"labels\": [\"Developers\"]\n}]\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1049.999870300293,"y":1212,"wires":[["5353fbb10c120179"]]},{"id":"5353fbb10c120179","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"01cb0c42ba918c34","order":8,"width":12,"height":20,"label":"top 100 package prefixes","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2056.333381652832,"y":1212,"wires":[[]]},{"id":"e8c4690585fb2a41","type":"catch","z":"741c6acbed17d504","name":"","scope":null,"uncaught":false,"x":288.99987030029297,"y":1529,"wires":[["3fe48b832b51cf6b"]]},{"id":"3fe48b832b51cf6b","type":"debug","z":"741c6acbed17d504","name":"EXCEPTIONS WILL HAPPEN","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":551.1109962463379,"y":1527.8889141082764,"wires":[]},{"id":"6e28a0aaf183ed8a","type":"change","z":"741c6acbed17d504","name":"reset charts","rules":[{"t":"set","p":"payload","pt":"msg","to":"[]","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":1757.3330993652344,"y":141.22218799591064,"wires":[["dec7a25e92772aec","bdcf58f8b5f0a53f","da734d225bc3a03b","cd46143e9a042d89","fc97bcdb069767a2","696d4b7a9edc9456","26071b19cfe2addb","0de51abc98bd4b1f","5353fbb10c120179","08e9c9ce8d47bd36","c4d0f31a52436e6c","911d68596b80740e","c9f5e8734dc46760","c891cade66e07a2f","d3960b2b800f214f","3fe13dceb4568af8","2c424d5c5477f560","2c5f56500f8481e0","e7f7cc8765d42637"]]},{"id":"7a73184fb136e7db","type":"delay","z":"741c6acbed17d504","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":445.4443588256836,"y":673.2222232818604,"wires":[["206d219714878a64"]]},{"id":"2f0167db58f7ce54","type":"function","z":"741c6acbed17d504","name":"top developers","func":"var prefixedPackages = 0;\nvar totalPackages = 0;\n\nmsg.payload.modules.forEach(function(module) {\n    var devname = module.id.split(\"/\")\n\n    totalPackages += 1\n    if ( devname.length > 1 ) {\n        prefixedPackages += 1\n    }\n});\n\nmsg.prefixedPackages = prefixedPackages;\nmsg.totalPackages = totalPackages;\nmsg.nonPrefixedPackages = totalPackages - prefixedPackages;\nmsg.lastUpdated = msg.payload.updated_at;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1049.999870300293,"y":394.55560302734375,"wires":[["46e5086ca7d0e5d1"]]},{"id":"08e9c9ce8d47bd36","type":"ui_template","z":"741c6acbed17d504","group":"01cb0c42ba918c34","name":"Statistics","order":2,"width":12,"height":4,"format":"\n<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2006.333381652832,"y":394.55560302734375,"wires":[["a8715f06a1e483b2"]]},{"id":"46e5086ca7d0e5d1","type":"template","z":"741c6acbed17d504","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<h2>Packages</h2>\n\nTotal: <b>{{ totalPackages }}</b><br>\nPrefixed: <b>{{ prefixedPackages }}</b><br>\nNon-Prefixed: <b>{{ nonPrefixedPackages }}</b><br>\nLast updated at: <b>{{ lastUpdated }}</b><br>\n","output":"str","x":1413.999870300293,"y":394.55560302734375,"wires":[["08e9c9ce8d47bd36"]]},{"id":"27e9cacefbc9e0e0","type":"function","z":"741c6acbed17d504","name":"last updates by year","func":"var groupByDate = {};\n\nmsg.payload.modules.forEach(function(module) {\n    var day = module.updated_at.split(\"T\")[0];\n\n    var month = day.split(\"-\").slice(0, 2).join(\"-\")\n    var year = day.split(\"-\").slice(0, 1).join(\"-\")\n\n    // groupByDate[month] = (groupByDate[month] || 0) + 1\n    groupByDate[year] = (groupByDate[year] || 0) + 1\n});\n\nvar keys = Object.keys(groupByDate);\nvar kvs = keys.map((k) => { return [k, groupByDate[k]] })\nkvs = kvs.sort((a, b) => { return parseInt(a[0]) < parseInt(b[1]) ? 1 : -1 })\n\nmsg.payload = [{\n    \"series\": kvs.map((v) => { return v[0] }),\n    \"data\": kvs.map((v) => { return [v[1]] }),\n    \"labels\": [\"Major Version\"]\n}]\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1069.999870300293,"y":1299.4445972442627,"wires":[["c4d0f31a52436e6c"]]},{"id":"c4d0f31a52436e6c","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"01cb0c42ba918c34","order":9,"width":12,"height":20,"label":"number of packages updated by year","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2096.333381652832,"y":1299.4445972442627,"wires":[[]]},{"id":"50b0c642f7829303","type":"function","z":"741c6acbed17d504","name":"overlapping types","func":"var types = {};\n\nmsg.payload.modules.forEach( (module) => {\n    (module.types || []).forEach( (typ) => {\n        types[typ] = ( types[typ] || [] ).concat( [module.id] )\n    });\n});\n\n// occurs multiple times but seems to be ignored. Some packages\n// define this as a node type several times - some generational \n// error I assume.\ndelete types[\"__errors__\"]; \n\nvar kvs = Object.keys(types).map((k) => { return [k, types[k]]}).filter( (d) => {\n    return d[1].length > 1\n})\nkvs = kvs.sort( (a,b) => { return a[1].length < b[1].length ? 1 : -1 })\n\nvar orig = [...kvs]\n\nkvs.length = 100;\n\nreturn [\n    {\n        ...msg,\n        payload: [{\n            \"series\": kvs.map((v) => { return v[0] }),\n            \"data\": kvs.map((v) => { return [v[1].length] }),\n            \"labels\": [\"Types\"]\n        }]\n    },\n    {\n        ...msg,\n        payload: orig\n    }\n]","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1059.999870300293,"y":1378,"wires":[["911d68596b80740e"],["39a232c1f0d6f9cf"]]},{"id":"911d68596b80740e","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"01cb0c42ba918c34","order":2,"width":12,"height":20,"label":"top 100 overlapping package types","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2086.333381652832,"y":1376,"wires":[[]]},{"id":"39a232c1f0d6f9cf","type":"debug","z":"741c6acbed17d504","name":"list of overlapping types","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1408.916488647461,"y":1417.6667861938477,"wires":[]},{"id":"5ab1307cde32f1fb","type":"http request","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"GET package catalogue","method":"GET","ret":"obj","paytoqs":"ignore","url":"https://catalogue.nodered.org/catalogue.json?_={{ payload }}","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":3175,"y":341.249755859375,"wires":[["64f65485e85f9ba7"]]},{"id":"f84248691ed06d3d","type":"function","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"function 10","func":"msg.downloads = msg.downloads || {};\n\nvar module = msg.modules.pop();\n\n/* \n  Url from https://www.edoardoscibona.com/exploring-the-npm-registry-api, possible periods are:\n   - last-year\n   - last-month\n   - last-year\n   - last-day\n*/\nif ( module ) {\n    return [{\n            ...msg,\n            url: \"https://api.npmjs.org/downloads/point/last-week/\" + module.id,\n            module: module,\n            isempty: msg.downloads[module.id] == undefined\n        },\n        undefined\n    ]\n} else {\n    return [\n        undefined,\n        msg\n    ]\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3731,"y":254.749755859375,"wires":[["df18d1223b13f05a"],["7795563e2648cb7a"]]},{"id":"81183f4703a06f49","type":"http request","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"","method":"GET","ret":"obj","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":true,"headers":[],"x":2533.5,"y":273.499755859375,"wires":[["3e5c72bc75ddc5b7"]]},{"id":"8f2128989276a991","type":"delay","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":3541.166664123535,"y":495.4998664855957,"wires":[["f84248691ed06d3d"]]},{"id":"67200a1f56d67d09","type":"debug","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"debug 49","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3904,"y":448.687255859375,"wires":[]},{"id":"64f65485e85f9ba7","type":"change","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"get flow.downloads","rules":[{"t":"set","p":"downloads","pt":"msg","to":"downloads","tot":"flow","dc":true},{"t":"set","p":"modules","pt":"msg","to":"payload.modules","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3434,"y":341.249755859375,"wires":[["f84248691ed06d3d"]]},{"id":"3e5c72bc75ddc5b7","type":"function","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"function 11","func":"msg.downloads = msg.downloads || {}\n\nif (msg.payload.package) {\n    msg.downloads[msg.payload.package] = msg.payload.downloads;\n    \n    return [\n        msg,\n        undefined\n    ]\n} else {\n    return [\n        undefined,\n        msg\n    ]\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2636,"y":456.687255859375,"wires":[["ab60574324c52a44"],["e381d4b2527eb33b","8f2128989276a991"]]},{"id":"ab60574324c52a44","type":"change","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"","rules":[{"t":"set","p":"downloads","pt":"flow","to":"downloads","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3344,"y":448.687255859375,"wires":[["67200a1f56d67d09","8f2128989276a991"]]},{"id":"d8bf6929c3458b1d","type":"inject","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"Trigger download number collection","props":[{"p":"payload"}],"repeat":"9600","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":2856,"y":341.249755859375,"wires":[["5ab1307cde32f1fb"]]},{"id":"0d5024c37044c70a","type":"catch","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"","scope":["81183f4703a06f49"],"uncaught":false,"x":2654,"y":255.499755859375,"wires":[["56d2378be86a91d3","3e34e30ee81ea525"]]},{"id":"56d2378be86a91d3","type":"debug","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"debug 50","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":2838,"y":289.499755859375,"wires":[]},{"id":"df18d1223b13f05a","type":"switch","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"","property":"isempty","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"false","repair":false,"outputs":2,"x":3352,"y":151.999755859375,"wires":[["8250415e5f2c89cd","f84248691ed06d3d"],["81183f4703a06f49"]]},{"id":"8250415e5f2c89cd","type":"debug","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"debug 51","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3904,"y":145.999755859375,"wires":[]},{"id":"312691f152807a49","type":"function","z":"741c6acbed17d504","name":"most downloads last week","func":"var kvs = Object.keys(msg.downloads).map((k) => { return [k, msg.downloads[k]]}).filter( (d) => { return d[0] != \"undefined\" })\nkvs = kvs.sort( (a,b) => { return a[1] < b[1] ? 1 : -1 })\n\nvar orig = [...kvs]\n\nkvs.length = 100;\n\nreturn [\n    {\n        ...msg,\n        payload: [{\n            \"series\": kvs.map((v) => { return v[0] }),\n            \"data\": kvs.map((v) => { return [v[1]] }),\n            \"labels\": [\"Types\"]\n        }]\n    },\n    {\n        ...msg,\n        payload: kvs.map((v) => {\n            var mod = msg.payload.modules.filter((d) => { return d.id == v[0] })[0];\n            return {\n                \"value\": v[0],\n                \"count\": parseInt(v[1]),\n                \"version\": mod.version,\n                \"desc\": mod.description,\n                \"tags\": (mod.keywords || []).map(d => { return { tag: d } })\n            }\n        })\n    },\n    {\n        ...msg,\n        payload: orig\n    }\n]","outputs":3,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1388.999870300293,"y":1489,"wires":[["c9f5e8734dc46760"],["c407ee428bcd3fb7"],["1af6681cc3275b11"]]},{"id":"67659a26f732abce","type":"change","z":"741c6acbed17d504","name":"","rules":[{"t":"set","p":"downloads","pt":"msg","to":"downloads","tot":"flow","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":1059.999870300293,"y":1489,"wires":[["312691f152807a49"]]},{"id":"c9f5e8734dc46760","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"7278d8bced05b3d5","order":1,"width":"16","height":20,"label":"top 100 downloaded packages - last week","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2116.333381652832,"y":1483,"wires":[[]]},{"id":"1af6681cc3275b11","type":"debug","z":"741c6acbed17d504","name":"complete list of download numbers","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1693.9999923706055,"y":1656.666748046875,"wires":[]},{"id":"c407ee428bcd3fb7","type":"template","z":"741c6acbed17d504","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<dl>\n{{#payload}}\n  <dt><b><a target=\"_blank\" href=\"https://flows.nodered.org/search?term={{ value }}\">{{ value}}</a></b> ({{count}})</dt>\n  <dd><i>{{ version }}</i> {{#tags}}{{tag}},{{/tags}}<br><i>{{ desc }}</i></dd>\n{{/payload}}\n</dl>\n","output":"str","x":1688.999870300293,"y":1614,"wires":[["c891cade66e07a2f"]]},{"id":"c891cade66e07a2f","type":"ui_template","z":"741c6acbed17d504","group":"7278d8bced05b3d5","name":"Top 100 downloaded packages (week)","order":4,"width":"16","height":"16","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2096.333381652832,"y":1616,"wires":[[]]},{"id":"793ef02569caa901","type":"ui_template","z":"741c6acbed17d504","group":"7278d8bced05b3d5","name":"TItle 4","order":3,"width":"16","height":1,"format":"<h2>Top 100 downloaded packages - last week numbers</h2>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1996.333381652832,"y":1548,"wires":[[]]},{"id":"359d48a6b99d46c9","type":"change","z":"741c6acbed17d504","g":"9b48b443f84a0653","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"downloads","tot":"flow","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3533,"y":615.3331546783447,"wires":[["e5dee8ee63cc44c3"]]},{"id":"2d9d68e96c33a00b","type":"inject","z":"741c6acbed17d504","g":"9b48b443f84a0653","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3349,"y":615.3331546783447,"wires":[["359d48a6b99d46c9"]]},{"id":"e5dee8ee63cc44c3","type":"function","z":"741c6acbed17d504","g":"9b48b443f84a0653","name":"function 12","func":"msg.payload = Object.keys(msg.payload).length\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3734,"y":615.3331546783447,"wires":[["e927cfffadbcf09a"]]},{"id":"e927cfffadbcf09a","type":"debug","z":"741c6acbed17d504","g":"9b48b443f84a0653","name":"debug 52","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","statusVal":"payload","statusType":"auto","x":3904,"y":615.3331546783447,"wires":[]},{"id":"cb7aa51cff5e5580","type":"http request","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"GET package catalogue","method":"GET","ret":"obj","paytoqs":"ignore","url":"https://catalogue.nodered.org/catalogue.json?_={{ payload }}","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":3245,"y":925.4998054504395,"wires":[["8045064c5212858b"]]},{"id":"0280b91f32c74573","type":"function","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"function 13","func":"msg.versions = msg.versions || {};\n\nvar module = msg.modules.pop();\n\nif ( !module ) {\n    return [ \n        undefined,\n        msg\n    ]\n} else {\n    return [\n        {\n            ...msg,\n            url: \"https://registry.npmjs.org/\" + module.id,\n            module: module,\n            isempty: msg.versions[module.id] == undefined,\n        },\n        undefined\n    ]\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3736,"y":814.7498054504395,"wires":[["8f7f852a46655a05"],["3d4e76c8dc54e012"]]},{"id":"ce3e7eaaf9f9ac2d","type":"http request","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"","method":"GET","ret":"obj","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":true,"headers":[],"x":2558.5000076293945,"y":829.5831804275513,"wires":[["525ff4bef34b3a66"]]},{"id":"f4847a5dba23f723","type":"delay","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":3567.1665649414062,"y":1089.4999046325684,"wires":[["0280b91f32c74573"]]},{"id":"c0740d5553947cfd","type":"debug","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"debug 53","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3904,"y":1024.3748054504395,"wires":[]},{"id":"8045064c5212858b","type":"change","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"get flow.versions","rules":[{"t":"set","p":"versions","pt":"msg","to":"versions","tot":"flow","dc":true},{"t":"set","p":"modules","pt":"msg","to":"payload.modules","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3488,"y":925.4998054504395,"wires":[["0280b91f32c74573"]]},{"id":"525ff4bef34b3a66","type":"function","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"function 14","func":"msg.versions = msg.versions || {}\n\nif (msg.payload._id) {\n    msg.versions[msg.payload._id] = {\n        releases: { ...msg.payload.time },\n        readme: !!msg.payload.readme,\n        readmeFilename: !!msg.payload.readmeFilename,\n        description: msg.payload.description,\n        maintainers: msg.payload.maintainers,\n        contributors: msg.payload.contributors,\n        disttags: { ...msg.payload[\"dist-tags\"] }\n    }\n\n    return [\n        msg,\n        undefined\n    ]\n} else {\n    return [\n        undefined,\n        msg\n    ]\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2716,"y":1031.9998054504395,"wires":[["431906ed74e84938"],["0f31a57b165af276","f4847a5dba23f723"]]},{"id":"431906ed74e84938","type":"change","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"","rules":[{"t":"set","p":"versions","pt":"flow","to":"versions","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3385,"y":1024.3748054504395,"wires":[["c0740d5553947cfd","f4847a5dba23f723"]]},{"id":"8b993b2ec9fecad0","type":"inject","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"Trigger download number collection","props":[{"p":"payload"}],"repeat":"21600","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":2916,"y":924.9998054504395,"wires":[["cb7aa51cff5e5580"]]},{"id":"042c5cb781781ffe","type":"catch","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"","scope":["ce3e7eaaf9f9ac2d"],"uncaught":false,"x":2677,"y":814.4998054504395,"wires":[["a0af637a6816c6e7","edde60f0b0917325"]]},{"id":"a0af637a6816c6e7","type":"debug","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"debug 54","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":2854.333335876465,"y":875.499764919281,"wires":[]},{"id":"8f7f852a46655a05","type":"switch","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"","property":"isempty","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"false","repair":false,"outputs":2,"x":3351.999988555908,"y":733.3331775665283,"wires":[["ad21b0ba9c731507","0280b91f32c74573"],["ce3e7eaaf9f9ac2d"]]},{"id":"ad21b0ba9c731507","type":"debug","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"debug 55","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3902,"y":732.9998054504395,"wires":[]},{"id":"1e4ca5108278c8bd","type":"change","z":"741c6acbed17d504","g":"8ca7d5fd124078bb","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"versions","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":3533,"y":1209.5,"wires":[["8850a08e7b35d028"]]},{"id":"ddd4da103f23a14f","type":"inject","z":"741c6acbed17d504","g":"8ca7d5fd124078bb","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3349,"y":1209.5,"wires":[["1e4ca5108278c8bd"]]},{"id":"8850a08e7b35d028","type":"function","z":"741c6acbed17d504","g":"8ca7d5fd124078bb","name":"function 15","func":"msg.payload = Object.keys(msg.payload).length\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3734,"y":1209.5,"wires":[["cd6ca105174a79b8"]]},{"id":"cd6ca105174a79b8","type":"debug","z":"741c6acbed17d504","g":"8ca7d5fd124078bb","name":"debug 56","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","statusVal":"payload","statusType":"auto","x":3904,"y":1209.5,"wires":[]},{"id":"25bc3304e70968ae","type":"change","z":"741c6acbed17d504","name":"","rules":[{"t":"set","p":"versions","pt":"msg","to":"versions","tot":"flow","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":1059.999870300293,"y":1699.3334217071533,"wires":[["cab121243e501204","884cd3f3c28bfe11"]]},{"id":"cab121243e501204","type":"function","z":"741c6acbed17d504","name":"top maintainers","func":"var maintainers = {}\n\nObject.keys(msg.versions).forEach( (packname) => {\n    (msg.versions[packname].maintainers || []).forEach( (man) => {\n        maintainers[man.name] = (maintainers[man.name] || 0) + 1\n    })\n})\n\nvar kvs = Object.keys(maintainers).map( (k) => { return [k, maintainers[k]]} )\nkvs = kvs.sort((a, b) => { return a[1] < b[1] ? 1 : -1 })\n\nkvs.length = 100;\n\nreturn {\n        ...msg,\n        payload: [{\n            \"series\": kvs.map((v) => { return v[0] }),\n            \"data\": kvs.map((v) => { return [v[1]] }),\n            \"labels\": [\"Maintainer\"]\n        }]\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1330.999870300293,"y":1699.3334217071533,"wires":[["d3960b2b800f214f"]]},{"id":"d3960b2b800f214f","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"fb090f8abca07b18","order":8,"width":12,"height":20,"label":"overall top 100 package maintainers","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2096.333381652832,"y":1699.3334217071533,"wires":[[]]},{"id":"3e34e30ee81ea525","type":"delay","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":3225,"y":252.66650390625,"wires":[["f84248691ed06d3d"]]},{"id":"7795563e2648cb7a","type":"debug","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"done","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3894,"y":322.66650390625,"wires":[]},{"id":"3d4e76c8dc54e012","type":"debug","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"done","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3894,"y":883.4998054504395,"wires":[]},{"id":"edde60f0b0917325","type":"delay","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":3182,"y":809.4998054504395,"wires":[["0280b91f32c74573"]]},{"id":"200dd7b329a4191e","type":"inject","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"Reset","props":[{"p":"payload"}],"repeat":"82800","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":2701.75,"y":394.66650390625,"wires":[["5a18cef8307f4179"]]},{"id":"5a18cef8307f4179","type":"change","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"","rules":[{"t":"set","p":"downloads","pt":"flow","to":"{}","tot":"json","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":2900.75,"y":394.66650390625,"wires":[["5ab1307cde32f1fb"]]},{"id":"b4baba4cbfaebef8","type":"inject","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"Reset","props":[{"p":"payload"}],"repeat":"75600","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":2778.083297729492,"y":981.4998474121094,"wires":[["6f70a024e1b52425"]]},{"id":"6f70a024e1b52425","type":"change","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"","rules":[{"t":"set","p":"versions","pt":"flow","to":"{}","tot":"json","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":2982.083297729492,"y":981.4998474121094,"wires":[["cb7aa51cff5e5580"]]},{"id":"e381d4b2527eb33b","type":"debug","z":"741c6acbed17d504","g":"50d3daf2d40242cd","name":"empty download data","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":2856.75,"y":497.66650390625,"wires":[]},{"id":"0f31a57b165af276","type":"debug","z":"741c6acbed17d504","g":"f98a6a1875c36277","name":"empty version data","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":2942.7500228881836,"y":1091.8333492279053,"wires":[]},{"id":"884cd3f3c28bfe11","type":"function","z":"741c6acbed17d504","name":"active maintainers","func":"var maintainers = {}\n\nvar twelveMonthsAgo = moment().subtract(1,'year')\n\nmsg.payload.modules.filter( (module) => {\n    return Date.parse(module.updated_at) > twelveMonthsAgo\n}).forEach( (module) => {\n    var version = msg.versions[module.id]\n    if ( version ) {\n        (version.maintainers || []).forEach( (mt) => {\n            maintainers[mt.name] = maintainers[mt.name] || {}\n            maintainers[mt.name][module.id] = true\n        })\n    }\n})\n\nvar kvs = Object.keys(maintainers).map((k) => { return [k, Object.keys(maintainers[k]).length] })\nkvs = kvs.sort((a, b) => { return a[1] < b[1] ? 1 : -1 })\n\nvar all_kvs = [...kvs]\n\nkvs.length = 100\n\nreturn [ \n    {\n        ...msg,\n        payload: [{\n            \"series\": kvs.map((v) => { return v[0] }),\n            \"data\": kvs.map((v) => { return [v[1]] }),\n            \"labels\": [\"Maintainer\"]\n        }]\n    },\n    {\n        ...msg,\n        total: all_kvs.length,\n        payload: all_kvs.map((v) => {\n            return {\n                \"value\": v[0],\n                \"count\": parseInt(v[1]),\n                \"modules\": Object.keys(maintainers[v[0]]).map( (d) => { return {name: d}}),\n            }\n        })\n    }\n]\n","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[{"var":"moment","module":"moment"}],"x":1324.9998664855957,"y":1759.9997959136963,"wires":[["3fe13dceb4568af8"],["66ab8082e928f254"]]},{"id":"3fe13dceb4568af8","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"fb090f8abca07b18","order":9,"width":12,"height":20,"label":"top 100 maintainers active last 12 months","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2106.333381652832,"y":1759.9997959136963,"wires":[[]]},{"id":"66ab8082e928f254","type":"template","z":"741c6acbed17d504","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<dl>\n{{#payload}}\n  <dt><b><a target=\"_blank\" href=\"https://www.npmjs.com/~{{ value }}\">{{ value}}</a></b> ({{count}})</dt>\n  <dd>{{#modules}}{{name}},{{/modules}}</dd>\n{{/payload}}\n</dl>\n","output":"str","x":1619.3331298828125,"y":1855,"wires":[["2c424d5c5477f560"]]},{"id":"2c424d5c5477f560","type":"ui_template","z":"741c6acbed17d504","group":"fb090f8abca07b18","name":"Top mainters last year","order":7,"width":12,"height":15,"format":"## Total: {{msg.total}}\n<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2046.333381652832,"y":1853,"wires":[[]]},{"id":"0fc3f42a0142747d","type":"ui_template","z":"741c6acbed17d504","group":"fb090f8abca07b18","name":"TItle 5","order":6,"width":12,"height":1,"format":"<h2>Top Maintainers last 12 months</h2>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1996.333381652832,"y":1803,"wires":[[]]},{"id":"379b1e7bc1488713","type":"http request","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"GET package catalogue","method":"GET","ret":"obj","paytoqs":"ignore","url":"https://catalogue.nodered.org/catalogue.json?_={{ payload }}","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":3175,"y":1528.333251953125,"wires":[["6c76540a2ef329ac"]]},{"id":"f82bed0ba8594cea","type":"function","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"function 17","func":"msg.downloads = msg.downloads || {};\n\nvar module = msg.modules.pop();\n\n/* \n  Url from https://www.edoardoscibona.com/exploring-the-npm-registry-api, possible periods are:\n   - last-year\n   - last-month\n   - last-year\n   - last-day\n*/\nif ( module ) {\n    return [{\n            ...msg,\n            url: \"https://api.npmjs.org/downloads/point/last-month/\" + module.id,\n            module: module,\n            isempty: msg.downloads[module.id] == undefined\n        },\n        undefined\n    ]\n} else {\n    return [\n        undefined,\n        msg\n    ]\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3731,"y":1441.833251953125,"wires":[["e34f354516d86101"],["152b119440a63bc1"]]},{"id":"01c4e8546909eacb","type":"http request","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"","method":"GET","ret":"obj","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":true,"headers":[],"x":2533.5,"y":1460.583251953125,"wires":[["8f0e1ff45bebbf7a"]]},{"id":"b505825f2572ee86","type":"delay","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":3541.166664123535,"y":1682.5833625793457,"wires":[["f82bed0ba8594cea"]]},{"id":"8ff36b94c1512a3c","type":"debug","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"debug 57","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3904,"y":1635.770751953125,"wires":[]},{"id":"6c76540a2ef329ac","type":"change","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"get flow.downloads_last_month","rules":[{"t":"set","p":"downloads","pt":"msg","to":"downloads_last_month","tot":"flow","dc":true},{"t":"set","p":"modules","pt":"msg","to":"payload.modules","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3454,"y":1528.333251953125,"wires":[["f82bed0ba8594cea"]]},{"id":"8f0e1ff45bebbf7a","type":"function","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"function 18","func":"msg.downloads = msg.downloads || {}\n\nif (msg.payload.package) {\n    msg.downloads[msg.payload.package] = msg.payload.downloads;\n    \n    return [\n        msg,\n        undefined\n    ]\n} else {\n    return [\n        undefined,\n        msg\n    ]\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2636,"y":1643.770751953125,"wires":[["9bf3e530f3f846d4"],["0b6fced32cfb7c80","b505825f2572ee86"]]},{"id":"9bf3e530f3f846d4","type":"change","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"","rules":[{"t":"set","p":"downloads_last_month","pt":"flow","to":"downloads","tot":"msg","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3384,"y":1635.770751953125,"wires":[["8ff36b94c1512a3c","b505825f2572ee86"]]},{"id":"5b43686e8d5161aa","type":"inject","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"Trigger download number collection","props":[{"p":"payload"}],"repeat":"12600","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":2856,"y":1528.333251953125,"wires":[["379b1e7bc1488713"]]},{"id":"7b85c12ba013c53d","type":"catch","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"","scope":["01c4e8546909eacb"],"uncaught":false,"x":2654,"y":1442.583251953125,"wires":[["4ccd999609548e4c","447c127e68856e28"]]},{"id":"4ccd999609548e4c","type":"debug","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"debug 58","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":2838,"y":1476.583251953125,"wires":[]},{"id":"e34f354516d86101","type":"switch","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"","property":"isempty","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"false","repair":false,"outputs":2,"x":3352,"y":1339.083251953125,"wires":[["9c05960e1ff6dc3c","f82bed0ba8594cea"],["01c4e8546909eacb"]]},{"id":"9c05960e1ff6dc3c","type":"debug","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"debug 59","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3904,"y":1333.083251953125,"wires":[]},{"id":"447c127e68856e28","type":"delay","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":3225,"y":1439.75,"wires":[["f82bed0ba8594cea"]]},{"id":"152b119440a63bc1","type":"debug","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"done","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":3894,"y":1509.75,"wires":[]},{"id":"d59e0a07f6f84fdf","type":"inject","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"Reset","props":[{"p":"payload"}],"repeat":"79200","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":2701.75,"y":1581.75,"wires":[["4d9b4c52dce3fdf4"]]},{"id":"4d9b4c52dce3fdf4","type":"change","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"","rules":[{"t":"set","p":"downloads_last_month","pt":"flow","to":"{}","tot":"json","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":2919.75,"y":1581.75,"wires":[["379b1e7bc1488713"]]},{"id":"0b6fced32cfb7c80","type":"debug","z":"741c6acbed17d504","g":"83e19bdbfde4f783","name":"empty download data","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":2856.75,"y":1684.75,"wires":[]},{"id":"4e60fdf7e8c4797f","type":"change","z":"741c6acbed17d504","g":"d54435d4060a54b4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"downloads_last_month","tot":"flow","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":3533,"y":1802.4166507720947,"wires":[["850ab2115c8d4cd0"]]},{"id":"08d6c76ad5c973a1","type":"inject","z":"741c6acbed17d504","g":"d54435d4060a54b4","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3349,"y":1802.4166507720947,"wires":[["4e60fdf7e8c4797f"]]},{"id":"850ab2115c8d4cd0","type":"function","z":"741c6acbed17d504","g":"d54435d4060a54b4","name":"function 19","func":"msg.payload = Object.keys(msg.payload).length\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3734,"y":1802.4166507720947,"wires":[["7cc9dd2e4a07ac16"]]},{"id":"7cc9dd2e4a07ac16","type":"debug","z":"741c6acbed17d504","g":"d54435d4060a54b4","name":"debug 60","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","statusVal":"payload","statusType":"auto","x":3904,"y":1802.4166507720947,"wires":[]},{"id":"423676957b2e0deb","type":"function","z":"741c6acbed17d504","name":"most downloads last week","func":"var kvs = Object.keys(msg.downloads).map((k) => { return [k, msg.downloads[k]]}).filter( (d) => { return d[0] != \"undefined\" })\nkvs = kvs.sort( (a,b) => { return a[1] < b[1] ? 1 : -1 })\n\nvar orig = [...kvs]\n\nkvs.length = 100;\n\nreturn [\n    {\n        ...msg,\n        payload: [{\n            \"series\": kvs.map((v) => { return v[0] }),\n            \"data\": kvs.map((v) => { return [v[1]] }),\n            \"labels\": [\"Types\"]\n        }]\n    },\n    {\n        ...msg,\n        payload: kvs.map((v) => {\n            var mod = msg.payload.modules.filter((d) => { return d.id == v[0] })[0];\n            return {\n                \"value\": v[0],\n                \"count\": parseInt(v[1]),\n                \"version\": mod.version,\n                \"desc\": mod.description,\n                \"tags\": (mod.keywords || []).map(d => { return { tag: d } })\n            }\n        })\n    },\n    {\n        ...msg,\n        payload: orig\n    }\n]","outputs":3,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1358.333251953125,"y":1943.333251953125,"wires":[["2c5f56500f8481e0"],["b21394f0fd1529b0"],["05834285812a2153"]]},{"id":"acb70287893b47e6","type":"change","z":"741c6acbed17d504","name":"","rules":[{"t":"set","p":"downloads","pt":"msg","to":"downloads_last_month","tot":"flow","dc":true}],"action":"","property":"","from":"","to":"","reg":false,"x":1029.333251953125,"y":1943.333251953125,"wires":[["423676957b2e0deb"]]},{"id":"2c5f56500f8481e0","type":"ui_chart","z":"741c6acbed17d504","name":"","group":"7278d8bced05b3d5","order":2,"width":"16","height":20,"label":"top 100 downloaded packages - last month","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"hello","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#5cb47c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"useDifferentColor":false,"className":"","x":2116.333381652832,"y":1937.333251953125,"wires":[[]]},{"id":"05834285812a2153","type":"debug","z":"741c6acbed17d504","name":"complete list of download numbers","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1663.3333740234375,"y":2111,"wires":[]},{"id":"b21394f0fd1529b0","type":"template","z":"741c6acbed17d504","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<dl>\n{{#payload}}\n  <dt><b><a target=\"_blank\" href=\"https://flows.nodered.org/search?term={{ value }}\">{{ value}}</a></b> ({{count}})</dt>\n  <dd><i>{{ version }}</i> {{#tags}}{{tag}},{{/tags}}<br><i>{{ desc }}</i></dd>\n{{/payload}}\n</dl>\n","output":"str","x":1658.333251953125,"y":2068.333251953125,"wires":[["e7f7cc8765d42637"]]},{"id":"e7f7cc8765d42637","type":"ui_template","z":"741c6acbed17d504","group":"7278d8bced05b3d5","name":"Top 100 downloaded packages (month)","order":6,"width":"16","height":"16","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2106.333381652832,"y":2070.333251953125,"wires":[[]]},{"id":"dc93aa963ca8683b","type":"ui_template","z":"741c6acbed17d504","group":"7278d8bced05b3d5","name":"TItle 6","order":5,"width":"16","height":1,"format":"<h2>Top 100 downloaded packages - last month numbers</h2>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1996.333381652832,"y":2002.333251953125,"wires":[[]]},{"id":"a8715f06a1e483b2","type":"change","z":"741c6acbed17d504","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1294.999870300293,"y":206.6666660308838,"wires":[["2ba7496fdee9fb94"]]},{"id":"2d23825607b33059","type":"change","z":"741c6acbed17d504","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":263.3333282470703,"y":21.666664123535156,"wires":[["2ba7496fdee9fb94"]]},{"id":"8849e98ce9b9944f","type":"delay","z":"741c6acbed17d504","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":461.66663360595703,"y":78.33331871032715,"wires":[["2d23825607b33059"]]},{"id":"a003e0267c9beae2","type":"ui_spacer","z":"741c6acbed17d504","name":"spacer","group":"0ed53e2825b8c7fb","order":3,"width":1,"height":1},{"id":"0d446e39f83fbf3c","type":"ui_spacer","z":"741c6acbed17d504","name":"spacer","group":"0ed53e2825b8c7fb","order":1,"width":1,"height":1},{"id":"01cb0c42ba918c34","type":"ui_group","name":"Default","tab":"e2ef93495fbb5da3","order":1,"disp":false,"width":"12","collapse":false,"className":""},{"id":"d096a52e52c86d2a","type":"ui_group","name":"Updates per day","tab":"8ac4502aba0c4e9c","order":1,"disp":false,"width":"24","collapse":false,"className":""},{"id":"0ed53e2825b8c7fb","type":"ui_group","name":"Group 1","tab":"1f12665a90cf544e","order":1,"disp":false,"width":"6","collapse":false,"className":""},{"id":"7278d8bced05b3d5","type":"ui_group","name":"Group 1","tab":"b2ec9c01ed6d42e2","order":1,"disp":false,"width":"16","collapse":false,"className":""},{"id":"fb090f8abca07b18","type":"ui_group","name":"Group 1","tab":"f2115eca5656f45f","order":1,"disp":false,"width":"12","collapse":false,"className":""},{"id":"e2ef93495fbb5da3","type":"ui_tab","name":"Package Analysis","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"8ac4502aba0c4e9c","type":"ui_tab","name":"Updates per day","icon":"dashboard","order":5,"disabled":false,"hidden":false},{"id":"1f12665a90cf544e","type":"ui_tab","name":"Refresh data","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"b2ec9c01ed6d42e2","type":"ui_tab","name":"Downloads","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"f2115eca5656f45f","type":"ui_tab","name":"Maintainers","icon":"dashboard","order":4,"disabled":false,"hidden":false}]