[{"id":"be2109bba90b6c5a","type":"tab","label":"[I2C] Scroll pHAT","disabled":false,"info":"::: aim\n\nTo control a [Scroll pHAT](https://github.com/pimoroni/scroll-phat) board from [Pimoroni](https://learn.pimoroni.com/). The idea is to use the [i2c bus](https://en.wikipedia.org/wiki/I%C2%B2C) to control the board.\n\nThe Scroll pHAT board being used is the simplest 5 by 11 LED with a single brightness setting for all pixels.\n\n:::\n\n::: palette\n\n- [node-red-contrib-i2c](https://flows.nodered.org/node/node-red-contrib-i2c)\n- [node-red-dashboard](https://flows.nodered.org/node/node-red-dashboard)\n\n:::\n\n### Requirements\n\nThere are several descriptions on setting up the i2c bus on a Raspberry Pi:\n\n- [i2c-bus documentation ay i2c-bus package](https://github.com/fivdi/i2c-bus/blob/master/doc/raspberry-pi-i2c.md)\n- [the install script for the Scroll pHAT](https://get.pimoroni.com/scrollphat) was helpful\n\nI used a Raspberry Pi Model 4 for doing this, your mileage might vary.\n\n### Background\n\nThe details of the device can be obtained from the [driver](https://github.com/pimoroni/scroll-phat/blob/5a0a47f6e4faac649d89054135baa542889ff3fa/library/scrollphat/IS31FL3730.py#L5-L8) code:\n\n```\nself.I2C_ADDR = 0x60\nself.CMD_SET_MODE = 0x00\nself.CMD_SET_BRIGHTNESS = 0x19\nself.MODE_5X11 = 0b00000011\n```\n\nAnd this [line](https://github.com/pimoroni/scroll-phat/blob/5a0a47f6e4faac649d89054135baa542889ff3fa/library/scrollphat/IS31FL3730.py#L55) that gives the cmd (i.e., 0x01) for setting the pixels:\n\n```\nself.bus.write_i2c_block_data(self.i2cConstants.I2C_ADDR, 0x01, self.window)\n```\n\nAlso each update of the pixels needs to end with [0xff](https://github.com/pimoroni/scroll-phat/blob/5a0a47f6e4faac649d89054135baa542889ff3fa/library/scrollphat/IS31FL3730.py#L52). \n\nSince the device has no state, every update of the pixels needs to update all pixels. This then becomes an array of 11 columns plus 0xff as terminator, meaning that each update must be an array of [12 bytes](https://github.com/pimoroni/scroll-phat/blob/5a0a47f6e4faac649d89054135baa542889ff3fa/library/scrollphat/IS31FL3730.py#L55).\n\nA column can be represented by an array of five entries, one each for the row. These are converted to a byte value using their binary representation:\n\n```\nrow1 - off\nrow2 - on\nrow3 - off\nrow4 - on\nrow5 - off\n ==> - 0b01010 ==> 10 \n```\n\nThis means that an array of:\n\n```\n[10,10,10,10,10, 10,10,10,10,10, 10, 255]\n```\n\nwould light up rows two and four (with 255 being the 0xff terminator).\n\n### Flow explanation\n\nThe mode (which has to be 3) can be set with <a class=\"ahl-group-only\" data-ids=\"d652d4252503fe67\">the mode group</a> and the brightness (anything above zero) can be set <a class=\"ahl-group-only\" data-ids=\"172b914432e0f5bf\">with this group</a>.\n\nThe <a class=\"ahl-group-only\" data-ids=\"b1e519b5af689236\">reset group</a> can be used to turn all leds on or off.\n\nThere is a dashboard for toggling each led on or off and this dashboard is defined by the <a class=\"ahl-group-only\" data-ids=\"1402586a30f105d0\">toggle switch group</a> that is order as the LEDs on the Scroll pHAT.\n\nThe <a class=\"ahl-group-only\" data-ids=\"ab64c81acf44871f\">logic group</a> does a number of things:\n\n- ignore the messages that reset the board (<a class=\"ahl-node-only\" data-ids=\"d0dfd5c2bb23a4c1\">switch</a>)\n- convert the `topic` that contains the location of the toggle to column and row values (<a class=\"ahl-node-only\" data-ids=\"cac24f6fc0bd7d29\">change node</a>)\n- buffer multiple messages into a single array of updates. This prevents sending too many updates to the device but adds an delay of a second to the display update (<a class=\"ahl-node-only\" data-ids=\"66af8b2471b1bd15\">join node</a>)\n- compute the current board configuration and store the state into the flow, create an array of the i2c bus. (<a class=\"ahl-node-only\" data-ids=\"db160558b9740bd7\">function node</a>)\n\n### Dashboard\n\nA dashboard page is created which allows updating each pixel individually:\n\n![img](https://cdn.openmindmap.org/content/1691327372482_Screen_Shot_2023-08-06_at_14.54.26.png)\n\nThe end result of that is\n\n![img](https://cdn.openmindmap.org/content/1691327462428_signal-2023-08-06-145626_002.jpeg)\n\n","env":[]},{"id":"03589edea68a6797","type":"group","z":"be2109bba90b6c5a","name":"Dashboard controlling individual pixels","style":{"label":true},"nodes":["44155e73989ee6cd","a8d4ef53a109f115","de7062b5dfd47cd0","dcc8d33b0b47c2ca","a13498ab11e6218d","80938dc13211e851","cf3e11edefe7d9ee","a4de349e02676964","acbfc402445acb9e","802a96d19ac23855","748b561ba0ca4c10","7694ed83652eb797","b1e519b5af689236","1402586a30f105d0","ab64c81acf44871f"],"x":132.92866401672404,"y":236.50002670288086,"w":2921.214253616333,"h":378.0556640625},{"id":"d652d4252503fe67","type":"group","z":"be2109bba90b6c5a","name":"mode must be 3","style":{"label":true},"nodes":["cc3d51d76f7179f1","bfcc911c0fb1f030","3f86b15127dfcb42","228a0977a6c5031f","6b92d7b66993f06c","1e4f2a41918e023e","f93c334edfe2ffb2","e331b9804652a86d","e808a9451f2f8e36","2db3fca5e3af2279"],"x":568,"y":689,"w":424,"h":481},{"id":"172b914432e0f5bf","type":"group","z":"be2109bba90b6c5a","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["3a582d5c43ac064e","2f333be7f399ebf7","bf7fb8c8d803df33","e8eca45acdcb1707","820963cae3035e02","7e2e9764ef85f17d","c0004b6f2a13b75c","31c455aadc277801","d51476110e0cb04a","857fbba242af03c8"],"x":1018.5,"y":656,"w":422,"h":551},{"id":"b1e519b5af689236","type":"group","z":"be2109bba90b6c5a","g":"03589edea68a6797","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["42928dde21adec92","9345e57d14746ff1"],"x":158.92866401672404,"y":338.92849349975586,"w":173.35736083984375,"h":199.071533203125},{"id":"1402586a30f105d0","type":"group","z":"be2109bba90b6c5a","g":"03589edea68a6797","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["1caa133a21df33f9","3a635e4d0e9a583b","19e1a5013bb34d16","662c4069d1239711","9f891367693bcf8e","76fd6c01ef8fe8fa","04cbd53d0fb77a48","67086e8cf8eb3f63","5b116a11980652c5","f6c05888624a9c40","ae0f23ca013db581","31c6b39eb2dd59bc","54b4753cc69d0bac","53130ad59081df7e","256a9c2b66c23512","4d29f7da14560867","43e413e9569b6ebf","4e4ef6544db88000","59ca3cdd20e1a8a8","48a534615e517101","864cdd9958a1acb3","7988590e8d60fff4","5108fea3f9330ce8","8aff1bc45750b65c","c71ccfbe046214d1","7e83f99b0fd949ac","b9315e45ae6af7a2","9e55653e13700f05","558297730485b28d","43fca37eddc59a08","2e787a317d14fbc2","e8414e26576a6aaf","3b347be872172247","802d773c635b7fd4","2a526cf008a759bc","34f63c7e4151c853","a79a77eba0f99c93","18fc96b752b5bbc4","52c088f46820c014","6a26450d96622ff1","eb8475ba13b1f210","8103f2155eee6a44","55f8b4d3b68e1d91","adec7bd4d9059fd7","4a1f7041b805fd8b","df9bcb72264c3fee","42f777405f2177db","67e5cd0758028c08","3b93b3125bdf3b57","9b50a4e2e34ecbc3","30dc24db56cd2c53","cefe1fe6f71139a7","1345732abc939fbe","4a923822672d36d5","8f78cef9ec527d6f"],"x":663.6428310394292,"y":274.50002670288086,"w":1377.714237213135,"h":309.0277786254883},{"id":"ab64c81acf44871f","type":"group","z":"be2109bba90b6c5a","g":"03589edea68a6797","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["66af8b2471b1bd15","cac24f6fc0bd7d29","db160558b9740bd7","d0dfd5c2bb23a4c1","64fe2177a64e0d73"],"x":2361.50001411438,"y":262.50002670288086,"w":503,"h":326.0556640625},{"id":"a8d4ef53a109f115","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":2181.550926554203,"y":315.10159730911255,"wires":[["64fe2177a64e0d73"]]},{"id":"de7062b5dfd47cd0","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":2181.550926554203,"y":373.34765088558197,"wires":[["64fe2177a64e0d73"]]},{"id":"dcc8d33b0b47c2ca","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":596.7950268864636,"y":314.1851980686188,"wires":[["1caa133a21df33f9","3a635e4d0e9a583b","19e1a5013bb34d16","662c4069d1239711","9f891367693bcf8e","76fd6c01ef8fe8fa","04cbd53d0fb77a48","67086e8cf8eb3f63","5b116a11980652c5","f6c05888624a9c40","ae0f23ca013db581"]]},{"id":"a13498ab11e6218d","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":596.7950268864636,"y":434.4622492790222,"wires":[["5108fea3f9330ce8","b9315e45ae6af7a2","2e787a317d14fbc2","8aff1bc45750b65c","9e55653e13700f05","e8414e26576a6aaf","c71ccfbe046214d1","558297730485b28d","3b347be872172247","7e83f99b0fd949ac","43fca37eddc59a08"]]},{"id":"80938dc13211e851","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":596.7950268864636,"y":372.7476006746292,"wires":[["31c6b39eb2dd59bc","54b4753cc69d0bac","53130ad59081df7e","256a9c2b66c23512","4d29f7da14560867","43e413e9569b6ebf","4e4ef6544db88000","59ca3cdd20e1a8a8","48a534615e517101","864cdd9958a1acb3","7988590e8d60fff4"]]},{"id":"cf3e11edefe7d9ee","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":412.07151897975405,"y":433.8572305951798,"wires":[["dcc8d33b0b47c2ca","80938dc13211e851","a13498ab11e6218d","a4de349e02676964","acbfc402445acb9e"]]},{"id":"a4de349e02676964","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":596.7950268864636,"y":490.9375718832016,"wires":[["802d773c635b7fd4","34f63c7e4151c853","18fc96b752b5bbc4","6a26450d96622ff1","8103f2155eee6a44","2a526cf008a759bc","a79a77eba0f99c93","52c088f46820c014","eb8475ba13b1f210","55f8b4d3b68e1d91","adec7bd4d9059fd7"]]},{"id":"acbfc402445acb9e","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":596.7950268864636,"y":544.1245166063309,"wires":[["4a1f7041b805fd8b","3b93b3125bdf3b57","df9bcb72264c3fee","9b50a4e2e34ecbc3","1345732abc939fbe","42f777405f2177db","30dc24db56cd2c53","4a923822672d36d5","67e5cd0758028c08","cefe1fe6f71139a7","8f78cef9ec527d6f"]]},{"id":"802a96d19ac23855","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":2181.550926554203,"y":433.9296153783798,"wires":[["64fe2177a64e0d73"]]},{"id":"64fe2177a64e0d73","type":"junction","z":"be2109bba90b6c5a","g":"ab64c81acf44871f","x":2395.0305500507357,"y":432.2857151031494,"wires":[["d0dfd5c2bb23a4c1"]]},{"id":"748b561ba0ca4c10","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":2181.550926554203,"y":489.31730484962463,"wires":[["64fe2177a64e0d73"]]},{"id":"7694ed83652eb797","type":"junction","z":"be2109bba90b6c5a","g":"03589edea68a6797","x":2181.550926554203,"y":541.8226735591888,"wires":[["64fe2177a64e0d73"]]},{"id":"3a582d5c43ac064e","type":"i2c out","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"brightness","busno":"1","address":"96","command":"25","payload":"payload","payloadType":"msg","count":"1","x":1344.5,"y":909,"wires":[[]]},{"id":"2f333be7f399ebf7","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"1","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":1114.5,"y":755.625,"wires":[["3a582d5c43ac064e"]]},{"id":"bf7fb8c8d803df33","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"2","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":1114.5,"y":814.25,"wires":[["3a582d5c43ac064e"]]},{"id":"e8eca45acdcb1707","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"0","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":1114.5,"y":697,"wires":[["3a582d5c43ac064e"]]},{"id":"820963cae3035e02","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"3","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"3","payloadType":"num","x":1114.5,"y":872.875,"wires":[["3a582d5c43ac064e"]]},{"id":"7e2e9764ef85f17d","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"4","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"4","payloadType":"num","x":1114.5,"y":931.5,"wires":[["3a582d5c43ac064e"]]},{"id":"c0004b6f2a13b75c","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"5","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"num","x":1114.5,"y":990.125,"wires":[["3a582d5c43ac064e"]]},{"id":"31c455aadc277801","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"6","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"6","payloadType":"num","x":1114.5,"y":1048.75,"wires":[["3a582d5c43ac064e"]]},{"id":"d51476110e0cb04a","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"7","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"7","payloadType":"num","x":1114.5,"y":1107.375,"wires":[["3a582d5c43ac064e"]]},{"id":"857fbba242af03c8","type":"inject","z":"be2109bba90b6c5a","g":"172b914432e0f5bf","name":"8","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"8","payloadType":"num","x":1114.5,"y":1166,"wires":[["3a582d5c43ac064e"]]},{"id":"cc3d51d76f7179f1","type":"i2c out","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"mode","busno":"1","address":"96","command":"0","payload":"payload","payloadType":"msg","count":"1","x":916,"y":930,"wires":[[]]},{"id":"bfcc911c0fb1f030","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"1","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":664,"y":779.875,"wires":[["cc3d51d76f7179f1"]]},{"id":"3f86b15127dfcb42","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"2","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":664,"y":829.75,"wires":[["cc3d51d76f7179f1"]]},{"id":"228a0977a6c5031f","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"0","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":664,"y":730,"wires":[["cc3d51d76f7179f1"]]},{"id":"6b92d7b66993f06c","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"3","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"3","payloadType":"num","x":664,"y":879.625,"wires":[["cc3d51d76f7179f1"]]},{"id":"1e4f2a41918e023e","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"4","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"4","payloadType":"num","x":664,"y":929.5,"wires":[["cc3d51d76f7179f1"]]},{"id":"f93c334edfe2ffb2","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"5","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"num","x":664,"y":979.375,"wires":[["cc3d51d76f7179f1"]]},{"id":"e331b9804652a86d","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"6","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"6","payloadType":"num","x":664,"y":1029.25,"wires":[["cc3d51d76f7179f1"]]},{"id":"e808a9451f2f8e36","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"7","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"7","payloadType":"num","x":664,"y":1079.125,"wires":[["cc3d51d76f7179f1"]]},{"id":"2db3fca5e3af2279","type":"inject","z":"be2109bba90b6c5a","g":"d652d4252503fe67","name":"8","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"8","payloadType":"num","x":664,"y":1129,"wires":[["cc3d51d76f7179f1"]]},{"id":"44155e73989ee6cd","type":"i2c out","z":"be2109bba90b6c5a","g":"03589edea68a6797","name":"pixel","busno":"1","address":"96","command":"1","payload":"payload","payloadType":"msg","count":"12","x":2978.1429176330566,"y":421.00001335144043,"wires":[[]]},{"id":"1caa133a21df33f9","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":1,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c1r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":739.6428310394292,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"3a635e4d0e9a583b","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":2,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c2r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":862.2142547607427,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"19e1a5013bb34d16","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":3,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c3r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":984.7856784820563,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"662c4069d1239711","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":4,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c4r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1107.3571022033698,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"9f891367693bcf8e","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":5,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c5r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1229.9285259246833,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"76fd6c01ef8fe8fa","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":6,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c6r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1352.4999496459968,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"04cbd53d0fb77a48","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":7,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c7r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1475.0713733673103,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"67086e8cf8eb3f63","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":8,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c8r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1597.6427970886236,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"5b116a11980652c5","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":9,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c9r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1720.214220809937,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"f6c05888624a9c40","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":10,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c10r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1842.78564453125,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"ae0f23ca013db581","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":11,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c11r1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1965.3570682525642,"y":315.50002670288086,"wires":[["a8d4ef53a109f115"]]},{"id":"31c6b39eb2dd59bc","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":12,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c1r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":739.6428310394292,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"54b4753cc69d0bac","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":13,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c2r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":862.2142547607427,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"53130ad59081df7e","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":14,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c3r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":984.7856784820563,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"256a9c2b66c23512","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":15,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c4r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1107.3571022033698,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"4d29f7da14560867","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":16,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c5r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1229.9285259246833,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"43e413e9569b6ebf","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":17,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c6r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1352.4999496459968,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"4e4ef6544db88000","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":18,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c7r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1475.0713733673103,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"59ca3cdd20e1a8a8","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":19,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c8r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1597.6427970886236,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"48a534615e517101","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":20,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c9r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1720.214220809937,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"864cdd9958a1acb3","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":21,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c10r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1842.78564453125,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"7988590e8d60fff4","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":22,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c11r2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1965.3570682525642,"y":374.07155990600586,"wires":[["de7062b5dfd47cd0"]]},{"id":"42928dde21adec92","type":"inject","z":"be2109bba90b6c5a","g":"b1e519b5af689236","name":"all off","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"reset","payload":"false","payloadType":"bool","x":256.2860248565678,"y":379.92849349975586,"wires":[["cf3e11edefe7d9ee"]]},{"id":"5108fea3f9330ce8","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":23,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c1r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":739.6428310394292,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"8aff1bc45750b65c","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":26,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c4r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1107.3571022033698,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"c71ccfbe046214d1","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":29,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c7r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1475.0713733673103,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"7e83f99b0fd949ac","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":32,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c10r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1842.78564453125,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"b9315e45ae6af7a2","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":24,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c2r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":862.2142547607427,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"9e55653e13700f05","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":27,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c5r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1229.9285259246833,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"558297730485b28d","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":30,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c8r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1597.6427970886236,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"43fca37eddc59a08","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":33,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c11r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1965.3570682525642,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"2e787a317d14fbc2","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":25,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c3r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":984.7856784820563,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"e8414e26576a6aaf","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":28,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c6r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1352.4999496459968,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"3b347be872172247","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":31,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c9r3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1720.214220809937,"y":435.71435546875,"wires":[["802a96d19ac23855"]]},{"id":"9345e57d14746ff1","type":"inject","z":"be2109bba90b6c5a","g":"b1e519b5af689236","name":"all on","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"reset","payload":"true","payloadType":"bool","x":254.92866401672404,"y":497.00002670288086,"wires":[["cf3e11edefe7d9ee"]]},{"id":"802d773c635b7fd4","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":34,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c1r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":739.6428310394292,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"2a526cf008a759bc","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":39,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c6r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1352.4999496459968,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"34f63c7e4151c853","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":35,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c2r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":862.2142547607427,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"a79a77eba0f99c93","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":40,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c7r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1475.0713733673103,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"18fc96b752b5bbc4","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":36,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c3r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":984.7856784820563,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"52c088f46820c014","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":41,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c8r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1597.6427970886236,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"6a26450d96622ff1","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":37,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c4r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1107.3571022033698,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"eb8475ba13b1f210","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":42,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c9r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1720.214220809937,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"8103f2155eee6a44","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":38,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c5r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1229.9285259246833,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"55f8b4d3b68e1d91","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":43,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c10r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1842.78564453125,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"adec7bd4d9059fd7","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":44,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c11r4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1965.3570682525642,"y":490.57180404663086,"wires":[["748b561ba0ca4c10"]]},{"id":"4a1f7041b805fd8b","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":45,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c1r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":739.6428310394292,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"df9bcb72264c3fee","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":46,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c3r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":984.7856784820563,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"42f777405f2177db","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":47,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c6r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1352.4999496459968,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"67e5cd0758028c08","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":48,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c9r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1720.214220809937,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"3b93b3125bdf3b57","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":45,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c2r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":862.2142547607427,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"9b50a4e2e34ecbc3","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":46,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c4r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1107.3571022033698,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"30dc24db56cd2c53","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":47,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c7r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1475.0713733673103,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"cefe1fe6f71139a7","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":48,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c10r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1842.78564453125,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"1345732abc939fbe","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":46,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c5r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1229.9285259246833,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"4a923822672d36d5","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":47,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c8r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1597.6427970886236,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"8f78cef9ec527d6f","type":"ui_switch","z":"be2109bba90b6c5a","g":"1402586a30f105d0","name":"","label":"","tooltip":"","group":"afbdfc413e8cce91","order":48,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"c11r5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":1965.3570682525642,"y":542.5278053283691,"wires":[["7694ed83652eb797"]]},{"id":"66af8b2471b1bd15","type":"join","z":"be2109bba90b6c5a","g":"ab64c81acf44871f","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"1","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2617.00782661438,"y":446.68227767944336,"wires":[["db160558b9740bd7"]]},{"id":"cac24f6fc0bd7d29","type":"change","z":"be2109bba90b6c5a","g":"ab64c81acf44871f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\t    \"val\": $$.payload,\t    \"key\": $$.topic,\t    \"col\": $parseInteger($replace($replace($$.topic,/c/,''),/r.+$/,''), \"99\"),\t    \"row\": $parseInteger($replace($replace($$.topic,/c[0-9]+/,''),/r/,''), \"99\")\t}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":2539.92872505188,"y":374.71426010131836,"wires":[["66af8b2471b1bd15"]]},{"id":"db160558b9740bd7","type":"function","z":"be2109bba90b6c5a","g":"ab64c81acf44871f","name":"prepare data and store \\n state into the flow context","func":"/* Pixels are columns first:\n  [ c1, c2, c3 .... c11, 255 ]\nwhere each 'c' is an array of 5 values representing the rows.\n*/\n\nvar pixels = flow.get(\"pixels\") || [1,2,3,4,5,6,7,8,9,10,11].map(function (d) { return new Array(0,0,0,0,0) })\n\nfor ( var idx = 0 ; idx < msg.payload.length ; idx++ ) {\n  var p = msg.payload[idx];\n  pixels[p.col-1][5-p.row] = p.val ? 1 : 0;\n}\n\nflow.set('pixels', pixels);\n\nmsg.payload = [...pixels.map( (vals) => {\n  return eval(\"0b\" + vals.join(\"\"))\n}), 255];\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2728.50001411438,"y":535.5556907653809,"wires":[["44155e73989ee6cd"]]},{"id":"d0dfd5c2bb23a4c1","type":"switch","z":"be2109bba90b6c5a","g":"ab64c81acf44871f","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":2437.50001411438,"y":303.50002670288086,"wires":[[],["cac24f6fc0bd7d29"]]},{"id":"46128c98520b39bb","type":"ui_spacer","z":"be2109bba90b6c5a","name":"spacer","group":"afbdfc413e8cce91","order":49,"width":7,"height":1},{"id":"afbdfc413e8cce91","type":"ui_group","name":"Scroll pHAT Display","tab":"993bd221027b291c","order":1,"disp":true,"width":"11","collapse":false,"className":""},{"id":"993bd221027b291c","type":"ui_tab","name":"Home","icon":"dashboard","disabled":false,"hidden":false}]