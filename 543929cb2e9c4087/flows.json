[{"id":"543929cb2e9c4087","type":"tab","label":"Content Management","disabled":false,"info":"","env":[]},{"id":"d3554b91a0f65475","type":"group","z":"543929cb2e9c4087","name":"Retrieving Content","style":{"label":true,"label-position":"sw","color":"#3f3f3f"},"nodes":["3705237a18806fd1","fea152e97a93e763","ae30f0b47f1631f6","d2d23f91bc977735","42e2958493aac493","0f8d4598be1e4e13","70d09a3f4fb02e3d","23c90b00033b6f55"],"x":213,"y":283,"w":631,"h":363},{"id":"aa2decf2d69998ae","type":"group","z":"543929cb2e9c4087","name":"Upload by URL","style":{"label":true,"label-position":"sw","color":"#000000"},"nodes":["564e02c8cfa47c94","d46a4d5078790d64","f92e1db33e529de3","38b52396192f58c7","b3ab5338202ec4af","93c42c3372b8ce17","5e38b19f8720066c","b2f171fcfb5888f7","5105c71ef82667e0","ed202ff749c3638f","e7314418a4f5711a","311836af450a2a83","98d342e6b26263bd","b81f894c6eef09ee","ae465350dde2a56a"],"x":209.55563354492188,"y":1079.8888359069824,"w":1743.222499847412,"h":522.6666831970215},{"id":"365da6f212399911","type":"group","z":"543929cb2e9c4087","name":"Retrieving Screenshot","style":{"label":true,"label-position":"sw","color":"#3f3f3f"},"nodes":["7f4412c2c97d442d","c013c2a68455b629","9c4dac4933c82cbb","535c32c9acc84bed","0127edf2dd61aae1","fb699620012a5276","41c6b348d4738cd4","5c1be2f6e559bf25"],"x":209.77780151367188,"y":672.888916015625,"w":631,"h":363},{"id":"d44887dafa5f25a8","type":"group","z":"543929cb2e9c4087","name":"Screenshot post flow","style":{"label":true,"label-position":"sw","color":"#000000"},"nodes":["03f322255fd8cad1","a9f9ce494ec4edc1","c81d27b03cf13c69","00c967aaf678c503","e62ae897ba4c777f","170832232b87a999","dbe92f5fc46e8510","7548d1bd1baa829d","2a661a27149b122c","162050749f61b956","14ba97a0d41f5494","d3f31ca68ccbc82c","f8752e78756f8742","9169ab1abbd8a902","33c2018184e5c112","5716315fb1f03e70","40f89409b72aedde","b3e17d2fc9a0c423","0ecd16d680721886","9b450d5a6ea87963","55b87a21ffc95990","de10299bae5ad82d","db3c6b840d925f59","5beeec69cb40210a","3e64ec1fc3019b9d"],"x":198.75008392333984,"y":1681.2778129577637,"w":2601.9168395996094,"h":357.7220649719238},{"id":"20b77a8b7c7caed7","type":"group","z":"543929cb2e9c4087","name":"Upload by local file","style":{"label":true,"label-position":"sw"},"nodes":["fc05c81222164d70","0ff5ee7e1c498515","4027586694c61f7c","1452cc35100518f7","38743bd0c91a72e2","19c3214738ab7c39","f51bd87a446a17a1","917826367a58328f","b68ced0d20422ef5","260286ce89cb35bf","d74c082ee1f7d9bd","1e1fbaac38048999","1924ae935c6999d9","33b7bae610e669b9","c68ca4c3939a8525","e98889dd8616d323","a86d93ab3fda9881","8b69f49f4fead880","6547502f9a15e924","b1c27774f6f1b398","b09cc8d12b02d0a2","7b7e38a557683770","742d750b96805e71","98bd36e475bf69ca","279958613146fa1b","252f484b4b6c3202","1d0bdb7e0ca1dcf2","8bdcf0464a3270ca"],"x":867.666316986084,"y":437.11111640930176,"w":2745.667179107666,"h":510.00008964538574},{"id":"3705237a18806fd1","type":"http in","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"","url":"/content/:path","method":"get","upload":false,"swaggerDoc":"","x":329,"y":324,"wires":[["ae30f0b47f1631f6"]]},{"id":"fea152e97a93e763","type":"file in","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"","filename":"filename","filenameType":"msg","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":359,"y":444,"wires":[["23c90b00033b6f55"]]},{"id":"ae30f0b47f1631f6","type":"function","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"set filename","func":"msg.filename = \"/data/content/\" + msg.req.params.path;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":349,"y":385,"wires":[["fea152e97a93e763"]]},{"id":"d2d23f91bc977735","type":"http response","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"svg","statusCode":"","headers":{"content-type":"image/svg+xml"},"x":758,"y":472,"wires":[]},{"id":"42e2958493aac493","type":"catch","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"","scope":["fea152e97a93e763","ae30f0b47f1631f6","3705237a18806fd1"],"uncaught":false,"x":368,"y":597,"wires":[["0f8d4598be1e4e13"]]},{"id":"0f8d4598be1e4e13","type":"function","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"statusCode 404","func":"msg.statusCode = 404;\nmsg.payload = {\n    status: \"not_found\",\n    msg: \"page not found\",\n    path: msg.req.originalUrl\n};\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":339,"y":532.5,"wires":[["70d09a3f4fb02e3d"]]},{"id":"5c18713dccad90b7","type":"Observation","z":"543929cb2e9c4087","name":"Content Management for the mindmap - uploading of image,pdfs,.. external content","info":"Allows uploading content and retrieving that very same content. All content is stored in the ```/content``` directory in the ```/data``` folder.\n\ncan be used at http://localhost:2880/ui/#!/1","createdAt":"2023-07-03T08:08:48.539Z","updatedAt":"2023-07-03T11:41:28.413Z","x":722,"y":106,"wires":[[]]},{"id":"70d09a3f4fb02e3d","type":"http response","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"gif,jpg,pdf","statusCode":"","headers":{},"x":758,"y":547,"wires":[]},{"id":"23c90b00033b6f55","type":"switch","z":"543929cb2e9c4087","g":"d3554b91a0f65475","name":"content type check","property":"filename","propertyType":"msg","rules":[{"t":"cont","v":".svg","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":541,"y":478,"wires":[["d2d23f91bc977735"],["70d09a3f4fb02e3d"]]},{"id":"03f322255fd8cad1","type":"http in","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"[POST] screenshot","url":"/screenshot","method":"post","upload":false,"swaggerDoc":"","x":314.75008392333984,"y":1862.5277824401855,"wires":[["a9f9ce494ec4edc1","dbe92f5fc46e8510","14ba97a0d41f5494","d3f31ca68ccbc82c"]]},{"id":"a9f9ce494ec4edc1","type":"function","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"respond with ok","func":"msg.payload = {\n    status: \"ok\",\n    data: {\n    }\n};\nmsg.statusCode = 200;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":668.7223205566406,"y":1976.8058137893677,"wires":[["e62ae897ba4c777f"]]},{"id":"c81d27b03cf13c69","type":"function","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"set filename & payload","func":"msg.filename = \"/data/screenshots/\" + (msg.payload[\"filename_prefix\"] || \"screenshot\") + \"-forprint-\" + (msg.payload.screenshot_tstamp || Date.now()) + \".svg\";\n\nmsg.payload = msg.payload.d;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1276.4444732666016,"y":1826.1668281555176,"wires":[["00c967aaf678c503"]]},{"id":"00c967aaf678c503","type":"file","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","filename":"filename","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":1518.7223052978516,"y":1901.6389961242676,"wires":[["f8752e78756f8742"]]},{"id":"e62ae897ba4c777f","type":"http response","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","statusCode":"","headers":{"content-type":"application/json"},"x":884.9724464416504,"y":1976.7502336502075,"wires":[]},{"id":"170832232b87a999","type":"ui_svg_graphics","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","group":"59d911c2f1895a37","order":1,"width":16,"height":16,"svgString":"<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\"\n    xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 1931.9987 2181.5611\" id=\"svg155562\" version=\"1.1\" viewbox=\"0 0 193 258\" height=\"376.131\"\n    width=\"333.103\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" preserveAspectRatio=\"xMinYMin meet\">\n    <rect id=\"svgEditorBackground\" x=\"0\" y=\"0\" width=\"1932\" height=\"2181.56\" style=\"fill:none;stroke:none\" />\n    <metadata id=\"metadata155568\">\n        <rdf:RDF>\n            <cc:Work rdf:about=\"\">\n                <dc:format>image/svg+xml</dc:format>\n                <dc:type rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n                <dc:title />\n            </cc:Work>\n        </rdf:RDF>\n    </metadata>\n    <defs id=\"defs155566\" />\n    <path d=\"m 996.38796,1806.7105 c 0,0 0,0 0,0\" id=\"open-mind-center-point\" stroke-width=\"0\" stroke=\"none\" fill=\"none\"\n        __id__=\"_fcnone_scnone_sw0_nmopen-mind-center-point_\" />\n    <path d=\"m 1739.738,1821.7105 c 0,0 -1416.00004,-28 -1416.00004,-28 0,0 1416.00004,28 1416.00004,28 z\"\n        id=\"open-mind-path\" stroke-width=\"0\" stroke=\"none\" fill=\"none\" __id__=\"_fcnone_scnone_sw0_nmopen-mind-path_\" />\n    <path d=\"m 1175.738,949.71048 c 9,-7 122,-33 172,68.00002 0,0 -172,-68.00002 -172,-68.00002 z\"\n        id=\"draw-path-and-center-point\" stroke-width=\"0\" stroke=\"none\" fill=\"none\"\n        __id__=\"_fcnone_scnone_sw0_nmdraw-path-and-center-point_\" />\n    <path d=\"m 992.73796,1196.7105 c 0,0 0,0 0,0\" id=\"center-pt\" stroke-width=\"0\" stroke=\"none\" fill=\"none\"\n        __id__=\"_fcnone_scnone_sw0_nmcenter-pt_\" />\n    <path\n        d=\"m17.737959,2127.7105c-4,0,44,-744,44,-744c-15.2187,-34.67,435.122001,-293.43,552.500001,-320.5c0,-0.5,-13.5,-19.5,-16,-22.5c-240.5,17,-312.583,-298.99002,-194.505,-305.13002c-110,-233.996,-117.995,-529.87,96.005,-645.869996c209,-141,640.00004,-55,653.00004,85.999996c3.85,20.808,107,134,181,216c0,0,15,79.125,15,79c-0.12,-0.125,49.2,5.204,49.2,5.204c69.52,-14.823,95.6,-45.325,129.32,84.853c13,68,47.48,130.943,-24.52,166.943c0,0,-52,24,-52,24c0,0,-3,94,-3,94c1,2,27,2,29,1c126,-67,137.55,3.36,161,67c23,84,39,102.00002,-37,150.00002c60,20,245,102,273,142c0,0,40,958,40,958c0,0,-1892.000041,-36,-1896.000041,-36Z\"\n        id=\"background\" __id__=\"_fcblack_scwhite_sw35_nmbackground_\"\n        style=\"stroke:#40E0D0;stroke-width:35;fill:#000000\" />\n    <path\n        d=\"m1122.738,209.71048c-75,138,-193.00004,156,-331.00004,128c-36,-3,-172,-21,-224,8c-17,38,18,104,34,120c-58,92,-48,177,36,326c-29,1,-104.212,-7.55,-104.17,-7.57c0,0,-25.83,3.57,-25.83,3.57c-19.114,-6.88,-12.507,-7.66,-38.065,-13.28c-99.677,-7.67,-78.926,78.83,-19.935,149.28c30,51,127,113.00002,169,36c0,0,11,38,11,36c132,211.00002,149,232.00002,338,282.00002c134.00004,29,219.00004,28,292.00004,26c118,-35,102.88,-27.25,131.06,-155.12c0.05,0,-152.62,67.37,-234.44,88c-40.21,12.03,-45.42,-18.47,-49.84,-19.26c-52.94,-19.93,-82.16,-31.28,-125.12404,-48.81c-38.5,15.47,-48.812,4.81,-59.125,-7.56c-20.625,-21.66,-39.187,-55.34,-60.156,-101.75c-15.125,-37.12,0.344,-43.66,21.313,-61.88002c73.562,-34.37,404.25204,-150.56,465.09204,-172.21c18.56,-6.88,37.47,15.47,41.25,31.28c0,-0.35,18.22,1.72,17.97,1.31c-4,-4,0.31,-84.84,-0.44,-100.31c-98.3,36.97,-230.18,94.22,-378.81,136.12c-14.94,10.75,-37.43204,4.1,-49.70004,-12.26c-38.337,-22.49,-60.828,-27.09,-107.855,-53.67c-28.669,10.24,-43.448,0.51,-60.317,-22.49c-21.979,-35.27,-39.87,-74.117,-61.85,-123.699c-26.069,-49.072,-33.225,-88.942,43.96,-121.145c142.102,-50.605,255.58204,-79.741,414.00204,-123.52c55.83,-20.264,74.86,-10.339,86.02,47.971c0,-0.414,15.72,0,15.72,-0.414c-2.49,-24.399,-10.88,-46.298,-13.73,-57.583c-60,-69,-118,-130,-172,-217Z\"\n        id=\"face\" __id__=\"_fcwhite_scwhite_sw1_nmface_\" style=\"fill:#ffffff;stroke:#ffffff;stroke-width:1\" />\n    <path\n        d=\"m960.89796,724.33848c-17.891,-42.937,-11.757,-47.026,26.58,-62.361c49.56004,-21.262,202.42004,-77.697,315.90004,-112.967c50.6,-19.424,93.55,-34.698,114.5,-40.381c54.69,-15.335,51.62,-5.112,64.4,33.736c3.58,22.491,15.74,84.53,15.34,105.299c7.15,42.427,-5.11,37.826,-49.58,55.206c-19.81,8.228,-128.86,54.89,-164.09,72.58c-24.53,9.72,-166.12,66.46,-200.88,76.17c-36.81,11.24,-72.08,18.4,-86.90004,-15.34c-15.846,-33.73,-21.469,-79.23,-35.27,-111.942Zm-48.05,-12.268c-23.669,-9.144,-119.1,-45.493,-133.923,-44.982c6.133,16.869,46.004,102.742,60.316,122.682c13.291,7.66,87.409,44.98,114.5,53.16c-9.201,-32.72,-35.27,-118.592,-40.893,-130.86ZM1040.128,1101.0605c6.64,14.32,30.16,62.36,40.38,81.28c-27.6,-7.67,-120.12204,-46.52,-136.47904,-53.67c-16.101,-6.39,-20.446,-14.32,-23.002,-19.94c-6.389,-8.69,-20.702,-39.61,-24.536,-49.33c-9.967,-20.95,-9.967,-24.02,13.291,-11.5c29.136,15.34,95.32604,41.41,130.34604,53.16Zm44.47,10.23c-1.19,0.98,35.78,63.89,47.03,71.05c13.29,20.96,51.62,11.24,71.56,2.55c35.63,-8.83,144.49,-53.86,243.31,-98.14c65.43,-28.11,109.39,-47.54,133.41,-62.87c32.72,-17.38,27.1,-20.45,26.58,-54.70002c0,0,-16.86,-70.02,-17.89,-70.02c-9.71,-32.72,-20.44,-31.19,-55.71,-23.01c-155.39,47.54,-369.06,146.71002,-423.75,164.09002c-56.23,17.37,-40.39,47.02,-24.54,71.05Z\"\n        id=\"draw-faces\" __id__=\"_fcwhite_scwhite_sw1_nmdraw-faces_\"\n        style=\"fill:#ffffff;stroke:#ffffff;stroke-width:1\" />\n    <path\n        d=\"m520.53296,899.16048c0,0,33.481,61.08,33.481,61.08c0,0,-32.459,-0.77,-32.459,-0.77c0,0,-29.817,-49.76,-29.817,-49.76c-17,-7,-36,-22,-24,-50c5.768,-8.09,8.835,-9.88,22,-12c24.406,0.84,36.162,13.11,30.795,51.45Zm-9.795,-73.45c-22,-21,-53,-36,-78,-18c-19,30,-2,51,15,86c0,-17,-10,-45,9,-61c16,-17,34,-13,54,-7Z\"\n        id=\"face-ear-hole\" __id__=\"_fcblack_scblack_sw1_nmface-ear-hole_\"\n        style=\"fill:#000000;stroke:#000000;stroke-width:1\" />\n    <path\n        d=\"m1078.738,727.71048c7,44,53,59,93,38c13,-9,29,-34,22,-64c-6,-40,-81,-77,-109,-7c38,-35,59,-6,51,21c-6,30,-40,29,-57,12Zm217,-70c34,19,50,1,54,-21c0,-28,-31,-43,-51,-17c1,-50,87.44,-42.586,104,-4c8.49,31.443,2.87,46.267,-14.51,67.735c-26.07,22.492,-71.49,22.265,-92.49,-25.735Zm-100,436.00002c-8.75,-9.5,3,-33,7,-37c0,0,44,-26,44,-26c25.25,-9.25,41,-3.25,46,19c1,33,21,21,84,-4c64,-29,77,-26,59,-58.00002c-22.99,-35.06,10.75,-40,24.5,-44.5c31,-13,53.25,-16.75,52.75,-0.75c-1,14.5,1.25,23.25,-21.75,28.25c-23,6,-23.75,1.5,-14.5,29.75002c16.75,35.25,-23,57.25,-80,79.25c-54,22,-113,54,-126,10c-5,-20,-3,-30,-29,-17c-15.04,11.48,-25.26,19.15,-46,21Z\"\n        id=\"face-eyes-mouth\" __id__=\"_fcblack_scblack_sw1_nmface-eyes-mouth_\"\n        style=\"fill:#000000;stroke:#000000;stroke-width:1\" />\n    <path\n        d=\"m587.64996,1640.4105c0,-31.13,27.794,-67.82,96.724,-66.15c121.436,-5.94,464.20404,-2.91,635.93404,5c93.14,1.67,107.51,35.71,114.52,102.28c6.28,106.82,4.15,162.67,-1.12,273.5c-0.58,59.37,1.55,80.65,-84.49,86.72c-143.47,6.45,-585.72204,-3.41,-644.27604,-5.56c-83.383,-3.34,-114.513,-6.12,-121.739,-87.83c-7.783,-90.06,-2.78,-251.26,4.447,-307.96Z\"\n        id=\"border-open-mind\" __id__=\"_fcblack_scwhite_sw35_nmborder-open-mind_\"\n        style=\"fill:#000000;stroke:#ffffff;stroke-width:35\" />\n    <path\n        d=\"m634.82396,1800.5505c-0.46,-20.72,3.55,-106.96,5.769,-126.93c6.658,-32.84,16.421,-48.82,56.949,-51.74c0,0,233.305,-4.63,233.305,-4.63c0,0,370.91104,5.16,370.91104,5.16c64.03,1.5,83.55,11.71,87.99,61.86c0,0,3.49,120.58,3.49,120.58c0,0,-758.41404,-4.3,-758.41404,-4.3Zm627.55404,42.16c0,0,-3.55,53.59,-3.77,80.33c0.33,6.22,1.22,10.21,4.66,10.21c0,0,35.94,0.44,35.94,0.44c11.54,-1.77,12.19,-98.26,11.99,-98.08c-0.22,-9.1,-1.78,-15.98,-9.32,-15.98c0,0,-22.19,0,-22.19,0c-17.76,1.78,-15.54,11.1,-17.31,23.08Zm0.89,101.19c-5.33,1.33,-6,2.89,-6.88,7.99c0,0,-0.23,14.87,-0.23,14.87c1.11,3.88,1.67,3.77,6.22,3.99c0,0,31.29,0.67,31.29,0.67c4.88,-0.45,6.88,-0.22,7.54,-5.99c0,0,0.89,-13.32,1.11,-13.54c-0.44,-4.77,-0.44,-5.77,-7.1,-6.66c0,0,-31.95,-1.11,-31.95,-1.33Zm-156.63,28.91c-10.46,-0.58,-13.07,-0.29,-13.65,-12.78c-0.29,-31.09,4.65,-99.64,7.26,-125.79c1.45,-12.49,4.07,-15.39,17.72,-15.68c0,0,51.42,-0.29,51.42,-0.58c44.73,1.74,50.5,37.1,48.51,74.07c-2.1,39.01,-15.98,80.18,-62.75,80.76c0,0,-48.51,0,-48.51,0Zm-44.73,-156.58c13.94,2.04,16.26,4.07,16.55,16.85c0,0,-4.94,121.72,-4.94,121.72c-0.58,8.42,-2.9,20.04,-13.07,19.46c-0.29,0,-28.17,-0.29,-28.17,-0.29c0,0,-47.06404,-78.14,-47.06404,-78.14c0,0,-1.453,59.55,-1.162,59.55c-1.453,10.46,-2.034,18.88,-13.944,19.17c0,0,-23.239,-0.58,-23.239,-0.58c-7.553,0.29,-10.167,-6.68,-9.005,-14.23c-0.581,-23.24,4.357,-114.46,6.681,-130.73c1.453,-9,0,-12.78,11.62,-13.36c0.29,0,28.758,0.29,28.758,0.29c0,0,47.93504,68.56,47.93504,68.56c0,0,4.93,-59.84,4.93,-59.84c0.3,-5.81,1.17,-7.27,8.72,-8.43c0,0,15.4,0,15.4,0Zm-192.89004,21.21c0.871,-16.27,1.452,-22.08,18.882,-23.24c0,0,14.815,0,14.815,0c10.748,-0.58,13.943,4.36,12.2,15.98c-3.486,28.17,-6.391,97.02,-6.1,128.1c-0.581,7.56,0.29,15.11,-16.267,14.82c0,0,-19.173,0,-18.882,0c-8.425,-0.29,-9.586,-5.81,-11.329,-22.37c-0.872,-26.43,4.357,-93.83,6.681,-113.29Zm-134.933,119.24c0.214,1.07,0.994,-66.62,-0.145,-77.99c0,0,24.692,24.98,24.692,24.98c4.067,3.92,7.407,5.23,10.893,0.73c0,0,16.703,-17.29,16.703,-17.29c-1.016,15.83,-3.34,52,-2.324,66.52c0.291,11.91,2.034,14.82,10.167,15.98c0,0,24.983,1.16,24.983,1.16c8.86,-0.58,9.005,-2.32,11.764,-13.79c3.922,-24.55,5.665,-104.44,5.665,-122.45c0.29,-9.58,-2.033,-17.72,-11.91,-18.59c0,0,-19.172,-0.29,-19.172,-0.29c-5.229,-0.58,-7.553,1.16,-10.749,4.65c0,0,-29.339,40.09,-29.339,40.09c0,0,-38.345,-43,-38.345,-43c0,0,-32.244,-1.45,-31.954,-1.45c-10.748,1.75,-10.167,6.39,-10.167,12.49c-6.1,24.11,-6.391,98.19,-4.067,127.82c0,10.75,5.229,15.54,11.329,16.41c0.291,0,31.519,0.44,31.519,0.44c9.005,-0.73,10.021,-3.34,10.457,-16.42Z\"\n        id=\"text\" __id__=\"_fcwhite_scwhite_sw1_nmtext_\" style=\"stroke:#ffffff;stroke-width:1;fill:#ffffff\" />\n    <path\n        d=\"m1140.658,1847.8605c-1.04,0,-6.36,92.68,-6.36,92.68c44.39,1.34,43.16,-18.4,47.75,-46.87c-1.25,-19.38,2.86,-40.97,-41.39,-45.81Zm-425.05704,-209.7c-35.038,32.61,-32.445,45.06,-36.983,75.04c-0.359,60.32,26.57,70.74,58.886,76.84c40.932,-6.46,59.963,-35.55,64.347,-64.2c7.464,-59.67,-38.136,-111.38,-86.25,-87.68Zm114.54,13.64c0.001,-9.5,0.718,-19.39,12.113,-20.23c19.125,-2.39,30.974,-2.39,51.797,3.11c48.116,22.87,28.368,77.45,11.851,88.94c-8.258,6.1,-39.653,23.52,-39.822,19.83c0,0,-0.751,34.38,-0.751,34.38c0.359,6.47,-2.873,11.85,-12.716,11.21c0,0,-19.683,0,-19.683,0c-1.712,-28.8,-3.866,-110.67,-2.789,-137.24Zm125.671,-5.38c0.401,-11.35,9.207,-14.29,15.439,-14.36c0,0,66.06704,0.35,66.06704,0.35c2.87,4.67,2.15,21.55,-0.36,26.22c0,0,-43.45004,0,-43.45004,0c-2.868,3.59,-2.868,29.08,-1.07,32.67c11.51004,2.34,24.05004,-2.51,36.29004,-0.68c1.22,5.33,3.21,25.1,-2.18,31.2c0,0,-32.01004,-0.12,-32.01004,-0.12c-5.334,12.69,-5.693,21.3,-2.821,30.64c0,0,34.11104,0,34.11104,0c7.9,0.72,8.26,2.87,8.1,9.4c0.64,8.02,0.43,19,-4.53,23.87c-45.61304,2.5,-76.45904,5.87,-76.65704,-18.65c0,-0.79,-2.025,-83.65,3.071,-120.54Zm132.99604,-4.49c-4.45,35.73,-0.86,112.92,0,134.67c0.21,8.41,2.01,10.93,11.4,10.36c0,0,28.31,0.57,28.31,0.57c4.93,-15.04,-0.1,-67.78,3.23,-71.81c4.22,4.04,41.85,72.89,44.17,72.88c0,0,30.2,0,31.23,0c12.57,1.08,10.78,-14.72,10.12,-29.61c0.61,-12.12,1.37,-86.9,1.37,-112.21c0.09,-10.69,-0.89,-11.67,-5.74,-12.21c0,0,-20.11,-0.36,-20.11,-0.36c-9.67,-0.83,-14.72,0,-16.96,8.76c-1.65,-3.09,-1.53,65.33,-3.11,73.55c-5.1,-3.18,-30.87,-70.52,-45.64,-84.46c0,0,-24.41,-2.16,-24.41,-2.16c-10.34,2.56,-12.21,4.31,-13.86,12.03Zm179.99,26.94c-7.7,0.33,-7.36,0,-7.7,-9.04c0,0,-0.67,-14.05,-0.67,-14.05c0.67,-7.03,0.67,-9.37,12.38,-10.37c10.43,-0.62,33.8,-1.34,47.51,2.68c25.76,10.7,15.06,56.2,8.36,62.23c-23.08,16.72,-23.08,38.81,-22.75,54.86c0,0,-23.4,-0.33,-23.4,-0.33c-6.37,0.67,-6.71,-2.01,-6.21,-7.25c-1.84,-12.82,8.53,-41.6,13.47,-48.69c0,0,13.8,-13.98,13.8,-13.98c7.7,-11.38,2.68,-16.4,-6.02,-16.4c0,0,-28.77,0.34,-28.77,0.34Zm11.71,99.53c0,0,16.39,0.17,16.39,0.17c8.87,0,7.86,1.17,9.46,5.96c0,0,0.58,8.09,0.58,8.09c-1.34,8.03,-2.51,10.54,-10.38,10.71c0,0,-17.39,-0.67,-17.39,-0.67c-5.69,-0.84,-6.53,-0.67,-7.7,-7.7c0,0,0,-10.04,0,-10.04c1.68,-5.68,2.01,-6.02,9.04,-6.52Z\"\n        id=\"text2\" __id__=\"_fcblack_scwhite_sw1_nmtext2_\" style=\"fill:#000000;stroke:#ffffff;stroke-width:1\" />\n    <path\n        d=\"m736.42596,1673.7105c15.799,-0.18,30.88,15.26,36.984,33.75c0.718,22.98,-3.412,37.34,-21.724,43.8c-26.929,1.08,-32.674,-11.85,-36.803,-40.21c0.359,-15.08,2.872,-31.24,21.543,-37.34Zm128.723,-8.8c-1.173,4.66,-1.975,31.96,-0.718,45.96c1.795,2.33,4.309,1.79,6.822,0.72c0,0,21.903,-14.72,21.903,-14.72c1.256,-9.88,1.436,-9.7,-0.898,-18.86c0.311,0,-8.075,-13.32,-27.109,-13.1Z\"\n        id=\"text3\" __id__=\"_fcwhite_scwhite_sw1_nmtext3_\" style=\"fill:#ffffff;stroke:#ffffff;stroke-width:1\" />\n</svg>","clickableShapes":[],"javascriptHandlers":[],"smilAnimations":[],"bindings":[],"showCoordinates":false,"autoFormatAfterEdit":false,"showBrowserErrors":false,"showBrowserEvents":false,"enableJsDebugging":false,"sendMsgWhenLoaded":false,"noClickWhenDblClick":false,"outputField":"payload","editorUrl":"//drawsvg.org/drawsvg.html","directory":"","panning":"disabled","zooming":"disabled","panOnlyWhenZoomed":false,"doubleClickZoomEnabled":false,"mouseWheelZoomEnabled":false,"dblClickZoomPercentage":150,"cssString":"div.ui-svg svg{\n    color: none;\n    fill: none !important;\n}\ndiv.ui-svg path {\n    fill: none;\n}\nui-card-panel {\n    border: 0px !important;\n}\n","name":"Svg Dashboard","x":1012.111213684082,"y":1722.2778129577637,"wires":[[]]},{"id":"dbe92f5fc46e8510","type":"function","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"replace svg command","func":"msg.payload = {\n    \"svg\": msg.payload['d'],\n    \"command\": \"replace_svg\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":681.0000915527344,"y":1723.499994277954,"wires":[["170832232b87a999"]]},{"id":"1c7cf67bdb84bd31","type":"inject","z":"543929cb2e9c4087","d":true,"name":"","props":[],"repeat":"15","crontab":"","once":true,"onceDelay":"2","topic":"","x":986.25,"y":238.75006103515625,"wires":[["b7894a43c60b4494"]]},{"id":"7548d1bd1baa829d","type":"xml","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","property":"payload.d","attr":"","chr":"","x":771.0556793212891,"y":1772.8611640930176,"wires":[["162050749f61b956"]]},{"id":"2a661a27149b122c","type":"xml","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","property":"payload.d","attr":"","chr":"","x":1135.5279693603516,"y":1771.0557441711426,"wires":[["c81d27b03cf13c69"]]},{"id":"162050749f61b956","type":"function","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"Remove stuff for the print of the svg","func":"// remove original width and height of the svg\n//delete msg.payload.d.svg['$'].width;\n//delete msg.payload.d.svg['$'].height;\n// this doesn't really help, penpoint just chooses \n// a random new value - have to open the SVG in inkscape\n// and set the document size to the image.\n\n\n// one single background rect, no need for that\ndelete msg.payload.d.svg.g[0].g[0].rect;\n\n// grid in the background, no need for that.\ndelete msg.payload.d.svg.g[0].g[0].g[0];\n\n// these are the links between nodes, remove the background white and the \n// outline, leaving just one line.\n(msg.payload.d.svg.g[0].g[0].g[3].g || []).forEach( function(path){\n    path.path[0] = path.path[2];\n    path.path.length = 1;\n});\n\n// these are the connect rectangles, i.e. the rect on\n// nodes where the connection lines come in.\n(msg.payload.d.svg.g[0].g[0].g[5].g || []).forEach(function (rect) {\n    rect.rect.length = 1;\n});\n\n// these are the nodes\n(msg.payload.d.svg.g[0].g[0].g[6].g || []).forEach(function (nde) {\n    delete nde.g[2].rect;\n    delete nde.g[2].text;\n    delete nde.g[3].circle;\n    delete nde.g[4].path;\n});\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":954.5835113525391,"y":1825.5973634719849,"wires":[["2a661a27149b122c"]]},{"id":"14ba97a0d41f5494","type":"function","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"set filename & payload","func":"msg.filename = \"/data/screenshots/\" + (msg.payload.filename_prefix || \"screenshot\") + \"-\" + (msg.payload.screenshot_tstamp || Date.now()) + \".svg\";\n\nmsg.payload = msg.payload.d;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":685.5556640625,"y":1900.9446287155151,"wires":[["00c967aaf678c503"]]},{"id":"91b9243a96c4fd2d","type":"Screenshot","z":"543929cb2e9c4087","name":"","screenshot":"","x":1424.27783203125,"y":297.2084045410156,"wires":[]},{"id":"d3f31ca68ccbc82c","type":"function","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"set xml options","func":"msg.options = {\n    preserveChildrenOrder: true,\n};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":659.8612174987793,"y":1827.8890542984009,"wires":[["7548d1bd1baa829d"]]},{"id":"564e02c8cfa47c94","type":"ui_text_input","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","label":"URL","tooltip":"","group":"311ea16f0a12989c","order":2,"width":0,"height":0,"passthru":true,"mode":"text","delay":"0","topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":305.0001525878906,"y":1194,"wires":[["b81f894c6eef09ee"]]},{"id":"d46a4d5078790d64","type":"http request","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","method":"GET","ret":"bin","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":true,"headers":[],"x":374.55553817749023,"y":1553.555519104004,"wires":[["93c42c3372b8ce17"]]},{"id":"f92e1db33e529de3","type":"change","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":374.55559158325195,"y":1395.777738571167,"wires":[["d46a4d5078790d64"]]},{"id":"38b52396192f58c7","type":"catch","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","scope":["d46a4d5078790d64"],"uncaught":false,"x":360.1112251281738,"y":1530.22220993042,"wires":[["b3ab5338202ec4af"]]},{"id":"b3ab5338202ec4af","type":"ui_toast","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","position":"top right","displayTime":"3","highlight":"","sendall":false,"outputs":0,"ok":"OK","cancel":"","raw":false,"className":"","topic":"","name":"","x":1836.778133392334,"y":1531.3334350585938,"wires":[]},{"id":"93c42c3372b8ce17","type":"switch","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"if statusCode is 200","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":616.778003692627,"y":1484.6665468215942,"wires":[["5e38b19f8720066c"],["b3ab5338202ec4af"]]},{"id":"5e38b19f8720066c","type":"function","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"set filename","func":"var filename = new url.URL(msg.url).pathname.split('/').pop();\n\n// add timestamp to ensure pseudo uniqueness but avoid having to\n// check whether the file already exists.\nmsg.filename = \"/data/content/\" + (new Date()).getTime() + \"_\" + filename.replace(/[\\t\\n ]/g, \"_\");\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[{"var":"url","module":"url"}],"x":844.5554847717285,"y":1389.1111669540405,"wires":[["e7314418a4f5711a"]]},{"id":"b2f171fcfb5888f7","type":"catch","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","scope":["5e38b19f8720066c"],"uncaught":false,"x":845.6669807434082,"y":1413.5555486679077,"wires":[["b3ab5338202ec4af"]]},{"id":"5105c71ef82667e0","type":"file","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","filename":"filename","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"setbymsg","x":1181.2226448059082,"y":1216.888949394226,"wires":[["ed202ff749c3638f","ae465350dde2a56a"]]},{"id":"ed202ff749c3638f","type":"function","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"set payload for notification","func":"msg.payload = \"Saved \" + msg.filename.split('/').pop();\nmsg.highlight = \"green\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480.1112937927246,"y":1215.7777767181396,"wires":[["b3ab5338202ec4af","98d342e6b26263bd"]]},{"id":"e7314418a4f5711a","type":"file","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","filename":"filename","filenameType":"msg","appendNewline":true,"createDir":false,"overwriteFile":"delete","encoding":"none","x":989.0001258850098,"y":1290.2223010063171,"wires":[["5105c71ef82667e0"]]},{"id":"311836af450a2a83","type":"catch","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"","scope":["e7314418a4f5711a"],"uncaught":false,"x":1009.0001258850098,"y":1271.2223010063171,"wires":[["5105c71ef82667e0"]]},{"id":"98d342e6b26263bd","type":"change","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"empty payload, blank field","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1642.3333625793457,"y":1120.8888359069824,"wires":[["564e02c8cfa47c94"]]},{"id":"b81f894c6eef09ee","type":"switch","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"if payload is non-empty","property":"payload","propertyType":"msg","rules":[{"t":"nempty"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":345.5556335449219,"y":1289.6666259765625,"wires":[["f92e1db33e529de3"],[]]},{"id":"7f4412c2c97d442d","type":"http in","z":"543929cb2e9c4087","g":"365da6f212399911","name":"","url":"/scrnsht/:path","method":"get","upload":false,"swaggerDoc":"","x":325.7778015136719,"y":713.888916015625,"wires":[["9c4dac4933c82cbb"]]},{"id":"c013c2a68455b629","type":"file in","z":"543929cb2e9c4087","g":"365da6f212399911","name":"","filename":"filename","filenameType":"msg","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":355.7778015136719,"y":833.888916015625,"wires":[["5c1be2f6e559bf25"]]},{"id":"9c4dac4933c82cbb","type":"function","z":"543929cb2e9c4087","g":"365da6f212399911","name":"set filename","func":"msg.filename = \"/data/screenshots/\" + msg.req.params.path;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":345.7778015136719,"y":774.888916015625,"wires":[["c013c2a68455b629"]]},{"id":"535c32c9acc84bed","type":"http response","z":"543929cb2e9c4087","g":"365da6f212399911","name":"svg","statusCode":"","headers":{"content-type":"image/svg+xml"},"x":754.7778015136719,"y":861.888916015625,"wires":[]},{"id":"0127edf2dd61aae1","type":"catch","z":"543929cb2e9c4087","g":"365da6f212399911","name":"","scope":["c013c2a68455b629","9c4dac4933c82cbb","7f4412c2c97d442d"],"uncaught":false,"x":364.7778015136719,"y":986.888916015625,"wires":[["fb699620012a5276"]]},{"id":"fb699620012a5276","type":"function","z":"543929cb2e9c4087","g":"365da6f212399911","name":"statusCode 404","func":"msg.statusCode = 404;\nmsg.payload = {\n    status: \"not_found\",\n    msg: \"page not found\",\n    path: msg.req.originalUrl\n};\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":335.7778015136719,"y":922.388916015625,"wires":[["41c6b348d4738cd4"]]},{"id":"41c6b348d4738cd4","type":"http response","z":"543929cb2e9c4087","g":"365da6f212399911","name":"gif,pdf,jpg","statusCode":"","headers":{},"x":754.7778015136719,"y":936.888916015625,"wires":[]},{"id":"5c1be2f6e559bf25","type":"switch","z":"543929cb2e9c4087","g":"365da6f212399911","name":"content type check","property":"filename","propertyType":"msg","rules":[{"t":"cont","v":".svg","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":544.77783203125,"y":842.888916015625,"wires":[["535c32c9acc84bed"],["41c6b348d4738cd4"]]},{"id":"f8752e78756f8742","type":"exec","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","command":"ls -t /data/screenshots/","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":1768.8891296386719,"y":1900.8883590698242,"wires":[["9169ab1abbd8a902","de10299bae5ad82d"],[],[]]},{"id":"9169ab1abbd8a902","type":"split","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"complete","x":2022.0004806518555,"y":1819.2219429016113,"wires":[["5716315fb1f03e70"]]},{"id":"33c2018184e5c112","type":"join","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2241.7784881591797,"y":1797.1104860305786,"wires":[["0ecd16d680721886"]]},{"id":"5716315fb1f03e70","type":"change","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"'/scrnsht/' & payload","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":2209.889335632324,"y":1730.277403831482,"wires":[["33c2018184e5c112"]]},{"id":"40f89409b72aedde","type":"template","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{#payload}}\n<a  title=\"{{{ . }}}\" href=\"{{{ . }}}\"><img title=\"{{{ . }}}\" src=\"{{{ . }}}\" width=\"150\" border=1/></a>\n{{/payload}}","output":"str","x":2571.33341217041,"y":1723.8882551193237,"wires":[["b3e17d2fc9a0c423"]]},{"id":"b3e17d2fc9a0c423","type":"ui_template","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","group":"0b435ba8c2ed0af1","name":"","order":2,"width":12,"height":19,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":2714.666923522949,"y":1784.9992589950562,"wires":[[]]},{"id":"0ecd16d680721886","type":"function","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"only frist 30 images","func":"msg.payload = msg.payload.slice(0,30);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2425.77774810791,"y":1797.2215871810913,"wires":[["40f89409b72aedde"]]},{"id":"9b450d5a6ea87963","type":"ui_button","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","group":"0b435ba8c2ed0af1","order":1,"width":12,"height":1,"passthru":false,"label":"Take Screenshot & Refresh List","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":1697.5554656982422,"y":1989.9998779296875,"wires":[["5beeec69cb40210a","db3c6b840d925f59"]]},{"id":"55b87a21ffc95990","type":"ui_toast","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","position":"top right","displayTime":"3","highlight":"","sendall":false,"outputs":0,"ok":"OK","cancel":"","raw":false,"className":"","topic":"","name":"","x":2331.777801513672,"y":1989.9998779296875,"wires":[]},{"id":"de10299bae5ad82d","type":"change","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Updating list ...","tot":"str"},{"t":"set","p":"highlight","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2024.7778396606445,"y":1874.666452407837,"wires":[["55b87a21ffc95990"]]},{"id":"db3c6b840d925f59","type":"change","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Triggering screenshot ..","tot":"str"},{"t":"set","p":"highlight","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2043.8888473510742,"y":1989.9998779296875,"wires":[["55b87a21ffc95990"]]},{"id":"3e64ec1fc3019b9d","type":"inject","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"show files in template on startup","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1414.0001831054688,"y":1951.5555839538574,"wires":[["f8752e78756f8742"]]},{"id":"b7894a43c60b4494","type":"change","z":"543929cb2e9c4087","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"},{"t":"set","p":"notification","pt":"msg","to":"off","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"},{"t":"set","p":"filename_prefix","pt":"msg","to":"art","tot":"str"},{"t":"set","p":"screenshot_tstamp","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1218,"y":297,"wires":[["91b9243a96c4fd2d"]]},{"id":"5beeec69cb40210a","type":"link out","z":"543929cb2e9c4087","g":"d44887dafa5f25a8","name":"refresh list button pressed","mode":"link","links":["e4405dd9b2066f42"],"x":2025.3332824707031,"y":1930.8884439468384,"wires":[]},{"id":"e4405dd9b2066f42","type":"link in","z":"543929cb2e9c4087","name":"take screenshot","links":["5beeec69cb40210a"],"x":1052,"y":346,"wires":[["b7894a43c60b4494"]]},{"id":"ae465350dde2a56a","type":"link out","z":"543929cb2e9c4087","g":"aa2decf2d69998ae","name":"url upload trigger file list update","mode":"link","links":["742d750b96805e71"],"x":1334.4444444444443,"y":1296.6666666666667,"wires":[]},{"id":"fc05c81222164d70","type":"file","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","filename":"filename","filenameType":"msg","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":1014.221809387207,"y":715.4444484710693,"wires":[["f51bd87a446a17a1"]]},{"id":"0ff5ee7e1c498515","type":"function","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"set filename","func":"msg.filename = \"/data/content/\" + (new Date()).getTime() + \"_\" + msg.file.name.replace(/[\\t\\n ]/g, \"_\");\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1018.8885383605957,"y":578.1111164093018,"wires":[["38743bd0c91a72e2"]]},{"id":"4027586694c61f7c","type":"ui_upload","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","group":"311ea16f0a12989c","title":"upload","name":"","order":1,"width":12,"height":5,"chunk":"23","transfer":"binary","x":998.8885383605957,"y":478.11111640930176,"wires":[["1452cc35100518f7"]]},{"id":"1452cc35100518f7","type":"join","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","mode":"custom","build":"buffer","property":"payload","propertyType":"msg","key":"topic","joiner":"","joinerType":"bin","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":998.8885383605957,"y":527.1111164093018,"wires":[["0ff5ee7e1c498515"]]},{"id":"38743bd0c91a72e2","type":"file","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","filename":"filename","filenameType":"msg","appendNewline":true,"createDir":false,"overwriteFile":"delete","encoding":"none","x":1009.666259765625,"y":655.7777767181396,"wires":[["fc05c81222164d70"]]},{"id":"19c3214738ab7c39","type":"catch","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","scope":["38743bd0c91a72e2"],"uncaught":false,"x":1029.666259765625,"y":636.7777767181396,"wires":[["fc05c81222164d70"]]},{"id":"f51bd87a446a17a1","type":"exec","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","command":"ls -t /data/content/","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":1249.777458190918,"y":778.5554885864258,"wires":[["b68ced0d20422ef5"],[],[]]},{"id":"917826367a58328f","type":"inject","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"fill initial listing","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":993.666316986084,"y":777.5554828643799,"wires":[["f51bd87a446a17a1"]]},{"id":"b68ced0d20422ef5","type":"split","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"complete","x":1496.7773551940918,"y":766.2222366333008,"wires":[["1e1fbaac38048999"]]},{"id":"260286ce89cb35bf","type":"join","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1498.666259765625,"y":590.7777709960938,"wires":[["d74c082ee1f7d9bd"]]},{"id":"d74c082ee1f7d9bd","type":"ui_list","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","group":"311ea16f0a12989c","name":"","order":3,"width":12,"height":10,"lineType":"one","actionType":"menu","allowHTML":false,"outputs":1,"topic":"","x":1495.6662521362305,"y":508.44450187683105,"wires":[["a86d93ab3fda9881"]]},{"id":"1e1fbaac38048999","type":"change","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"{ \t    \"title\": payload,   \t    \"menu\": [\"rename\", \"copy md\", \"copy filename\", \"delete\"],\t    \"imgpath\": \"/content/\" & payload,\t    \"icon\": \"/content/\" & payload,\t    \"origfilename\": payload,\t    \"mdstmt\": \"![img](/content/\" & payload & \")\"\t}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1501.666259765625,"y":678.9443969726562,"wires":[["260286ce89cb35bf"]]},{"id":"1924ae935c6999d9","type":"ui_toast","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","position":"prompt","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"Cancel","raw":true,"className":"","topic":"Rename file","name":"","x":2474.00048828125,"y":484.77783203125,"wires":[["e98889dd8616d323"]]},{"id":"33b7bae610e669b9","type":"exec","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","command":"","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":3253.3330078125,"y":694.1112670898438,"wires":[["98bd36e475bf69ca"],[],[]]},{"id":"c68ca4c3939a8525","type":"function","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"rename file on harddrive","func":"msg.new_filename = \"/data/content/\" + msg.payload.replace(/[\\t\\n ]/g, \"_\");\n\nmsg.payload = \"mv /data/content/\" + msg.origfilename + \" \" + msg.new_filename;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2971.111083984375,"y":491.44451904296875,"wires":[["33b7bae610e669b9"]]},{"id":"e98889dd8616d323","type":"switch","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"non-cancel response","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Cancel","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":2690.66650390625,"y":484.77777099609375,"wires":[[],["c68ca4c3939a8525"]]},{"id":"a86d93ab3fda9881","type":"switch","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"check menu selection","property":"payload.selected","propertyType":"msg","rules":[{"t":"eq","v":"rename","vt":"str"},{"t":"eq","v":"copy md","vt":"str"},{"t":"eq","v":"copy filename","vt":"str"},{"t":"eq","v":"delete","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":1798.4442291259766,"y":509.0000991821289,"wires":[["8bdcf0464a3270ca"],["252f484b4b6c3202"],["279958613146fa1b"],["1d0bdb7e0ca1dcf2"]]},{"id":"8b69f49f4fead880","type":"template","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"js to copy to clipboard","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script>\nfunction fallbackCopyTextToClipboard(text) {\n  var textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n  \n  // Avoid scrolling to bottom\n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n  textArea.style.position = \"fixed\";\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    var successful = document.execCommand('copy');\n    var msg = successful ? 'successful' : 'unsuccessful';\n    console.log('Fallback: Copying text command was ' + msg);\n  } catch (err) {\n    console.error('Fallback: Oops, unable to copy', err);\n  }\n\n  document.body.removeChild(textArea);\n}\nfunction copyTextToClipboard(text) {\n  if (!navigator.clipboard) {\n    fallbackCopyTextToClipboard(text);\n    return;\n  }\n  navigator.clipboard.writeText(text).then(function() {\n    console.log('Async: Copying to clipboard was successful!');\n  }, function(err) {\n    console.error('Async: Could not copy text: ', err);\n  });\n}\n\ncopyTextToClipboard(\"{{{ textToCopy }}}\");\n\n</script>\nCopied {{{ textToCopy }}}","output":"str","x":2421.888671875,"y":586.5556030273438,"wires":[["6547502f9a15e924"]]},{"id":"6547502f9a15e924","type":"ui_toast","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","position":"top right","displayTime":"0","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":true,"className":"","topic":"","name":"","x":2684.55517578125,"y":587,"wires":[]},{"id":"b1c27774f6f1b398","type":"ui_toast","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"Cancel","raw":true,"className":"","topic":"Delete File","name":"","x":2352,"y":689.1112060546875,"wires":[["b09cc8d12b02d0a2"]]},{"id":"b09cc8d12b02d0a2","type":"switch","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"non-cancel response","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Cancel","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":2569.55558013916,"y":688.7779064178467,"wires":[[],["7b7e38a557683770"]]},{"id":"7b7e38a557683770","type":"function","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"delete file on harddrive","func":"msg.payload = \"rm -f /data/content/\" + msg.origfilename;\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2823.888916015625,"y":693.5556640625,"wires":[["33b7bae610e669b9"]]},{"id":"742d750b96805e71","type":"link in","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"update file list","links":["98bd36e475bf69ca","ae465350dde2a56a"],"x":1033.3335609436035,"y":860.000172721015,"wires":[["f51bd87a446a17a1"]]},{"id":"98bd36e475bf69ca","type":"link out","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"trigger file list update","mode":"link","links":["742d750b96805e71"],"x":3572.33349609375,"y":898.1112060546875,"wires":[]},{"id":"279958613146fa1b","type":"change","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","rules":[{"t":"set","p":"textToCopy","pt":"msg","to":"payload.origfilename","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2161,"y":606,"wires":[["8b69f49f4fead880"]]},{"id":"252f484b4b6c3202","type":"change","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","rules":[{"t":"set","p":"textToCopy","pt":"msg","to":"payload.mdstmt","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2163,"y":563,"wires":[["8b69f49f4fead880"]]},{"id":"1d0bdb7e0ca1dcf2","type":"change","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","rules":[{"t":"set","p":"origfilename","pt":"msg","to":"payload.origfilename","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"payload.origfilename","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2035,"y":689,"wires":[["b1c27774f6f1b398"]]},{"id":"8bdcf0464a3270ca","type":"change","z":"543929cb2e9c4087","g":"20b77a8b7c7caed7","name":"","rules":[{"t":"set","p":"origfilename","pt":"msg","to":"payload.origfilename","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"payload.origfilename","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2242,"y":485,"wires":[["1924ae935c6999d9"]]}]