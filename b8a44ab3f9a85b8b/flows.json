[{"id":"b8a44ab3f9a85b8b","type":"tab","label":"Node-RED Learnings: TypeError: Illegal invocation","disabled":false,"info":"::: discussion\n\nDon't use a join within the request-response cycle.\n\nThis flow will fail as the join does a clone of the message interfering with the socket for returning the response.\n\nHere the join is obvious, but beware of having **any** join anywhere within in the request-response cycle.\n\nThis can happen indirectly via a link-call that affects the message object.\n\n:::","env":[]},{"id":"bba595432c7f3c8b","type":"http in","z":"b8a44ab3f9a85b8b","name":"","url":"/fubar","method":"get","upload":false,"swaggerDoc":"","x":505,"y":900,"wires":[["0c7bbf084ab7b237","3ae4c2ee21dd375b","ef8c658eab882cc6"]]},{"id":"0c7bbf084ab7b237","type":"change","z":"b8a44ab3f9a85b8b","name":"","rules":[{"t":"set","p":"first","pt":"msg","to":"firt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":761,"y":772,"wires":[["3ae4c2ee21dd375b"]]},{"id":"3ae4c2ee21dd375b","type":"join","z":"b8a44ab3f9a85b8b","name":"","mode":"custom","build":"array","property":"","propertyType":"full","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":959,"y":908,"wires":[["8ab68a395a7e726a"]]},{"id":"015eee9d33351808","type":"http response","z":"b8a44ab3f9a85b8b","name":"","statusCode":"","headers":{},"x":1443,"y":742,"wires":[]},{"id":"ef8c658eab882cc6","type":"debug","z":"b8a44ab3f9a85b8b","name":"debug 28","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":758,"y":1049,"wires":[]},{"id":"8ab68a395a7e726a","type":"function","z":"b8a44ab3f9a85b8b","name":"return first payload","func":"var msg = msg.payload[0];\nmsg.payload = \"hello\"\nmsg.statusCode = 200;\n\nreturn msg","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1201.33349609375,"y":823.666748046875,"wires":[["015eee9d33351808"]]}]