[{"id":"07b2d0f3b0445ab5","type":"tab","label":"[Introspection] Screenshot","disabled":false,"info":"::: aim\n\nTo take a screenshot of the editor workspace. The screenshot can be posted to an endpoint for further manipulation within Node-RED flow.\n\nThe screenshot will be in SVG format for futher manipulation outside of Node-RED.\n\n:::\n\n::: requirements\n\nThis requirements the following Node-RED nodes:\n\n- [introspection](https://flows.nodered.org/node/@gregoriusrippenstein/node-red-contrib-introspection)\n\n:::\n\n### Flow Explanation\n\nDouble clicking on the <a class=\"ahl-node-only\" data-ids=\"11d5324697892299\">Screenshot</a> node will open the editor tray with the following:\n\n<!--\n// [[Introspection] Screenshot] [tab] \"[Introspection] Screenshot\" - 07b2d0f3b0445ab5\n// [[Introspection] Screenshot] [DrawSVG] \"\" - be7ba9550a572bda\n// [[Introspection] Screenshot] [Screenshot] \"\" - 11d5324697892299\n// [[Introspection] Screenshot] [debug] \"debug 39\" - b76fb81df943c714\n// [[Introspection] Screenshot] [inject] \"\" - 52215b2a7ab1b9bf\n// [[Introspection] Screenshot] [change] \"\" - 45760b0a8407d2b9\n// [[Introspection] Screenshot] [change] \"\" - b7894a43c60b4494\n// [[Introspection] Screenshot] [http in] \"\" - a5035e501d0b58be\n// [[Introspection] Screenshot] [function] \"respond with ok\" - a9f9ce494ec4edc1\n// [[Introspection] Screenshot] [http response] \"\" - e62ae897ba4c777f\n// [[Introspection] Screenshot] [inject] \"\" - 52215b2a7ab1b9bf\n// [[Introspection] Screenshot] [debug] \"debug 39\" - b76fb81df943c714\n// [[Introspection] Screenshot] [function] \"respond with ok\" - a9f9ce494ec4edc1\n-->\n\n\n![img](https://cdn.openmindmap.org/content/1691237351814_Screen_Shot_2023-08-05_at_14.07.43.png)\n\nIn the editor window the SVG screenshot is shown and below that, the downlad and copy to clipboard buttons allow the SVG screenshot to be downloaded or copied.\n\nAlso shown is the post endpoint field that allows configuration of the endpoint to which the screenshot should be posted. The shown endpoint corresponds to the <a class=\"ahl-node-only\" data-ids=\"a5035e501d0b58be\">http in node</a> contained in the flow.\n\nThe <a class=\"ahl-node-only\" data-ids=\"52215b2a7ab1b9bf\">inject node</a> triggers the screenshot node to generate  a SVG screenshot and post it to the <a class=\"ahl-node-only\" data-ids=\"a5035e501d0b58be\">http in node</a> which responses with <a class=\"ahl-link-node\" data-ids=\"a5035e501d0b58be,a9f9ce494ec4edc1,e62ae897ba4c777f\">status 200 - OK</a> and at the same time sending the SVG to the <a class=\"ahl-link-node\" data-ids=\"a5035e501d0b58be,b76fb81df943c714\">debug console</a>.\n\nFor bonus effect the disabled <a class=\"ahl-node-only\" data-ids=\"45760b0a8407d2b9\">change node</a> can be enabled and the SVG is drawn onto the workspace. This can be seen by moving a node or two. The <a class=\"ahl-node-only\" data-ids=\"be7ba9550a572bda\">DrawSVG</a> node draws any SVG onto the workspace. The SVG can be removed by reloading the browser window with the Node-RED editor.\n\n### Related flows\n\n- Introspection [DrawSVG node](https://flowhub.org/f/141037dcda5b69fd)\n\n","env":[]},{"id":"be7ba9550a572bda","type":"DrawSVG","z":"07b2d0f3b0445ab5","name":"","x":1314,"y":710,"wires":[]},{"id":"11d5324697892299","type":"Screenshot","z":"07b2d0f3b0445ab5","name":"","screenshot":"","endpoint":"/post/scrnsht","x":644,"y":286,"wires":[]},{"id":"b76fb81df943c714","type":"debug","z":"07b2d0f3b0445ab5","name":"debug 39","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"","statusType":"counter","x":945,"y":769,"wires":[]},{"id":"52215b2a7ab1b9bf","type":"inject","z":"07b2d0f3b0445ab5","name":"","props":[],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":164,"y":678,"wires":[["b7894a43c60b4494"]]},{"id":"45760b0a8407d2b9","type":"change","z":"07b2d0f3b0445ab5","d":true,"name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.d","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":648,"wires":[["be7ba9550a572bda"]]},{"id":"b7894a43c60b4494","type":"change","z":"07b2d0f3b0445ab5","name":"","rules":[{"t":"set","p":"notification","pt":"msg","to":"on","tot":"str"},{"t":"set","p":"filename_prefix","pt":"msg","to":"art","tot":"str"},{"t":"set","p":"screenshot_tstamp","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":368,"y":454,"wires":[["11d5324697892299"]]},{"id":"a5035e501d0b58be","type":"http in","z":"07b2d0f3b0445ab5","name":"","url":"/post/scrnsht","method":"post","upload":false,"swaggerDoc":"","x":686,"y":603,"wires":[["b76fb81df943c714","a9f9ce494ec4edc1","45760b0a8407d2b9"]]},{"id":"a9f9ce494ec4edc1","type":"function","z":"07b2d0f3b0445ab5","name":"respond with ok","func":"msg.payload = {\n    status: \"ok\",\n    data: {\n    }\n};\nmsg.statusCode = 200;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":958,"y":534,"wires":[["e62ae897ba4c777f"]]},{"id":"e62ae897ba4c777f","type":"http response","z":"07b2d0f3b0445ab5","name":"","statusCode":"","headers":{"content-type":"application/json"},"x":1208.2501220703125,"y":548.9444274902344,"wires":[]}]