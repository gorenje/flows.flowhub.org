[{"id":"78544e8eddf6274b","type":"tab","label":"[package.json] get my latest package versions","disabled":false,"info":"### Description\n\nBased on package prefix, return a list of latest versions. Unfortunately npmjs.com does not have a *open* API for retrieving the packages created by a user, hence the package prefix is used.\n\nThis is also only for Node-RED packages.\n\n### Result\n\n```\n\"@gregoriusrippenstein/node-red-contrib-introspection\": \"0.5.0\",\n\"@gregoriusrippenstein/node-red-contrib-auto-alignment\": \"0.0.8\",\n\"@gregoriusrippenstein/node-red-contrib-neuralnet-builder\": \"0.0.8\",\n\"@gregoriusrippenstein/node-red-contrib-validation-and-documentation\": \"0.0.9\",\n\"@gregoriusrippenstein/node-red-contrib-uglifyjs\": \"0.0.6\",\n\"@gregoriusrippenstein/node-red-contrib-flow2uml\": \"0.1.2\",\n\"@gregoriusrippenstein/node-red-contrib-flowcompare\": \"0.1.0\",\n\"@gregoriusrippenstein/node-red-contrib-flowhub\": \"0.3.0\",\n\"@gregoriusrippenstein/node-red-contrib-nodedev\": \"0.1.6\",\n```\n\n","env":[]},{"id":"c70c3f173bf37c29","type":"inject","z":"78544e8eddf6274b","name":"trigger with package_prefix value","props":[{"p":"payload"},{"p":"package_prefix","v":"@gregoriusrippenstein","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":415,"y":246,"wires":[["ffcc24b2b63b78c3"]]},{"id":"ffcc24b2b63b78c3","type":"http request","z":"78544e8eddf6274b","name":"GET package catalogue","method":"GET","ret":"obj","paytoqs":"ignore","url":"https://catalogue.nodered.org/catalogue.json?_={{ payload }}","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":663,"y":908,"wires":[["2b8a59f47e626c98"]]},{"id":"2b8a59f47e626c98","type":"function","z":"78544e8eddf6274b","name":"filter catalogue data","func":"msg.payload = msg.payload.modules.filter( e => {\n    return e.id.startsWith(msg.package_prefix + \"/\")\n})\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":771,"wires":[["f22c6cef3aa4ec5e"]]},{"id":"f22c6cef3aa4ec5e","type":"split","z":"78544e8eddf6274b","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1058,"y":917,"wires":[["bbb15a45b4aa929f"]]},{"id":"bbb15a45b4aa929f","type":"function","z":"78544e8eddf6274b","name":"create url","func":"return {\n    ...msg,\n    url: \"https://registry.npmjs.org/\" + msg.payload.id,\n}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1158,"y":767,"wires":[["f25f35caf0c75bbd"]]},{"id":"f25f35caf0c75bbd","type":"http request","z":"78544e8eddf6274b","name":"","method":"GET","ret":"obj","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":1264,"y":617,"wires":[["a57bb545e6db41cc"]]},{"id":"a57bb545e6db41cc","type":"change","z":"78544e8eddf6274b","name":"","rules":[{"t":"set","p":"payload.latest","pt":"msg","to":"payload[\"dist-tags\"].latest","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":773,"y":522,"wires":[["250531abcaafb0b3"]]},{"id":"250531abcaafb0b3","type":"join","z":"78544e8eddf6274b","name":"","mode":"auto","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":"false","timeout":"","count":"","reduceRight":false,"x":739,"y":463,"wires":[["b8ce3cce9d2f5bad"]]},{"id":"b8ce3cce9d2f5bad","type":"template","z":"78544e8eddf6274b","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{#payload}}\n\"{{{ _id }}}\": \"{{ latest }}\",\n{{/payload}}","output":"str","x":751,"y":353,"wires":[["2a4be39527a478a2"]]},{"id":"2a4be39527a478a2","type":"debug","z":"78544e8eddf6274b","name":"result","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":733,"y":244,"wires":[]}]